/*****************************************************************/
/** chroma-components v1.0.0 08-11-2017	**/
/** chroma-components, logos and all images are registered     	**/
/** trademarks of Chroma Italy Hotels srl.                     	**/
/** All rights reserved.                                     	**/
/** Registration code: 21-11-2016/011058        	**/
/** 						                                 	**/
/**                               Chroma Italy Hotels srl Â® 2016	**/
/*****************************************************************/
!function(){"use strict";angular.module("chroma.components",["ngMaterial","chroma.services","chroma.utils"])}(),function(){"use strict";function e(e,t,n,i,o){var a=this;this.$onInit=function(){a.btnClass=a.btnClass||"md-raised md-primary",a.downloadingClass=a.downloadingClass||"md-accent md-hue-2",a.maxRetry=a.maxRetry||1,a.retryDelay=a.retryDelay||5e3},this.$download=function(e){a.$$attempt=1,a.$doDownload(e)},this.$doDownload=function(e){a.$$downloading=!0;var n=function(){a.$$attempt++};t.get(a.url).then(function(t){if(t.data.file){if(bowser.ios){var n={file:t.data.file,filename:t.data.filename,contentType:t.data.contentType,title:a.downloadReadyLabel,downloadLabel:a.downloadLabel};o.downloadFile(e,n)}else{var i=a.$getLinkEl();if(i.href="data:"+(t.data.contentType||"application/octet-stream")+";base64,"+encodeURI(t.data.file),i.setAttribute("download",t.data.filename),document.createEvent){var l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});i.dispatchEvent(l)}else i.fireEvent("click")}a.$$downloading=!1}else a.$manageRetry(!0)},function(e){412!=e.status&&a.$manageRetry(507==e.status)||(i.error((e.data,e.data.message?e.data.message:"")),a.onError&&a.onError({response:e}),a.$$downloading=!1)}).finally(n,n)},this.$manageRetry=function(e){return a.$$attempt<a.maxRetry&&(n(a.$doDownload,e?a.retryDelay:1e3),!0)},this.$getLinkEl=function(){var e=element[0].querySelector(".ch-download-button-link");return null==e&&((e=document.createElement("a")).setAttribute("target","_blank"),e.className="ch-download-button-link",element[0].appendChild(e)),e}}e.$inject=["$scope","$http","$timeout","$log","Dialog"],angular.module("chroma.components").component("chDownloadButton",{bindings:{url:"<",btnClass:"@",label:"@",labelClass:"@",iconClass:"@",downloadingLabel:"@",downloadingClass:"@",downloadReadyLabel:"@",downloadLabel:"@",maxRetry:"<?",retryDelay:"<?",onError:"&?"},controller:e,template:'<span class="no-padding no-margin"><md-button class="{{$ctrl.btnClass}}" ng-click="$ctrl.$download($event)" aria-label="{{$ctrl.label}}" ng-disabled="$ctrl.$$downloading"><span ng-if="!$ctrl.$$downloading" class="layout-row layout-align-center-center"><md-icon ng-show="$ctrl.iconClass" class="material-icons {{$ctrl.iconClass}}"></md-icon><span style="margin-left: 5px" class="{{$ctrl.labelClass}}">{{$ctrl.label}}</span></span><span ng-if="$ctrl.$$downloading" class="layout-row layout-align-center-center"><md-progress-circular class="{{$ctrl.downloadingClass}}" md-mode="indeterminate" md-diameter="20"></md-progress-circular><span style="margin-left: 5px" class="{{$ctrl.labelClass}}">{{$ctrl.downloadingLabel || $ctrl.label}}</span></span></md-button><a class="ch-download-button-link" download target="_blank"></a></span>'})}(),function(){"use strict";function e(e,t,n){var i=this;this.$onInit=function(){i.ngDisabled=!!_.isBoolean(i.ngDisabled)&&i.ngDisabled,i.bgClass=i.bgClass||"bg-primary",i.easingClass=i.easingClass||"text-white",i.easingClassLimit=isFinite(parseInt(i.easingClassLimit))?parseInt(i.easingClassLimit):.5,i.easingClassLimit=i.easingClassLimit<=1?i.easingClassLimit:1,i.opacityLimit=isFinite(parseInt(i.opacityLimit))?parseInt(i.opacityLimit):450,i.$$contStyle={position:"fixed",width:"100%",top:"0",left:"0","z-index":"25"},i.$$transStyle={"z-index":"1"},i.$$baseBgStyle="position: absolute; z-index: -1; height: 100%; width: 100%; top: 0; left: 0;",i.$initWatches()},this.$postLink=function(){i.ngDisabled?i.$disableEasing():i.$enableEasing()},this.$enableEasing=function(){i.$$transClass=i.easingClass,angular.element(n).on("scroll",i.$ease)},this.$disableEasing=function(){angular.element(n).off("scroll",i.$ease),i.$$bgStyle=i.$$baseBgStyle+"opacity: 1 !important;",i.$$transClass="",e.$broadcast("easing-bg",{opacity:1})},this.$ease=function(){if(i.ngDisabled)i.$disableEasing();else{var o=angular.element(document.querySelectorAll(".md-select-backdrop, .md-menu-backdrop")),a=0+n.pageYOffset/(i.opacityLimit-t[0].childNodes[0].offsetHeight),l=a>=1?1:a;o.length>0&&(l=1),i.$$bgStyle=i.$$baseBgStyle+"opacity: "+l+"!important;",l<=i.easingClassLimit?i.$$transClass=i.easingClass:i.$$transClass="",e.$broadcast("easing-bg",{opacity:l}),e.$apply()}},this.$initWatches=function(){e.$watch(function(){return i.ngDisabled},function(e){(e=!!_.isBoolean(e)&&e)?i.$disableEasing():i.$enableEasing()})},this.$onDestroy=function(){i.$disableEasing()}}e.$inject=["$scope","$element","$window"],angular.module("chroma.components").component("chEasingBg",{transclude:!0,bindings:{bgClass:"@?",easingClass:"@?",easingClassLimit:"<",opacityLimit:"<",ngDisabled:"<"},controller:e,template:'<div class="ch-easing-bg" ng-style="$ctrl.$$contStyle"><div class="{{$ctrl.bgClass}}" ng-attr-style="{{$ctrl.$$bgStyle}}"></div><div ng-transclude class="{{$ctrl.$$transClass}}" ng-style="$ctrl.$$transStyle"></div></div>'})}(),function(){"use strict";function e(e,t,n,i){var o=this;this.$onInit=function(){o.storageUrl?o.initGridList():t.get().then(function(e){o.storageUrl=e.url,o.initGridList()})},this.openGallery=function(e,t){n.showGallery(e,o.galleryTitle,o.gallery,{storageUrl:o.storageUrl,initialSlide:t||0})},this.initGridList=function(){if(!_.isEmpty(o.gallery)){o.ratio=o.ratio||"4:3",o.maxCols=o.gallery.length,o.cols&&(o.colsArray=[],o.totalCols=0,_.forEach(o.cols.split(":"),function(e){var t=Math.abs(parseInt(e));o.totalCols+=t,o.colsArray.push(t)}),o.maxCols=i.lcmArray(o.colsArray),o.maxCols=o.gallery.length<o.colsArray[0]?o.gallery.length:o.maxCols),o.previewGallery=[],o.more=!1;var e=_.size(o.gallery);if(!(e<=0)){if(e>=o.totalCols){var t=o.maxItems?e-o.maxItems:e-o.totalCols;o.previewGallery=_.dropRight(o.gallery,t),o.more=e>o.totalCols}else o.previewGallery=o.gallery;if(o.rowspan&&(o.rowspanArray=[],_.forEach(o.rowspan.split(":"),function(e){o.rowspanArray.push(Math.abs(parseInt(e)))})),o.tilesConfig=[],_.forEach(o.previewGallery,function(e,t){_.isEmpty(o.colsArray)?o.tilesConfig.push({colspan:1}):_.forEach(o.colsArray,function(e,n,i){if(t<(0==n?e:e+i[n-1])||n+1==i.length)return o.tilesConfig.push({colspan:o.maxCols/e}),!1})}),_.size(o.tilesConfig)>1){var n=0;_.forEach(o.tilesConfig,function(e,t){_.isEmpty(o.rowspanArray)?e.rowspan=1:(n+=e.colspan,e.rowspan=o.rowspanArray[Math.ceil(n/o.maxCols)-1]||1)})}else o.tilesConfig[0].rowspan=1}}}}e.$inject=["$scope","AboutStorage","Dialog","NumberUtils"],angular.module("chroma.components").component("chGallery",{require:{},bindings:{gallery:"<?",storageUrl:"<?",galleryTitle:"@",cols:"@",rowspan:"@?",ratio:"@?",maxItems:"<?"},controller:e,template:'<div ng-if="$ctrl.gallery.length"><md-grid-list md-cols="{{$ctrl.maxCols}}" md-row-height="{{$ctrl.ratio}}" md-gutter="6px" md-gutter-gt-sm="4px"><md-grid-tile class="bg-black-light clickable" ng-repeat="photo in $ctrl.previewGallery track by $index" ng-click="$ctrl.openGallery($event, $index)" aria-lable="open gallery" md-colspan="{{$ctrl.tilesConfig[$index].colspan}}" md-rowspan="{{$ctrl.tilesConfig[$index].rowspan}}" style="overflow: hidden;"><span ng-class="{\'locked layout-row layout-align-start-center\': $last && $ctrl.more}"><strong ng-if="$last && $ctrl.more" class="locked-string locked-string-initial bg-opaque-7 text-uppercase"><span ng-if="($ctrl.gallery.length - $ctrl.previewGallery.length) == 1" translate="photo.photo.other.count"></span><span ng-if="($ctrl.gallery.length - $ctrl.previewGallery.length) != 1" translate="photo.photos.other.count" translate-value-count="{{$ctrl.gallery.length - $ctrl.previewGallery.length}}"></span></strong><img ng-src="{{$ctrl.storageUrl + photo.path}}" alt="{{photo.tags[0]}}" lazy-image default-img-url="\'/resources/public/img/no-gallery-image.png\'"></span></md-grid-tile></md-grid-list></div><div ng-if="!$ctrl.gallery.length"><img src="/resources/public/img/no-gallery-image.png" class="full-width"></div>'})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){},this.$hotelClick=function(e){t.onHotelClick&&t.onHotelClick({$event:e,hotel:t.hotel})}}e.$inject=["$scope"],angular.module("chroma.components").component("chHotelMapInfoWindow",{require:{chHotelMapCtrl:"^chHotelMap",ngMapCtrl:"ngMap"},bindings:{hotel:"<",showGallery:"<?",markerType:"@",onHotelClick:"&?"},controller:e,template:'<info-window id="hotel-iw"><div ng-non-bindable style="max-width: 300px;"><div ng-if="$ctrl.showGallery" style="width: 100; max-height: 200px" ng-init="config.noTop = true"><div flex ng-controller="slideGalleryCtrl" ng-init="bindGallery($ctrl.hotel.gallery); overrideConfig({autoplay: 0});"><div class="relative"><div class="img-top-bar"><div class="img-top-left-cont layout-row"><div class="md-subhead row-mini" ng-if="$ctrl.hotel.recommended"><small class="label gradient-yellow"><md-icon class="mdi mdi-thumb-up md-14 text-white"></md-icon>&nbsp;<span translate="common.recommended"></span></small></div><div flex></div><span ng-if="$ctrl.hotel" ng-controller="favoriteCtrl" ng-init="init($ctrl.hotel)"><md-button class="md-icon-button bg-opaque-5" ng-click="setFavorite()" aria-label="Like hotel"><md-icon ng-show="!$ctrl.hotel.favorite" class="mdi mdi-heart-outline text-white md-24"></md-icon><md-icon ng-show="$ctrl.hotel.favorite" class="mdi mdi-heart text-danger md-24" ng-class="{\'animated rubberBand\': $ctrl.hotel.favorite}"></md-icon><md-tooltip><span translate="common.favorite.set"></span></md-tooltip></md-button></span></div></div><div ng-show="loading" flex layout layout-align="center center"><md-progress-circular class="md-primary ch-progress" md-mode="indeterminate" md-diameter="40"></md-progress-circular></div><img ng-if="!gallery.length && !loading" class="main-image" ng-attr-alt="{{$ctrl.hotel.name}}" src="/resources/public/img/header.jpg"><ks-swiper-container class="button-mini" ng-if="gallery.length && galleryConfig.storageUrl && !loading"override-parameters="{grabCursor: galleryConfig.navButtons,keyboardControl: galleryConfig.keyboardControl,onSlideChangeStart: loadImageTags,centeredSlides: galleryConfig.centered,autoplayDisableOnInteraction: galleryConfig.autoplayDisableOnInteraction,preloadImages: !galleryConfig.lazyLoading,lazyLoading: galleryConfig.lazyLoading,lazyLoadingInPrevNext: galleryConfig.lazyLoading,pagination: false,watchSlidesVisibility: galleryConfig.lazyLoading && (galleryConfig.slidesPerView == \'auto\' || galleryConfig.slidesPerView > 1)}"container-cls="index-0 bg-gray-base"wrapper-cls="layout-row layout-align-start-center"pagination-cls="swiper-pagination-white"slides-per-view="galleryConfig.slidesPerView"slides-per-column="galleryConfig.slidesPerColumn"centered="galleryConfig.centered"autoplay="galleryConfig.autoplay"direction="{{galleryConfig.direction}}"show-nav-buttons="galleryConfig.navButtons"pagination-is-active="galleryConfig.pagination"pagination-clickable="galleryConfig.paginationClickable"initial-slide="galleryConfig.initialSlide"space-between="galleryConfig.spaceBetween"loop="galleryConfig.loop"><ks-swiper-slide slider-cls="no-bg" ng-class="{\'text-center\': galleryConfig.centered}" ng-repeat="image in gallery track by $index"><div ng-if="!galleryConfig.lazyLoading" class="main-image" ng-style="{\'background-image\': \'url(\'+galleryConfig.storageUrl + image.path+\')\'}"></div><div ng-if="galleryConfig.lazyLoading" ng-attr-data-background="{{galleryConfig.storageUrl}}{{image.path}}" class="main-image swiper-lazy"><div class="swiper-lazy-preloader swiper-lazy-preloader-white"></div></div></ks-swiper-slide></ks-swiper-container></div></div></div><div layout="column" class="md-padding no-padding-left no-padding-right no-padding-bottom text-left"><div layout><div flex><div md-truncate><span class="md-subhead">{{$ctrl.hotel.name}}</span></div><div layout><div flex><div><small class="label label-inline-block gradient-gray text-white text-wrap"><span translate="hotel.type.{{$ctrl.hotel.type}}"></span></small></div><div class="md-body-1 text-gray-light"><span>{{$ctrl.hotel.addressInfo.district}}</span>,&nbsp;<strong>{{$ctrl.hotel.addressInfo.city}}</strong></div><div class="md-body-1 text-gray-light"><md-icon class="mdi mdi-map-marker md-14"></md-icon>&nbsp;<small><em>{{$ctrl.hotel.addressInfo.address}},&nbsp;{{$ctrl.hotel.addressInfo.zipcode}}</em></small></div></div><div ng-if="$ctrl.markerType == \'price\'"><md-button ng-if="$ctrl.hotel.price" class="only-border border-success text-success no-margin-top no-margin-right"><div class="row-mini text-left"><div layout="column"><small><span class="text-initial" translate="common.from"></span><i ng-if="$ctrl.hotel.price.amount.initialAmount > 0 && $ctrl.hotel.price.amount.initialAmount > $ctrl.hotel.price.amount.finalAmount">&nbsp;<del>{{$ctrl.hotel.price.amount.initialAmount|chCurrency}}</del></i></small><span class="md-subhead row-mini"><strong>{{($ctrl.hotel.price.amount.finalAmount|chCurrency)}}</strong></span><small ng-if="$ctrl.hotel.nights > 0" class="text-lowercase"><span translate="common.for"></span>&nbsp;{{$ctrl.hotel.nights}}&nbsp;<span ng-show="$ctrl.hotel.nights == 1" translate="common.night"></span><span ng-show="$ctrl.hotel.nights > 1" translate="common.nights"></span></small></div></div></md-button><div ng-if="!$ctrl.hotel.price" layout="column" class="text-warn"><md-icon class="mdi mdi-emoticon-sad md-32 text-warn"></md-icon><strong translate="reservation.availability.missed"></strong></div></div></div></div></div><div ng-if="$ctrl.markerType == \'price\'"><div layout layout-padding layout-wrap class="no-padding-right no-padding-left no-padding-bottom" ng-if="$ctrl.hotel.price && $ctrl.hotel.roomsCounter.actual >= 1"><div flex-xs="100" flex-gt-xs layout layout-align="start center" class="text-success no-padding-left"><strong><em translate="reservation.availability.ok.simple"></em></strong></div><div flex-xs="100" flex layout="column" class="no-padding"><md-button class="bg-success no-margin-left no-margin-right" ng-click="$ctrl.$hotelClick()" aria-label="Book now"><span translate="common.book"></span></md-button></div></div><div layout layout-padding layout-wrap class="no-padding-right no-padding-left no-padding-bottom" ng-if="!$ctrl.hotel.price || $ctrl.hotel.roomsCounter.actual <= 0"><div flex-xs="100" flex-gt-xs layout layout-align="start center" class="text-warn no-padding-left"><strong><em translate="reservation.availability.missed.full"></em></strong></div><div flex-xs="100" flex layout="column" class="no-padding"><md-button class="bg-warn no-margin-left no-margin-right" ng-click="$ctrl.$hotelClick()" aria-label="Search other dates"><span translate="reservation.view.other.period"></span></md-button></div></div></div></div></div></info-window>'})}(),function(){"use strict";function e(e){var t=this,n=new google.maps.Geocoder;this.$onInit=function(){t.$getMarkerPosition()},this.$getMarkerPosition=function(){if(t.hotel){var e=t.hotel.addressInfo.address+", "+t.hotel.addressInfo.city+", "+t.hotel.addressInfo.zipcode;n.geocode({address:e},function(n,i){i==google.maps.GeocoderStatus.OK?t.$$position=n[0].geometry.location:console.error("Error geocoding hotel '"+t.hotel.name+"' (address: "+e+"): "+i)})}},this.$setSelected=function(e,t){e&&(e.selectEffect=!1,e.selected=!_.isBoolean(t)||t)},this.$showDetails=function(e,n){t.chHotelMapCtrl.$$currHotel&&t.chHotelMapCtrl.$$currHotel.id==e.id||(t.$hideDetails(ev,t.chHotelMapCtrl.$$currHotel),t.setSelected(e,!0),t.chHotelMapCtrl.$$currHotel=e),t.chHotelMapCtrl.map.showInfoWindow("hotel-iw",n?"cmk_"+e.id:"mk_"+e.id)},this.$hideDetails=function(e){t.$setSelected(e,!1),t.chHotelMapCtrl.map.hideInfoWindow("hotel-iw")}}e.$inject=["$scope"],angular.module("chroma.components").component("chHotelMapMarker",{require:{chHotelMapCtrl:"^chHotelMap",ngMapCtrl:"ngMap"},bindings:{hotel:"<",markerType:"@"},controller:e,template:'<div ng-if="$ctrl.hotel" ng-switch="$ctrl.markerType"><div ng-switch-when="pointer"><marker class="clickable" id="mk_{{$ctrl.hotel.id}}" ng-if="$ctrl.$$position" position="[{{$ctrl.$$position.lat()}}, {{$ctrl.$$position.lng()}}]" icon="{{$ctrl.markerIcon}}" on-mouseover="$ctrl.$showDetails($ctrl.hotel);"></marker></div><div ng-switch-default><custom-marker id="cmk_{{$ctrl.hotel.id}}" ng-if="$ctrl.$$position" position="[{{$ctrl.$$position.lat()}}, {{$ctrl.$$position.lng()}}]"on-click="$ctrl.$showDetails($ctrl.hotel, true)" on-mouseover="$ctrl.$setSelected($ctrl.hotel, true)" on-mouseout="$ctrl.$setSelected($ctrl.hotel, false)"><div class="clickable" ng-class="{\'animated bounce\': $ctrl.hotel.selected && $ctrl.hotel.selectEffect}"><div class="ch-marker-inner md-caption" ng-class="{\'bg-primary\': $ctrl.markerType == \'name\' || $ctrl.hotel.selected,\'bg-primary-light\': $ctrl.markerType == \'price\' && !$ctrl.hotel.selected && $ctrl.hotel.price ,\'bg-gray-light\': $ctrl.markerType == \'price\' && !$ctrl.hotel.selected && !$ctrl.hotel.price}" ng-switch="$ctrl.markerType"><span ng-switch-when="price"><div ng-if="$ctrl.hotel.price"><span>{{($ctrl.hotel.price.amount.finalAmount|chCurrency)}}</span></div><div ng-if="!$ctrl.hotel.price"><md-icon class="mdi mdi-emoticon-sad md-18 text-white"></md-icon></div></span><strong ng-switch-default>{{$ctrl.hotel.name}}</strong></div><div class="arrow-down arrow-sm" ng-class="{\'border-primary\': $ctrl.markerType == \'name\' || $ctrl.hotel.selected,'+"'border-primary-light': $ctrl.markerType == 'price' && !$ctrl.hotel.selected && $ctrl.hotel.price ,'border-gray-light': $ctrl.markerType == 'price' && !$ctrl.hotel.selected && !$ctrl.hotel.price}\"></div></div></custom-marker></div></div>"})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){t.contClass=t.contClass||"layout-row",t.optionClass=t.optionClass||"flex md-raised",t.$select(),t.$initWatches()},this.$select=function(e){var n=Math.floor(_.isNil(e)?t.ngModel:e),i=_.find(t.options,{value:n});return t.$$colorClass=i?i.colorClass:null,_.forEach(t.options,function(e){e.selected=e.value==n}),!0},this.$preview=function(e){_.isEqual(t.$$previewOpt,e)||(t.$$previewOpt=angular.copy(e))},this.$cancelPreview=function(){t.$$previewOpt=null},this.$updateModel=function(e){t.ngModel=e.value,t.$cancelPreview()},this.$initWatches=function(){e.$watchCollection(function(){return t.$$previewOpt},function(e,n){e?n&&e.value==n.value||t.$select(e.value):t.$select()})}}e.$inject=["$scope"],angular.module("chroma.components").component("chIconSelect",{transclude:!0,require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",options:"<",ngDisabled:"<?",contClass:"@?",optionClass:"@?"},controller:e,template:'<div class="ch-icon-select {{$ctrl.contClass}}"><md-button ng-repeat="option in $ctrl.options" class="ch-icon-select-option no-margin no-padding minimal-button text-wrap text-initial {{$ctrl.optionClass}}" ng-class="{\'md-hover-icon\': !option.selected}"ng-click="$ctrl.$updateModel(option)" aria-label="{{option.label || (option.labelKey|translate)}}" ng-disabled="$ctrl.ngDisabled"><div ng-if="option.iconClass" class="no-padding" layout layout-align="center center"><span><md-icon class="layout-padding material-icons {{option.iconClass}} {{option.colorClass}}"  ng-mouseover="$ctrl.$preview(option)" ng-mouseout="$ctrl.$cancelPreview()"></md-icon></span></div><div ng-if="option.label || option.labelKey" class="text-small no-padding row-1 md-icon-text {{option.colorClass}}"><span ng-if="option.label" ng-bind="option.label"></span><span ng-show="!option.label && option.labelKey"><span translate="{{option.labelkey}}"></span></span></div ></md-button></div>'})}(),function(){"use strict";angular.module("chroma.components").component("chReviewActionsContent",{transclude:!0,require:{chReviewActionsCtrl:"^chReviewActions"},controller:function(){var e=this;this.$onInit=function(){e.chReviewActionsCtrl.noDefault=!0},this.$onDestroy=function(){e.chReviewActionsCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function e(e,t){var n=this;this.$onInit=function(){n.hideUser=_.isBoolean(n.hideUser)?n.hideUser:n.chReviewCtrl.hideUser,n.hideLikes=_.isBoolean(n.hideLikes)?n.hideLikes:n.chReviewCtrl.hideLikes,n.$initReview()},this.$initReview=function(){n.chReviewCtrl.review&&(n.review=n.chReviewCtrl.review)},this.$userClick=function(e){n.userState?t.goToState(n.userState,n.userStateParams):n.userClick&&n.userClick({$event:e,review:n.review})},this.$likeClick=function(e){n.likeClick&&n.likeClick({$event:e,review:n.review})}}e.$inject=["$scope","Navigator"],angular.module("chroma.components").component("chReviewActions",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{hideUser:"<?",userState:"@?",userStateParams:"<?",userClick:"&?",hideLikes:"<?",likeLabel:"@?",unlikeLabel:"@?",likeClick:"&?"},controller:e,template:'<div flex><div ng-if="!$ctrl.noDefault && (!$ctrl.hideUser || !$ctrl.hideLikes)" class="bg-gray-lighter flex layout-row layout-wrap layout-padding"><div class="layout-row layout-padding-sm no-padding no-outline" ng-class="{\'clickable\': $ctrl.userState || $ctrl.userClick}" ng-click="$ctrl.$userClick($event)" aria-label="Toggle user action"><div><span ng-if="$ctrl.userAvatar && $ctrl.review.reviewSettings.showAvatar && !$ctrl.review.reviewSettings.anonymous"class="relative menu-user-avatar-small display-block overflow-hidden"><img alt="User profile image" class="full-width" ng-src="{{$ctrl.userAvatar}}" lazy-image /></span><span ng-if="(!$ctrl.review.reviewSettings.showAvatar || !$ctrl.userAvatar) && !$ctrl.review.reviewSettings.anonymous"class="bg-blue-sea menu-user-avatar-small layout-row layout-align-center-center"><span class="md-headline text-uppercase">{{!$ctrl.review.reviewSettings.showRealName && ($ctrl.review.createdBy || $ctrl.review.reservation.guest).nickname ? ($ctrl.review.createdBy || $ctrl.review.reservation.guest).nickname.charAt(0) : ($ctrl.review.createdBy || $ctrl.review.reservation.guest).name.charAt(0)}}</span></span><md-icon ng-if="$ctrl.review.reviewSettings.anonymous" class="mdi mdi-account-circle md-38"></md-icon></div><div class="layout-align-center-start layout-column no-padding-bottom no-padding-top row-1"><small class="font-10 text-gray-light row-1"><span translate="common.written.by.female"></span>:</small><strong class="md-subhead"><span ng-if="!$ctrl.review.reviewSettings.anonymous && ($ctrl.review.createdBy || $ctrl.review.reservation.guest)"><span ng-if="!$ctrl.review.reviewSettings.showRealName || !$ctrl.review.createdBy.nickname"><span ng-if="$ctrl.review.createdBy">{{::$ctrl.review.createdBy.name}}&nbsp;{{::$ctrl.review.createdBy.surname}}</span><span ng-if="!$ctrl.review.createdBy && $ctrl.review.reservation.guest">{{::$ctrl.review.reservation.guest.name}}&nbsp;{{::$ctrl.review.reservation.guest.surname}}</span></span><span ng-if="!$ctrl.review.reviewSettings.showRealName && $ctrl.review.createdBy.nickname"><span ng-if="$ctrl.review.createdBy">{{::$ctrl.review.createdBy.nickname}}</span><span ng-if="!$ctrl.review.createdBy && $ctrl.review.reservation.guest">{{::$ctrl.review.reservation.guest.nickname}}</span></span></span><span ng-if="$ctrl.review.reviewSettings.anonymous || (!$ctrl.review.createdBy && !$ctrl.review.reservation.guest)" translate="common.anonymous"></span></strong><small class="font-10 text-gray-light row-1 text-lowercase" ng-if="!$ctrl.review.reviewSettings.anonymous && $ctrl.review.guest.reviewsCount"><span>{{::$ctrl.review.guest.reviewsCount}}&nbsp;</span><span ng-if="$ctrl.review.guest.reviewsCount == 1" translate="reviews.review"></span><span ng-if="$ctrl.review.guest.reviewsCount != 1" translate="reviews.reviews"></span></small></div></div><div ng-if="!$ctrl.hideLikes" class="no-padding flex-gt-sm flex-xs-100 flex-sm-100 layout-row layout-align-center-center layout-align-gt-sm-end-center"><md-button class="auto-height md-primary md-raised no-margin" ng-click="$ctrl.$likeClick($event)" aria-label="Toggle like"><md-icon ng-show="!$ctrl.review.helpful" class="mdi md-18 mdi-thumb-up"></md-icon>&nbsp;<small ng-if="!$ctrl.review.helpful"><span ng-if="!$ctrl.likeLabel" translate="review.likes.button"></span><span ng-if="$ctrl.likeLabel" ng-bind="$ctrl.likeLabel"></span></small><small ng-if="$ctrl.review.helpful"><span ng-if="!$ctrl.unlikeLabel" translate="review.likes.button.undo"></span><span ng-if="$ctrl.unlikeLabel" ng-bind="$ctrl.unlikeLabel"></span></small></md-button></div></div><div flex ng-transclude></div><md-divider></<md-divider></div>'})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){t.dateFormat=t.dateFormat||t.chReviewCtrl.dateFormat,t.hideLikes=_.isBoolean(t.hideLikes)?t.hideLikes:t.chReviewCtrl.hideLikes,t.$initReview()},this.$initReview=function(){t.chReviewCtrl.review&&(t.review=t.chReviewCtrl.review,t.review.showDetails=!0)}}e.$inject=["$scope"],angular.module("chroma.components").component("chReviewContent",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{dateFormat:"@?",hideLikes:"<?"},controller:e,template:'<div><div class="layout-row layout-wrap layout-align-center-center layout-padding"><div class="layout-column flex-xs-100 flex-sm-100 flex-gt-sm"><div ng-show="!$ctrl.review.showDetails"><div class="md-margin ng-scope no-margin-top no-margin-x-sides"><small><span translate="review.score.total"></span>:</small><md-progress-linear md-mode="determinate" value="{{($ctrl.review.score * 10)}}"></md-progress-linear></div></div><div ng-show="$ctrl.review.showDetails"><div ng-repeat="feedback in $ctrl.review.feedbacks track by $index" class="md-margin ng-scope no-margin-top no-margin-x-sides"title="{{::feedback.value}}" ng-switch="feedback.type"><small class="layout-row flex-100"><span class="flex" translate="{{::feedback.titleKey}}" translate-values="{{feedback.titleParams}}"></span><span ng-if="feedback.type == \'RANK\'">{{::feedback.value}}</span></small><md-progress-linear ng-switch-when="RANK" md-mode="determinate" value="{{(feedback.value * 10)}}"></md-progress-linear><div ng-switch-default><small ng-if="feedback.value">{{feedback.value}}</small><small ng-if="!feedback.value" class="text-gray-light text-lowercase"><em>({{::(\'review.comment.none\'|translate)}})</em></small></div></div></div><div class="text-right"><md-button class="auto-height no-margin row-1 text-capitalize text-gray-light text-small" ng-click="$ctrl.review.showDetails = !$ctrl.review.showDetails" aria-label="show details"><span ng-if="!$ctrl.review.showDetails" translate="common.show"></span><span ng-if="$ctrl.review.showDetails" translate="common.hide"></span>&nbsp;<span class="text-lowercase" translate="common.details"></span><md-icon ng-class="$ctrl.review.showDetails ? \'mdi-chevron-up\' : \'mdi-chevron-down\'" class="mdi md-18"></md-icon></md-button></div></div><div class="flex-100 flex-gt-sm-20 layout-column" ng-class="$ctrl.review.showDetails ? \'layout-align-center-center\' : \'layout-align-start-center\'"><small ng-if="$ctrl.review.showDetails" class="font-12 text-gray-light text-center" translate="review.score.total"></small><span class="md-headline">{{::$ctrl.review.score.toFixed(1)}}</span><span class="text-center" translate="{{$ctrl.review.label}}"></span></div></div><div ng-transclude></div><div ng-if="$ctrl.review.createdDate" class="layout-padding"><small class="text-gray-light">{{$ctrl.review.createdDate|utcDate:$ctrl.dateFormat}}</small></div><md-divider></<md-divider><div ng-if="!$ctrl.hideLikes && $ctrl.review.likes.length" class="bg-gray-lighter"><div class="layout-padding"><small class="text-primary"><md-icon class="mdi md-14 mdi-thumb-up text-primary"></md-icon>&nbsp;<span ng-if="!$ctrl.review.helpful" class="text-lowercase"><span>{{$ctrl.review.likes.length}}&nbsp;</span><span ng-if="$ctrl.review.likes.length == 1" translate="review.likes.count"></span><span ng-if="$ctrl.review.likes.length != 1" translate="review.likes.count.plur"></span></span><span ng-if="$ctrl.review.helpful"><span ng-if="$ctrl.review.likes.length == 1" translate="review.likes.you"></span><span ng-if="$ctrl.review.likes.length != 1" translate="review.likes.you.other" translate-values="{num: $ctrl.review.likes.length}"></span></span></small></div><md-divider></<md-divider></div></div>'})}(),function(){"use strict";function e(e,t,n){var i=this;this.$onInit=function(){i.imgBaseUrl=i.imgBaseUrl||i.chReviewCtrl.imgBaseUrl,_.isBoolean(i.imgBaseUrl)&&(i.imgBaseUrl=i.imgBaseUrl&&e.config&&e.config.amz?e.config.amz.baseUrl+"/"+e.config.amz.bucketName+"/":""),i.defaultImgUrl=i.defaultImgUrl||"/resources/public/img/no-gallery-image.png",i.$initReview()},this.$initReview=function(){i.chReviewCtrl.review&&(i.review=i.chReviewCtrl.review)},this.$openGallery=function(e,o){t(i.review.label).then(function(t){var a=i.review.score+":&nbsp;";a+=i.review.title?i.review.title:t,n.showGallery(e,a,i.review.gallery,{storageUrl:i.imgBaseUrl,initialSlide:o||0})})}}e.$inject=["AppOptions","$translate","Dialog"],angular.module("chroma.components").component("chReviewGallery",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{imgBaseUrl:"@?",defaultImgUrl:"@?",title:"@"},controller:e,template:'<div ng-if="$ctrl.review.gallery.length" flex layout-padding><div class="layout-row layout-wrap layout-padding-sm layout-align-center-center layout-align-gt-sm-start-center"><span class="flex-100 font-12 ng-scope no-padding-bottom text-gray-light"><span ng-if="!$ctrl.title"><span translate="common.gallery"></span>:</span><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></span></span><div ng-repeat="photo in $ctrl.review.gallery" class="clickable" ng-click="$ctrl.$openGallery($event, $index)" aria-label="Open review gallery"><img ng-src="{{$ctrl.imgBaseUrl + photo.path}}" alt="{{photo.tags[0]}}" lazy-imagedefault-img-url="{{$ctrl.defaultImgUrl}}" class="width-100"></div></div></div>'})}(),function(){"use strict";function e(e,t){var n=this;this.$onInit=function(){n.hideImage=!!_.isBoolean(n.hideImage)&&n.hideImage,n.imgBaseUrl=n.imgBaseUrl||n.chReviewCtrl.imgBaseUrl,_.isBoolean(n.imgBaseUrl)&&(n.imgBaseUrl=n.imgBaseUrl&&t.config&&t.config.amz?t.config.amz.baseUrl+"/"+t.config.amz.bucketName+"/":""),n.$initReview(),n.$getHotelImage()},this.$initReview=function(){n.chReviewCtrl.review&&(n.review=n.chReviewCtrl.review)},this.$getHotelImage=function(){var e=null;_.forEach(n.review.hotel.gallery,function(t,i,o){if(0==i&&(e=n.imgBaseUrl+t.path),t.cover)return e=n.imgBaseUrl+t.path,!1}),n.$$hotelImage=e}}e.$inject=["$scope","AppOptions"],angular.module("chroma.components").component("chReviewHotelInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{hideImage:"<?",imgBaseUrl:"@?"},controller:e,template:'<div flex layout-padding class="md-subhead row-mini text-bold"><a ng-href="{{\'/hotel/\'+ $ctrl.review.hotel.id}}" target="_blank" class="display-block clickable"><span class="layout-row layout-align-start-center"><img ng-if="!$ctrl.hideImage && $ctrl.$$hotelImage" class="md-margin menu-user-avatar-small no-margin-left no-margin-y-sides" ng-src="{{$ctrl.$$hotelImage}}"><span class="no-padding layout-column"><span><span class="text-primary">{{::$ctrl.review.hotel.name}}&nbsp;</span><span class="label label-xs" translate="hotel.type.{{::$ctrl.review.hotel.type}}"></span></span><small class="text-gray-light"><span>{{::$ctrl.review.hotel.addressInfo.city}}</span>,&nbsp;<span>{{::$ctrl.review.hotel.addressInfo.address}}</span></small></span></span></a></div>'})}(),function(){"use strict";angular.module("chroma.components").component("chReviewProCon",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{textLimit:"<?"},controller:function(){var e=this;this.$onInit=function(){e.textLimit=isFinite(parseInt(e.textLimit))?parseInt(e.textLimit):200,e.$initReview()},this.$initReview=function(){e.chReviewCtrl.review&&(e.review=e.chReviewCtrl.review)}},template:'<div ng-if="$ctrl.review.pro || $ctrl.review.con" flex layout-padding><div ng-if="$ctrl.review.pro" class="md-padding no-padding-top"><md-icon class="mdi mdi-thumb-up-outline text-success md-24"></md-icon>&nbsp;<strong><span translate="review.pro"></span>:</strong><div class="layout-margin no-margin-x-sides text-ellipsis"><span hm-read-more hm-text="{{$ctrl.review.pro}}" hm-limit="$ctrl.textLimit"hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}"hm-link-class="clickable text-primary"></span></div></div><div ng-if="$ctrl.review.con" class="md-padding no-padding-top"><md-icon class="mdi mdi-thumb-down-outline text-warn md-24"></md-icon>&nbsp;<strong><span translate="review.con"></span>:</strong><div class="layout-margin no-margin-x-sides text-ellipsis"><span hm-read-more hm-text="{{$ctrl.review.con}}" hm-limit="$ctrl.textLimit"hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}"hm-link-class="clickable text-primary"></span></div></div></div>'})}(),function(){"use strict";angular.module("chroma.components").component("chReviewReplyContent",{transclude:!0,require:{chReviewReplyCtrl:"^chReviewReply"},controller:function(){var e=this;this.$onInit=function(){e.chReviewReplyCtrl.noDefault=!0},this.$onDestroy=function(){e.chReviewReplyCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){t.ngReadonly=!_.isBoolean(t.ngReadonly)||t.ngReadonly,t.ngReadonly&&(t.$$currentMode="view"),t.ngEdit=!!_.isBoolean(t.ngEdit)&&t.ngEdit,t.responseClass=t.responseClass||"bg-info-light",t.arrowClass=t.arrowClass||"border-info-light",t.$initReview()},this.$initReview=function(){t.chReviewCtrl.review&&(t.review=t.chReviewCtrl.review,t.ngReadonly||t.review.reply&&t.review.reply.response||(t.$$currentMode="edit"))},this.$editReply=function(e){t.ngReadonly?t.$cancelReplyEdit(e):(t.$$reply=angular.copy(t.review.reply.response),t.$$currentMode="edit")},this.$cancelReplyEdit=function(e){t.$$reply=null,t.$$currentMode="view"},this.$sendReply=function(e){t.review.reply.response=angular.copy(t.$$reply),t.onReply&&t.onReply({$event:e,reply:t.review.reply.response}),t.$cancelReplyEdit(e)}}e.$inject=["$scope"],angular.module("chroma.components").component("chReviewReply",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{ngReadonly:"<?",ngEdit:"<?",title:"@",onReply:"&?",responseClass:"@?",arrowClass:"@?"},controller:e,template:'<div ng-show="!$ctrl.ngReadonly || $ctrl.review.reply.response || $ctrl.noDefault" class="ch-review-reply"><div class="ch-review-reply-arrow {{$ctrl.arrowClass}}"></div><div class="layout-padding no-padding ch-review-reply-inner {{$ctrl.responseClass}}"><div ng-if="!$ctrl.noDefault" class="layout-padding-sm"><div><strong><span ng-if="!$ctrl.title"><span translate="common.answer"></span>:</span><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></strong></div><div ng-if="$ctrl.$$currentMode == \'view\'"><div class="text-ellipsis text-wrap"><span hm-read-more hm-text="{{$ctrl.review.reply.response}}" hm-limit="200" hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}" hm-link-class="clickable text-primary"></span></div><div ng-if="!$ctrl.ngReadonly"><md-button ng-if="$ctrl.ngEdit" class="minimal-button no-margin-x-sides auto-height row-1 text-initial" ng-click="$ctrl.$editReply($event)" aria-label="Edit reply"><small translate="common.edit"></small></md-button></div></div><div ng-if="$ctrl.$$currentMode == \'edit\'" layout layout-padding-sm><div flex><md-input-container md-no-float class="md-block bg-white minimal-input no-margin"><textarea placeholder="{{\'review.reply.label\'|translate}}..." ng-model="$ctrl.$$reply" max-rows="5" md-no-resize></textarea></md-input-container></div><div layout layout-align="center end" class="no-padding"><md-button class="md-icon-button md-raised" ng-disabled="!$ctrl.$$reply" ng-click="$ctrl.$sendReply($event)" aria-label="Send reply"><md-icon class="mdi mdi-send md-24"></md-icon></md-button></div></div></div><div ng-transclude class="no-padding"></div></div></div>'})}(),function(){"use strict";angular.module("chroma.components").component("chReviewReportInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},controller:function(){var e=this;this.$onInit=function(){e.$initReview()},this.$initReview=function(){e.chReviewCtrl.review&&(e.review=e.chReviewCtrl.review)}},template:'<div flex layout-padding ng-if="$ctrl.review.reportType"><div class="no-padding-bottom no-padding-right"><md-icon class="mdi md-18 mdi-flag-variant text-danger"></md-icon><span translate="review.reporting.label"></span></div></div>'})}(),function(){"use strict";function e(e,t,n){var i=this;this.appOptions=e,this.portalIcons=t.portalIcons(),this.$onInit=function(){i.textLimit=isFinite(parseInt(i.textLimit))?parseInt(i.textLimit):200,i.$initReview()},this.$initReview=function(){i.chReviewCtrl.review&&(i.review=i.chReviewCtrl.review,i.$getPeriod())},this.$getPeriod=function(){var e=n.absoluteMoment(i.review.reservation.checkin),t=n.absoluteMoment(i.review.reservation.checkout);e.get("month")==t.get("month")?i.$$period=e.format("MMMM YYYY"):i.$$period=e.format("MMMM YYYY")+"/"+t.format("MMMM YYYY")}}e.$inject=["AppOptions","IconUtils","DateUtils"],angular.module("chroma.components").component("chReviewReservationInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{title:"@"},controller:e,template:'<div layout-padding><div class="no-padding-bottom no-padding-right"><div><small><span ng-if="!$ctrl.title"><span translate="review.source"></span>&nbsp;</span><span ng-if="$ctrl.title"><span ng-bind="$ctrl.title"></span>&nbsp;</span><strong ng-switch="$ctrl.review.reservation.source"><span ng-switch-when="PORTAL">{{$ctrl.appOptions.about.uiName}}</span><span ng-switch-default translate="channel.source.{{$ctrl.review.reservation.source.toLowerCase()}}"></span></strong></small><span><md-icon class="{{$ctrl.portalIcons[$ctrl.review.reservation.source]}} channel-icon-mini"></md-icon></span></div><div ng-if="$ctrl.$$period"><small ng-bind="$ctrl.$$period"></small></div></div></div>'})}(),function(){"use strict";angular.module("chroma.components").component("chReviewTitleContent",{transclude:!0,require:{chReviewTitleCtrl:"^chReviewTitle"},controller:function(){var e=this;this.$onInit=function(){e.chReviewTitleCtrl.noDefault=!0},this.$onDestroy=function(){e.chReviewTitleCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function e(e,t,n){e.$mdMedia=n;var i=this;this.$onInit=function(){i.titleQuote=!_.isBoolean(i.titleQuote)||i.titleQuote,i.hideNewIcon=!!_.isBoolean(i.hideNewIcon)&&i.hideNewIcon,i.$initReview()},this.$initReview=function(){i.chReviewCtrl.review&&(i.review=i.chReviewCtrl.review)}}e.$inject=["$scope","ReviewsUtils","$mdMedia"],angular.module("chroma.components").component("chReviewTitle",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{titleQuote:"@?",hideNewIcon:"<?"},controller:e,template:'<div flex><div ng-if="!$ctrl.noDefault" class="flex layout-padding"><div class="md-subhead flex ellipsis text-wrap"><span ng-if="!$ctrl.hideNewIcon && $ctrl.review.isNew"><md-icon class="material-icons mdi mdi-new-box text-info"></md-icon>&nbsp;</span><strong><em ng-if="$ctrl.review.title"><span ng-if="$ctrl.titleQuote">&ldquo;</span><span ng-bind="$ctrl.review.title"></span><span ng-if="$ctrl.titleQuote">&bdquo;</span></em><span ng-if="!$ctrl.review.title"><span translate="{{$ctrl.review.label}}"></span></span></strong></div></div><div ng-transclude></div></div>'})}(),function(){"use strict";function e(e,t,n){var i=this;this.$onInit=function(){i.newLimit=_.isFinite(parseInt(i.newLimit))?parseInt(i.newLimit):7,i.hideUser=!!_.isBoolean(i.hideUser)&&i.hideUser,i.hideLikes=!!_.isBoolean(i.hideLikes)&&i.hideLikes,i.imgBaseUrl=i.imgBaseUrl||!0,_.isBoolean(i.imgBaseUrl)&&(i.imgBaseUrl=i.imgBaseUrl&&n.config&&n.config.amz?n.config.amz.baseUrl+"/"+n.config.amz.bucketName+"/":""),i.$initReview()},this.$initReview=function(){i.review&&(i.review.isNew=moment().isBefore(moment(i.review.createdDate).add(i.newLimit,"days")),i.review.label=t.generateScoreLabel(Math.floor(i.review.score)),i.$getUserAvatar(),i.$initLikes(),i.$initWatches())},this.$initLikes=function(){i.review.helpful=n.guest&&n.guest.id&&_.some(i.review.likes,function(e){return _.isEqual(e,n.guest.id)})},this.$getUserAvatar=function(){var e=n.config.amz.baseUrl+"/"+n.config.amz.bucketName+"/";if(i.review.createdBy&&i.review.createdBy.avatarType)switch(i.review.createdBy.avatarType){case"PORTAL":i.userAvatar=i.review.createdBy.avatar?e+i.review.createdBy.avatar:null;break;case"FACEBOOK":i.userAvatar=i.review.createdBy.facebookImage;break;case"GOOGLE":i.userAvatar=i.review.createdBy.googleImage;break;default:i.userAvatar=i.review.createdBy.avatar?e+i.review.createdBy.avatar:null}i.review.reviewSettings=_.isObjectLike(i.review.reviewSettings)?i.review.reviewSettings:{},i.review.reviewSettings.showRealName=!_.isBoolean(i.review.reviewSettings.showRealName)||i.review.reviewSettings.showRealName},this.$initWatches=function(){e.$watchCollection(function(){return i.review.likes},function(e,t){i.$initLikes(),i.review.thanksNow=!_.isEqual(e,t)&&Boolean(i.review.helpful)})}}e.$inject=["$scope","ReviewsUtils","AppOptions"],angular.module("chroma.components").component("chReview",{transclude:!0,bindings:{review:"<",newLimit:"@?",dateFormat:"@?",hideUser:"<?",hideLikes:"<?",imgBaseUrl:"@?"},controller:e,template:"<div ng-transclude></div>"})}(),function(){"use strict";angular.module("chroma.components").component("chReviewsSummaryDetails",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{progressClass:"@?",size:"@?"},controller:function(){var e=this;this.$onInit=function(){e.progressClass=e.progressClass||"md-primary",e.size=_.includes(["small","big"],_.toLower(e.size))?_.toLower(e.size):"small",e.$initSummary()},this.$initSummary=function(){e.chReviewsSummaryCtrl.summary&&(e.summary=e.chReviewsSummaryCtrl.summary)},this.$onDestroy=function(){}},template:'<div class="flex layout-column layout-padding-sm"><ch-reviews-summary-progress ng-repeat="entry in $ctrl.summary.reviewsScoreMap track by $index" value="entry.key" count="entry.value" size="{{$ctrl.size}}" progress-class="{{$ctrl.progressClass}}"></ch-review-summary-progress></div>'})}(),function(){"use strict";angular.module("chroma.components").component("chReviewsSummaryGar",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{title:"@?",subtitle:"@?",bgClass:"@?"},controller:function(){var e=this;this.$onInit=function(){e.bgClass=e.bgClass||"bg-primary",e.$$hideTitle=_.isBoolean(e.title)&&!e.title,e.$$hideSubtitle=_.isBoolean(e.subtitle)&&!e.subtitle,e.$initSummary()},this.$initSummary=function(){e.chReviewsSummaryCtrl.summary&&(e.summary=e.chReviewsSummaryCtrl.summary)},this.$onDestroy=function(){}},template:'<div ng-if="$ctrl.summary.gar" class="layout-column layout-padding layout-align-center-center no-padding"><div class="border-radius layout-column layout-align-center-center layout-padding {{$ctrl.bgClass}}"><strong class="md-subhead" translate="{{$ctrl.summary.garLabel}}"></strong><span class="md-display-3 no-padding-top">{{$ctrl.summary.gar.toFixed(1)}}</span><small ng-if="!$ctrl.$$hideTitle" class="no-padding-bottom"><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></span><span ng-if="!$ctrl.subtitle" translate="review.score.total"><span></small></div><div ng-if="!$ctrl.$$hideSubtitle"><small><span ng-if="$ctrl.subtitle" ng-bind="$ctrl.subtitle"></span><span ng-if="!$ctrl.subtitle" translate="review.reviews.real" translate-values="{num: $ctrl.summary.totalReviews}"></span></small></div></div>'})}(),function(){"use strict";function e(e,t){var n=this;this.$mdMedia=t,this.$onInit=function(){n.progressClass=n.progressClass||"md-primary",n.size=_.includes(["small","big"],_.toLower(n.size))?_.toLower(n.size):"small","big"==n.size&&(n.$$sizeClass="md-progress-linear-big"),n.$initSummary(),n.$initWatches()},this.$initSummary=function(){n.chReviewsSummaryCtrl.summary&&(n.summary=n.chReviewsSummaryCtrl.summary)},this.$initWatches=function(){e.$watch(function(){return n.count},n.$calculatePercentage)},this.$calculatePercentage=function(){n.$$percentage=Math.round(100*(n.count||0)/(n.summary.totalReviews||1))},this.$onDestroy=function(){}}e.$inject=["$scope","$mdMedia"],angular.module("chroma.components").component("chReviewsSummaryProgress",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{value:"<",count:"<",progressClass:"@?",size:"@?"},controller:e,template:'<div title="{{$ctrl.$$percentage + \'%\'}}" ng-class="$ctrl.$mdMedia(\'gt-sm\')? \'no-padding-bottom\' : \'no-padding-left no-padding-right\'"><small><span ng-switch="$ctrl.value"><span ng-switch-when="4"><span translate="review.score.bad"></span>&nbsp;<em>(4)</em>:</span><span ng-switch-when="5"><span translate="review.score.poor"></span>&nbsp;<em>(5)</em>:</span><span ng-switch-when="6"><span translate="review.score.sufficient"></span>&nbsp;<em>(6)</em>:</span><span ng-switch-when="7"><span translate="review.score.good"></span>&nbsp;<em>(7)</em>:</span><span ng-switch-when="8"><span translate="review.score.very.good"></span>&nbsp;<em>(8)</em>:</span><span ng-switch-when="9"><span translate="review.score.excellent"></span>&nbsp;<em>(9)</em>:</span><span ng-switch-when="10"><span translate="review.score.fabulous"></span>&nbsp;<em>(10)</em>:</span></span></small><div class="layout-row layout-align-start-center"><div flex><md-progress-linear md-mode="determinate" value="{{$ctrl.$$percentage}}" class="{{$ctrl.$$sizeClass}}" ng-class="$ctrl.count > 0 ? $ctrl.progressClass : \'md-accent\'"></md-progress-linear></div><div class="text-right" style="width: 55px"><small>&nbsp;{{$ctrl.$$percentage + \'%\'}}&nbsp;({{$ctrl.count}})</small></div></div></div>'})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){t.$initSummary()},this.$initSummary=function(){if(!t.summary){var n=[];_.forEach(_.rangeRight(4,11),function(e){n.push({key:e,value:0})}),t.summary={totalReviews:0,gar:null,reviewsScoreMap:n}}t.summary.garLabel=e.generateScoreLabel(Math.floor(t.summary.gar))},this.$onDestroy=function(){}}e.$inject=["ReviewsUtils"],angular.module("chroma.components").component("chReviewsSummary",{transclude:!0,bindings:{summary:"<"},controller:e,template:"<div ng-transclude></div>"})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){t.services=_.isArray(t.services)?t.services:t.chRoomCtrl.popularServices}}e.$inject=["$scope"],angular.module("chroma.components").component("chRoomBestServices",{require:{chRoomCtrl:"^chRoom"},bindings:{services:"<?"},controller:e,template:'<div layout layout-wrap layout-align="end start" ng-if="$ctrl.services.length"><span ng-repeat="service in $ctrl.services track by $index"><span><md-icon class="{{service.icon}} layout-padding no-padding-top" ng-class="{\'text-white\': $ctrl.chRoomCtrl.room.gallery.length}"></md-icon><md-tooltip ng-if="service.label || service.labelKey"><span ng-if="service.label" ng-bind="service.label"></span><span ng-if="!service.label" translate="{{service.labelKey}}"></span></md-tooltip></span></span></div>'})}(),function(){"use strict";function e(e){this.$onInit=function(){}}e.$inject=["$scope"],angular.module("chroma.components").component("chRoomContent",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:e,template:"<ng-transclude></ng-transclude>",transclude:!0})}(),function(){"use strict";function e(e,t,n,i,o){var a=this;this.$onInit=function(){a.chRoomCtrl.storageUrl||t.get().then(function(e){a.chRoomCtrl.storageUrl=e.url}),n([a.chRoomCtrl.room.roomType.nameKey,"room.category."+a.chRoomCtrl.room.category]).then(function(e){a.title=e[a.chRoomCtrl.room.roomType.nameKey]+" <small>("+e["room.category."+a.chRoomCtrl.room.category].toUpperCase()+")</small>"})},this.openGallery=function(e){n([a.chRoomCtrl.room.roomType.nameKey,"room.category."+a.chRoomCtrl.room.category]).then(function(t){var n=t[a.chRoomCtrl.room.roomType.nameKey]+" <small>("+t["room.category."+a.chRoomCtrl.room.category].toUpperCase()+")</small>";i.showGallery(e,n,_.sortBy(a.chRoomCtrl.room.gallery,[function(e){return Boolean(e.cover)}]),{storageUrl:a.chRoomCtrl.storageUrl})})}}e.$inject=["$scope","AboutStorage","$translate","Dialog","NumberUtils"],angular.module("chroma.components").component("chRoomGallery",{require:{chRoomCtrl:"^chRoom",chRoomHeaderCtrl:"^chRoomHeader"},bindings:{cols:"@",rowspan:"@?",ratio:"@?",maxItems:"<?"},controller:e,template:'<ch-gallery gallery="$ctrl.chRoomCtrl.room.gallery" gallery-title="{{$ctrl.title}}" storage-url="$ctrl.chRoomCtrl.storageUrl" cols="{{$ctrl.cols}}" rowspan="{{$ctrl.rowspan}}" ratio="{{$ctrl.ratio}}" max-items="$ctrl.maxItems"></ch-gallery>'})}(),function(){"use strict";function e(e,t,n){var i=this;this.$mdMedia=t,this.$onInit=function(){i.chRoomCtrl.showRoomRates=!1,i.chRoomCtrl.showRoomInfo=!1},this.toggleInfo=function(){i.chRoomCtrl.showRoomInfo=!i.chRoomCtrl.showRoomInfo,i.chRoomCtrl.showRoomRates=!1,i.chRoomCtrl.showRoomInfo||n.scrollToAnchor("av-"+i.chRoomCtrl.$$index)},this.toggleRates=function(){i.chRoomCtrl.showRoomRates=!i.chRoomCtrl.showRoomRates,i.chRoomCtrl.showRoomInfo=!1,i.chRoomCtrl.showRoomRates?n.scrollToAnchor("av-"+i.chRoomCtrl.$$index+"-rates"):n.scrollToAnchor("av-"+i.chRoomCtrl.$$index)}}e.$inject=["$scope","$mdMedia","Navigator"],angular.module("chroma.components").component("chRoomHeader",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:e,template:'<div class="ch-room-header-content layout-column"><ng-transclude></ng-transclude><div ng-if="$ctrl.chRoomCtrl.showInfoBtn" class="img-bottom-left-bar layout-row layout-wrap layout-align-center-center"><md-button ng-class="{\'md-icon-button\' : $ctrl.$mdMedia(\'xs\')}" ng-click="$ctrl.toggleInfo()" aria-label="Open room information"><div class="row-mini"><md-icon class="mdi mdi-information-outline md-18 text-white"></md-icon><small class="hide-xs hide-sm" translate="common.information"></small></div></md-button></div><div ng-if="$ctrl.chRoomCtrl.showRateBtn" ng-class="::{\'img-right-bar\': $ctrl.$mdMedia(\'gt-xs\'), \'img-bottom-right-bar\': $ctrl.$mdMedia(\'xs\')}" class="layout-row layout-align-center-center"><md-button ng-click="$ctrl.toggleRates()" aria-label="Open room prices"><div layout class="row-mini text-left layout-padding no-padding"><div layout="column"><small><span class="text-initial" translate="common.from"></span><i ng-if="$ctrl.chRoomCtrl.bestRate.amount.initialAmount > 0 && $ctrl.chRoomCtrl.bestRate.amount.initialAmount > $ctrl.chRoomCtrl.bestRate.amount.finalAmount">&nbsp;<del>{{$ctrl.chRoomCtrl.bestRate.amount.initialAmount|chCurrency}}</del></i></small><span class="md-title"><strong>{{$ctrl.chRoomCtrl.bestRate.amount.finalAmount|chCurrency}}</strong></span><small ng-if="$ctrl.chRoomCtrl.nights > 0" class="text-lowercase"><span translate="common.for"></span>&nbsp;{{$ctrl.chRoomCtrl.nights}}<span ng-show="$ctrl.chRoomCtrl.nights == 1" translate="common.night"></span><span ng-show="$ctrl.chRoomCtrl.nights > 1" translate="common.nights"></span></small></div><div layout="column"><md-icon class="mdi md-48 text-white" ng-class="$ctrl.chRoomCtrl.showRoomRates ? \'mdi-chevron-up\' : \'mdi-chevron-down animated infinite bounce\'"></md-icon></div><md-tooltip hide-xs><span ng-if="!$ctrl.chRoomCtrl.showRoomRates" translate="ratesheet.rates.all.view"></span><span ng-if="$ctrl.chRoomCtrl.showRoomRates" translate="ratesheet.rates.hide"></span></md-tooltip></div></md-button></div></div>',transclude:!0})}(),function(){"use strict";function e(e,t,n,i){var o=this;this.$onInit=function(){o.chRoomCtrl.config=o.chRoomCtrl.config||{},o.chRoomCtrl.storageUrl?o.getRoomCover():t.get().then(function(e){o.chRoomCtrl.storageUrl=e.url,o.getRoomCover()})},this.getRoomCover=function(){o.$findRoomCover()},this.openGallery=function(e){n([o.chRoomCtrl.room.roomType.nameKey,"room.category."+o.chRoomCtrl.room.category]).then(function(t){var n=t[o.chRoomCtrl.room.roomType.nameKey]+" <small>("+t["room.category."+o.chRoomCtrl.room.category].toUpperCase()+")</small>";i.showGallery(e,n,_.sortBy(o.chRoomCtrl.room.gallery,[function(e){return Boolean(e.cover)}]),{storageUrl:o.chRoomCtrl.storageUrl})})},this.$findRoomCover=function(){var e="/resources/public/img/no-gallery-image.png";_.forEach(o.chRoomCtrl.room.gallery,function(t,n,i){0==n&&(e=o.chRoomCtrl.storageUrl+t.path),t.cover&&(e=o.chRoomCtrl.storageUrl+t.path)}),o.roomImage=e}}e.$inject=["$scope","AboutStorage","$translate","Dialog"],angular.module("chroma.components").component("chRoomImage",{require:{chRoomCtrl:"^chRoom",chRoomHeaderCtrl:"^chRoomHeader"},bindings:{},controller:e,template:'<div class="flex layout-column layout-align-center-center"><img ng-src="{{$ctrl.roomImage}}" class="full-width display-block img-size" ng-class="{\'clickable\': $ctrl.chRoomCtrl.room.gallery.length}" ng-click="$ctrl.openGallery($event)" alt="Room cover image" lazy-image default-img-url="\'/resources/public/img/no-gallery-image.png\'"><md-tooltip ng-if="$ctrl.chRoomCtrl.room.gallery.length"><span translate="photo.photos.view.all"></span></md-tooltip></div>'})}(),function(){"use strict";function e(e,t){var n=this;this.$onInit=function(){n.chRoomCtrl.showInfoBtn=!0,n.getIncludedServices(),n.getBookableServices(),n.getPopularServices()},this.getPopularServices=function(){var e=!1;n.chRoomCtrl.popularServices=[],_.forEach(n.includedServices,function(t){var i={};"service.type.popular.wifi.room"==t.type.nameKey?(i.type="WIFI",i.icon="mdi mdi-wifi md-24"):"service.type.popular.pet.small"==t.type.nameKey||"service.type.popular.pet.medium"==t.type.nameKey||"service.type.popular.pet.large"==t.type.nameKey||"service.type.popular.pet.disabled"==t.type.nameKey?(i.type="PET",i.icon="mdi mdi-paw md-24"):"service.type.popular.breakfast"==t.type.nameKey||"service.type.popular.breakfast.room"==t.type.nameKey||"service.type.popular.breakfast.continental"==t.type.nameKey?(i.type="BREAKFAST",i.icon="mdi mdi-food-variant md-24"):"service.type.popular.smoking.room"==t.type.nameKey&&(i.type="SMOKING",i.icon="mdi mdi-smoking md-24",e=!0),i.labelKey="service.type.inroom."+i.type,n.chRoomCtrl.popularServices.push(i)}),e||n.chRoomCtrl.popularServices.push({type:"NO-SMOKING",icon:"mdi mdi-smoking-off md-24",labelKey:"service.type.inroom.NO-SMOKING"})},this.getIncludedServices=function(){n.includedServices=_.filter(n.chRoomCtrl.room.services,["bookability","INCLUDED"])},this.getBookableServices=function(){n.bookableServices=_.filter(n.chRoomCtrl.room.services,["bookability","BOOKABLE"])},this.toggleInfo=function(){n.chRoomCtrl.showRoomInfo=!n.chRoomCtrl.showRoomInfo,n.chRoomCtrl.showRoomRates=!1,n.chRoomCtrl.showRoomInfo||t.scrollToAnchor("av-"+n.chRoomCtrl.$$index)}}e.$inject=["$scope","Navigator"],angular.module("chroma.components").component("chRoomInfo",{require:{chRoomCtrl:"^chRoom"},bindings:{availability:"<"},controller:e,transclude:!0,template:'<div ng-show="$ctrl.chRoomCtrl.showRoomInfo" ng-class="{\'animated fadeIn\': $ctrl.chRoomCtrl.showRoomInfo}"><ng-transclude></ng-transclude><div class="text-center"><md-button class="row-mini button-mini auto-height text-gray-light text-initial" ng-click="$ctrl.toggleInfo()" aria-label="close"><md-icon class="mdi mdi-chevron-up text-gray-light md-18 material-icon"></md-icon><span translate="common.hide"></span></md-button></div></div>'})}(),function(){"use strict";function e(e){this.$onInit=function(){}}e.$inject=["$scope"],angular.module("chroma.components").component("chRoomPromo",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:e,template:'<div class="layout-column layout-margin-sm no-margin-left"><div ng-if="$ctrl.chRoomCtrl.onArrival" class="no-margin-left"><div class="layout-column layout-padding no-padding row-mini bg-success md-subhead"><strong><md-icon class="mdi mdi-thumb-up md-18 text-white"></md-icon><span translate="reservation.pay.at.hotel"></span></strong></div></div><div ng-if="$ctrl.chRoomCtrl.bestPromo" class="no-margin-left"><div class="layout-column layout-padding no-padding row-mini md-subhead" ng-class="{\'bg-success\': $ctrl.chRoomCtrl.bestPromo.onArrival || $ctrl.chRoomCtrl.bestPromo.promotionType == \'EARLY_BOOKING\', \'bg-info\' : !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'STANDARD\',  \'bg-primary-light\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'MINIMUM_STAY\', \'bg-primary\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'BOOK_TODAY\', \'bg-blue-sea\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'LAST_MINUTE\', \'bg-warn\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'LAST_SECOND\'}"> <strong ng-if="!$ctrl.chRoomCtrl.bestPromo.onArrival" ng-switch="$ctrl.chRoomCtrl.bestPromo.promotionType"> <md-icon class="mdi mdi-sale md-10 text-white"></md-icon> <span ng-switch-when="STANDARD"><span translate="common.offer.special"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="MINIMUM_STAY"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{$ctrl.chRoomCtrl.bestPromo.minStay}}"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="BOOK_TODAY"><span translate="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="EARLY_BOOKING"><span translate="promotions.early"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_MINUTE"><span translate="promotions.last.minute"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_SECOND"><span translate="promotions.last.second"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span></strong></div></div></div>',transclude:!0})}(),function(){"use strict";function e(e,t,n){var i=this;this.$onInit=function(){i.chRoomCtrl.showRateBtn=!0,i.getLowestRate(),i.isOnArrival(),i.bestPromotion(),i.hasFreeBeds()},this.hasFreeBeds=function(){_.isEmpty(i.availability.roomType.otherBeds)||(i.availability.hasFreeBeds=_.some(i.availability.roomType.otherBeds,function(e){return e.people.adults?e.adultsPrice<=0:e.people.boys?e.boysPrice<=0:e.people.children?e.childrenPrice<=0:!!e.people.kids&&e.kidsPrice<=0}))},this.bestPromotion=function(){var e=[];_.forEach(i.availability.totalRates,function(t){_.isEmpty(t.promotions)||(e=_.concat(e,t.promotions))}),i.chRoomCtrl.bestPromo=t.bestPromotion(e)},this.getLowestRate=function(){i.chRoomCtrl.bestRate=_.minBy(i.availability.totalRates,function(e){return e.amount.finalAmount})},this.isOnArrival=function(){i.chRoomCtrl.onArrival=i.availability.onArrival}}e.$inject=["$scope","ReservationUtils","DateUtils"],angular.module("chroma.components").component("chRoomRates",{require:{chRoomCtrl:"^chRoom"},bindings:{availability:"="},controller:e,template:'<div id="{{$ctrl.chRoomCtrl.$$index + \'-rates\'}}" ng-show="$ctrl.chRoomCtrl.showRoomRates"  ng-class="{\'animated fadeIn\': $ctrl.chRoomCtrl.showRoomRates}" ng-transclude></div>',transclude:!0})}(),function(){"use strict";function e(e,t){var n=this;this.toggleRates=function(){n.chRoomCtrl.showRoomRates=!n.chRoomCtrl.showRoomRates,n.chRoomCtrl.showRoomInfo=!1,n.chRoomCtrl.showRoomRates?t.scrollToAnchor("av-"+n.chRoomCtrl.$$index+"-rates"):t.scrollToAnchor("av-"+n.chRoomCtrl.$$index)},this.$onInit=function(){}}e.$inject=["$scope","Navigator"],angular.module("chroma.components").component("chRoomTitle",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:e,template:'<div class="img-title-bar layout-column layout-padding no-padding"><div class="layout-row layout-align-start-center"><div class="flex layout-column clickable" ng-click="$ctrl.toggleRates()" aria-label="show rate"><div class="md-title"><span translate="{{$ctrl.chRoomCtrl.room.roomType.nameKey}}"></span></div><div><small class="text-uppercase" translate="room.category.{{$ctrl.chRoomCtrl.room.category}}"></small></div></div><div class="layout-column no-padding"><div class="layout-row layout-wrap layout-align-end-center"><ch-people-icons people="$ctrl.chRoomCtrl.room.people" max="$ctrl.chRoomCtrl.room.guestsCount.standard" extra-people="$ctrl.chRoomCtrl.room.extraPeople" extra-max="$ctrl.chRoomCtrl.room.guestsCount.extra"></ch-people-icons></div></div></div></div>'})}(),function(){"use strict";function e(e,t){var n=this;this.$onInit=function(){n.$$index=t.uniqueNumber()}}e.$inject=["$scope","NumberUtils"],angular.module("chroma.components").component("chRoom",{transclude:!0,bindings:{room:"<",storageUrl:"<?",availability:"<?",nights:"<?"},controller:e,template:'<div id="{{\'av-\'+ $ctrl.$$index}}" class="bg-gray-lighter md-margin no-margin-left no-margin-right relative" ng-transclude></div>'})}(),function(){"use strict";function e(e,t,n){var i=this;this.$onInit=function(){i.element=i.element||null,i.offset=isFinite(parseInt(i.offset))?parseInt(i.offset):500,i.ngDisabled=!!_.isBoolean(i.ngDisabled)&&i.ngDisabled,i.showClass=i.showClass||"zoomIn",_.isBoolean(i.showClass)&&(i.showClass=i.showClass?"zoomIn":""),i.hideClass=i.hideClass||"zoomOut",_.isBoolean(i.hideClass)&&(i.hideClass=i.hideClass?"zoomOut":""),i.$initWatches()},this.$postLink=function(){i.ngDisabled?i.$disableShow():i.$enableShow()},this.$enableShow=function(){angular.element(n).on("scroll",i.$toggle)},this.$disableShow=function(){angular.element(n).off("scroll",i.$toggle)},this.$checkVisible=function(){var e=document.querySelector(i.element);if(!e)return!1;var t=e.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-n>=0)},this.$toggle=function(){if(i.ngDisabled)i.$disableShow();else{var o=t.children(),a=angular.element(o.children());a&&a.addClass("animated"),n.pageYOffset>=i.offset&&!i.$checkVisible()?a&&(a.addClass("visible "+i.showClass),a.removeClass(i.hideClass)):a&&(a.removeClass("visible "+i.showClass),a.addClass(i.hideClass)),e.$apply()}},this.$initWatches=function(){e.$watch(function(){return i.ngDisabled},function(e){(e=!!_.isBoolean(e)&&e)?i.$disableShow():i.$enableShow()})},this.$onDestroy=function(){i.$disableShow()}}e.$inject=["$scope","$element","$window"],angular.module("chroma.components").component("chShowOnScroll",{transclude:!0,bindings:{offset:"@?",element:"@?",ngDisabled:"<?",showClass:"@?",hideClass:"@?"},controller:e,template:'<div class="ch-show-on-scroll" ng-transclude></div>'})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){e.$watchGroup([function(){return t.start},function(){return t.end}],t.$calculateDiff)},this.$calculateDiff=function(){var e=t.start?moment(t.start):moment(),n=t.start?moment(t.end):moment();t.$$timeLeft=e.to(n)}}e.$inject=["$scope"],angular.module("chroma.components").component("chTimeLeft",{bindings:{start:"<?",end:"<?"},controller:e,template:'<span ng-bind="$ctrl.$$timeLeft"></span>'})}(),function(){"use strict";function e(e,t,n){e.$mdMedia=n;var i=this;this.$onInit=function(){i.event={date:i.date,title:i.eventTitle,iconBg:i.iconBg,iconClass:i.iconClass,dateFormat:i.dateFormat,animatedClass:i.chTimelineCtrl.animatedClass},i.chTimelineCtrl.addEvent(i.event),i.titleQuote=!_.isBoolean(i.titleQuote)||i.titleQuote,t.addClass("ch-timeline-event flex-xs-100 relative layout-column"),t.addClass("CENTER"==i.event.align?"flex-50":"flex-100"),i.registerWatches()},this.registerWatches=function(){e.$watch(function(){return i.eventTitle},function(e,t){i.event.title=e}),e.$watch(function(){return i.date},function(e,t){i.event.date=e})},this.$onDestroy=function(){i.chTimelineCtrl.removeEvent(i.event)}}e.$inject=["$scope","$element","$mdMedia"],angular.module("chroma.components").component("chTimelineEvent",{require:{chTimelineCtrl:"^chTimeline"},transclude:!0,bindings:{date:"<",eventTitle:"@",titleQuote:"<?",iconBg:"@",iconClass:"@",dateFormat:"@",isNew:"=?",ngDisabled:"=?"},controller:e,template:'<div class="md-padding relative" ch-animated="{{$ctrl.event.animatedClass}}" ch-animated-delay="{{$ctrl.event.animatedDelay}}"><div class="ch-timeline-event-icon {{$ctrl.event.iconBg}}"><md-icon ng-if="$ctrl.event.iconClass" class="material-icons {{$ctrl.event.iconClass}}"></md-icon><div ng-if="!$ctrl.event.iconClass" class="md-subhead ng-scope row-mini"><div class="text-bold">{{$ctrl.event.date|utcDate:\'d\'}}</div><div class="text-small">{{$ctrl.event.date|utcDate:\'MMM\'}}</div></div></div><div class="ch-timeline-event-content layout-padding no-padding bg-white text-left md-whiteframe-1dp"  ng-class="{\'locked\': $ctrl.ngDisabled}"><div ng-if="$ctrl.event.title || $ctrl.event.dateFormat" class="layout-row layout-wrap layout-padding layout-align-start-center"><div class="md-subhead text-left" ng-class="!$mdMedia(\'gt-sm\') ? \'flex-100\': \'flex\'"><span ng-if="$ctrl.isNew"><md-icon class="mdi mdi-new-box text-info material-icons"></md-icon></span><strong ng-if="$ctrl.event.title"><em><span ng-if="$ctrl.titleQuote">&ldquo;</span><span>{{$ctrl.event.title}}</span><span ng-if="$ctrl.titleQuote">&bdquo;</span></em></strong></div><div class="text-gray-light text-small">{{$ctrl.event.date|utcDate:$ctrl.event.dateFormat}}</div></div><div class="no-padding" ng-transclude></div></div></div>'})}(),function(){"use strict";function e(e,t,n){var i=this;this.events=[],this.bgArray=["bg-success text-white","bg-info text-white","bg-warn text-white","bg-danger text-white","bg-primary text-white","bg-primary-light text-white","bg-blue-sea text-white","bg-gray-light text-white","bg-gray-lighter only-border text-gray-light"],this.$onInit=function(){i.hideIcon=!!_.isBoolean(i.hideIcon)&&i.hideIcon,i.randomBg=!_.isBoolean(i.randomBg)||i.randomBg,i.manageAlign(),i.registerWatches()},this.manageAlign=function(){i.align=_.includes(["LEFT","CENTER","RIGHT"],i.align)?i.align:"CENTER",i.align=t("gt-xs")?i.align:"RIGHT",i.alignClass="ch-timeline-"+i.align.toLowerCase(),i.animatedClass="RIGHT"==i.align?"slideInRight":"LEFT"==i.align?"slideInLeft":"slideInUp"},this.manageIconBgColor=function(e){_.isNil(e.iconBg)&&i.randomBg&&(i.bgArrayLeft=_.isEmpty(i.bgArrayLeft)?angular.copy(i.bgArray):i.bgArrayLeft,e.iconBg=_.sample(i.bgArrayLeft),_.pull(i.bgArrayLeft,e.iconBg),i.lastIconBg||i.lastIconBg==e.iconBg?i.manageIconBgColor(e):i.lastIconBg=e.iconBg)},this.addEvent=function(e){e.align=i.align,i.manageIconBgColor(e),e.index=i.events.push(e)-1,e.animatedDelay=e.index>=0&&e.index<=10?100*e.index:1e3,i.barClass=n.isOdd(i.events.length)?"ch-timeline-odd":"ch-timeline-even"},this.removeEvent=function(e){_.pull(i.events,e),i.barClass=n.isOdd(i.events.length)?"ch-timeline-odd":"ch-timeline-even"},this.registerWatches=function(){e.$watch(function(){return i.hideIcon},function(e,t){i.hideIcon=!!_.isBoolean(e)&&e}),e.$watch(function(){return i.align},function(e,t){i.manageAlign(),_.forEach(i.events,function(t){t.align=e})})}}e.$inject=["$scope","$mdMedia","NumberUtils"],angular.module("chroma.components").component("chTimeline",{transclude:!0,bindings:{align:"@",randomBg:"<?",hideIcon:"<?"},controller:e,template:'<div class="ch-timeline {{$ctrl.alignClass}} {{$ctrl.barClass}} {{$ctrl.hideIcon ? \'no-icon\' : null}}"><div class="layout-row layout-wrap" ng-transclude></div><bar></bar></div>'})}(),function(){"use strict";function e(e,t){var n=this;n.$onInit=function(){e.$watchGroup([function(){return n.text},function(){return n.maxLength}],n.$truncate)},n.$truncate=function(){n.$$showTooltip=!n.hideTooltip&&n.text.length>n.maxLength,n.$$truncated=t(n.text,n.maxLength,n.suffix)}}e.$inject=["$scope","truncateFilter"],angular.module("chroma.components").component("chTruncate",{bindings:{text:"@",maxLength:"<?",suffix:"@",hideTooltip:"<?"},controller:e,template:'<span><span>{{$ctrl.$$truncated}}</span><md-tooltip ng-if="$ctrl.$$showTooltip">{{$ctrl.text}}</md-tooltip></span>'})}(),function(){"use strict";function e(e){var t=this;this.$onInit=function(){t.$initWatches()},this.$prepareText=function(){t.$$textArr=_.split(t.text,"")},this.$initWatches=function(){e.$watch(function(){return t.text},ctr.$prepareText)}}e.$inject=["$scope"],angular.module("chroma.components").component("chVerticalText",{bindings:{text:"<"},controller:e,template:'<div><p ng-repeat="char in $ctrl.$$textArr">{{char}}</p></div>'})}();