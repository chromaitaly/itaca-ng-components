/*******************************************************************************
********************************************************************************
********************************************************************************
***	   itaca-ng-components														 
***    Copyright (C) 2016   Chroma Italy Hotels srl	 
***                                                                          
***    This program is free software: you can redistribute it and/or modify  
***    it under the terms of the GNU General Public License as published by  
***    the Free Software Foundation, either version 3 of the License, or     
***    (at your option) any later version.                                   
***                                                                          
***    This program is distributed in the hope that it will be useful,       
***    but WITHOUT ANY WARRANTY; without even the implied warranty of        
***    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         
***    GNU General Public License for more details.                          
***                                                                          
***    You should have received a copy of the GNU General Public License     
***    along with this program.  If not, see <http://www.gnu.org/licenses/>. 
********************************************************************************
********************************************************************************
*******************************************************************************/
<<<<<<< HEAD
!function(){"use strict";angular.module("itaca.components",["itaca.components-templates","ngMaterial","itaca.services","itaca.utils","pascalprecht.translate","tmh.dynamicLocale"]),angular.module("itaca.components").config(["$windowProvider","$translateProvider","tmhDynamicLocaleProvider",function(t,e,n){var a=(t.$get().navigator.language||t.$get().navigator.userLanguage).split("-")[0].toLowerCase();e.useLoader("i18nLoader"),e.preferredLanguage(a),e.useCookieStorage(),e.useMissingTranslationHandlerLog(),$translateSanitizationProvider.addStrategy("sce","sceStrategy"),e.useSanitizeValueStrategy("sce"),n.localeLocationPattern("/resources/public/js/i18n/angular-locale_{{locale}}.js"),n.useCookieStorage(),n.defaultLocale(a)}])}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){if(l.ngModel.$originalValue=l.ngModel.$originalValue||angular.copy(l.ngModel),l.hideInitialValue=!!_.isBoolean(l.hideInitialValue)&&l.hideInitialValue,l.$$pattern=_.isBoolean(l.allowNegative)&&l.allowNegative?e.priceNoStrict:e.price,l.$$currentLang=i.current(),l.cssClass=l.cssClass||"font-18 no-margin minimal-input max-width-130px ",l.iconClass=l.iconClass||"mdi mdi-pencil md-18 text-primary material-icons",l.originalValueClass=l.originalValueClass||"md-caption text-gray-light",l.refreshIconClass=l.refreshIconClass||"mdi mdi-refresh md-18 material-icons",l.originalValueLabel||n("common.amount.original").then(function(t){l.originalValueLabel=t},_.stubFalse()),l.hideIcon=!!_.isBoolean(l.hideIcon)&&l.hideIcon,l.readOnlyView=!!_.isBoolean(l.readOnlyView)&&l.readOnlyView,l.showOriginalValue=!!_.isBoolean(l.showOriginalValue)&&l.showOriginalValue,l.ngModel.initialAmount&&l.ngModel.initialAmount!=l.ngModel.finalAmount||(l.ngModel.initialAmount=0!==l.ngModel.initialAmount?l.ngModel.finalAmount:l.ngModel.initialAmount),l.disabledLimit)l.max=!1;else if(l.max=l.ngModel.initialAmount,l.promotion&&l.promotion.discount&&l.promotion.discount.finalAmount){var t=0;t="PERCENTAGE"==l.promotion.discount.type?a.calculateDiscount(l.ngModel.initialAmount,l.promotion.discount.finalAmount,"PERCENTAGE"):l.promotion.discount.finalAmount,l.max=l.max-t}l.$initWatches()},this.$refreshPrice=function(){l.ngModel&&l.ngModel.$originalValue&&(l.ngModel.finalAmount=angular.copy(l.ngModel.$originalValue.finalAmount),l.ngModel.initialAmount=angular.copy(l.ngModel.$originalValue.initialAmount),angular.isFunction(l.onUpdate)&&l.onUpdate({value:l.ngModel}))},this.$adeguateAmount=function(){if(l.ngModel.$originalValue&&l.ngModel.finalAmount!=l.ngModel.$originalValue.finalAmount){if(!_.isNil(l.promotion)&&l.promotion.discount&&l.promotion.discount.finalAmount){var t=0;t="PERCENTAGE"==l.promotion.discount.type?100*l.ngModel.finalAmount/(100-l.promotion.discount.finalAmount):l.ngModel.finalAmount+l.promotion.discount.finalAmount,l.ngModel.initialAmount=t}else l.ngModel.initialAmount<l.ngModel.finalAmount&&(l.ngModel.initialAmount=l.ngModel.finalAmount);angular.isFunction(l.onUpdate)&&l.onUpdate({value:l.ngModel})}},this.$initWatches=function(){t.$watch(function(){return l.ngModel.finalAmount},function(t,e){l.$adeguateAmount()})}}t.$inject=["$scope","REGEXP","$translate","NumberUtils","Locale"],angular.module("itaca.components").component("chAmountInput",{require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",ngMin:"<?",inputName:"@",promotion:"<?",errorMessages:"@",cssClass:"@",hideIcon:"@",iconClass:"@",readOnlyView:"<?",hideInitialValue:"<?",showOriginalValue:"<?",originalValueClass:"<?",originalValueLabel:"<?",ngDisabled:"<?",disabledLimit:"<?",hideRefreshIcon:"<?",refreshIconClass:"@",allowNegative:"<?",onUpdate:"&?"},controller:t,template:'<ng-form name="chAmountInputForm" ng-class="{"text-gray-light cursor-disabled": $ctrl.ngDisabled}"><div class="no-padding-bottom no-padding-top row-mini layout-column layout-align-center-center"><span ng-if="$ctrl.promotion" ng-switch="$ctrl.promotion.promotionType"><span ng-switch-when="STANDARD" class="label label-xs bg-info"><ch-truncate text="{{$ctrl.promotion.name[$ctrl.$$currentLang.iso]}}" max-length="20"  suffix="..."></ch-truncate>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="MINIMUM_STAY" class="label label-xs bg-primary-light"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{$ctrl.promotion.days}}"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="BOOK_TODAY" class="label label-xs bg-danger"><span translate-once="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="EARLY_BOOKING" class="label label-xs bg-warn"><span translate-once="promotions.early"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_MINUTE" class="label label-xs bg-primary"><span translate-once="promotions.last.minute"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_SECOND" class="label label-xs bg-success"><span translate-once="promotions.last.second"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span></span><small class="text-gray-light" ng-if="!$ctrl.hideInitialValue"><span ng-if="$ctrl.ngModel.initialAmount > 0 && $ctrl.ngModel.initialAmount > $ctrl.ngModel.finalAmount"><i><del>{{($ctrl.ngModel.initialAmount|chCurrency)}}</del></i></span><span ng-if="!($ctrl.ngModel.initialAmount > 0 && $ctrl.ngModel.initialAmount > $ctrl.ngModel.finalAmount)"></span></small></div><div class="no-padding-top"><div ng-if="$ctrl.readOnlyView" class="text-center">{{$ctrl.ngModel.finalAmount|chCurrency}}</div><div ng-if="!$ctrl.readOnlyView"><div class="text-right" ng-if="$ctrl.showOriginalValue"><ch-original-value ng-model="$ctrl.ngModel.finalAmount" refer-to="$ctrl.ngModel.$originalValue.finalAmount" filter="chCurrency" label="{{$ctrl.originalValueLabel}}" css-class="{{$ctrl.originalValueClass}}"></ch-original-value></div><div class="layout-align-end-center layout-row row-mini"><md-input-container class="{{$ctrl.cssClass}}" ng-class="{"md-icon-right": !$ctrl.hideRefreshIcon && $ctrl.ngModel.finalAmount != $ctrl.ngModel.$originalValue.finalAmount}"><md-icon ng-if="!$ctrl.hideIcon && !$ctrl.ngDisabled" class="{{$ctrl.iconClass}}"></md-icon><input type="number" name="{{$ctrl.inputName}}" ng-model="$ctrl.ngModel.finalAmount" ng-min="$ctrl.ngMin" step="0.01" ng-max="$ctrl.max" ng-pattern="$ctrl.$$pattern" required ng-disabled="$ctrl.ngDisabled" aria-label="Edit amount" class="text-center"><md-icon ng-if="!$ctrl.hideRefreshIcon && !$ctrl.ngDisabled && $ctrl.ngModel.finalAmount != $ctrl.ngModel.$originalValue.finalAmount" class="{{$ctrl.refreshIconClass}} clickable" ng-click="$ctrl.$refreshPrice()" aria-label="reset price"><md-tooltip><span translate-once="common.restore"></span></md-tooltip></md-icon><div ng-messages="chAmountInputForm[$ctrl.inputName].$error"><span ng-message="required"><span translate-once="error.required"></span></span><span ng-message="min"><span translate="error.amount.min" translate-values="{num: ($ctrl.ngMin | chCurrency)}"></span></span><span ng-message="max"><span translate="error.amount.max" translate-values="{num: ($ctrl.max | chCurrency)}"></span></span><span ng-message="$$pattern"><span translate-once="error.field.generic.invalid"></span></span><span ng-if="errorMessages" ng-repeat="error in $ctrl.errorMessages" ng-message="error.key"><span translate="error.label"></span></span></div></md-input-container></div></div></div></ng-form>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.buttonClass=e.buttonClass||(e.iconClass&&!e.label?"md-icon-button":""),e.selectedClass=e.selectedClass||"md-primary",e.option={value:e.ngValue,selected:!1},e.chArrayInputCtrl.$addOption(e.option)},this.$toggle=function(){e.chArrayInputCtrl.$toggleOption(e.option)}}t.$inject=["$scope"],angular.module("itaca.components").component("chArrayInputOption",{require:{chArrayInputCtrl:"^chArrayInput"},bindings:{ngValue:"<",buttonClass:"@",iconClass:"@",label:"@",labelClass:"@",selectedClass:"@"},controller:t,template:'<md-button class="{{$ctrl.buttonClass}}" ng-class="$ctrl.option.selected ? $ctrl.selectedClass : \'\'" ng-click="$ctrl.$toggle()" aria-label="Toggle option"><md-icon ng-if="$ctrl.iconClass" class="material-icons {{$ctrl.iconClass}}"></md-icon><div ng-if="$ctrl.labelClass" class="{{$ctrl.labelClass}}" ng-bind-html="$ctrl.label"></div></md-button>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.ngModelCtrl.$modelValue=angular.isArray(e.ngModelCtrl.$modelValue)?e.ngModelCtrl.$modelValue:[],e.options=angular.isArray(e.options)?e.options:[],e.ngRequired&&e.$watchCollection(function(){return e.ngModelCtrl.$modelValue},function(t,n){e.ngRequired&&e.ngModelCtrl.$setValidity("required",!_.isEmpty(e.ngModelCtrl.$modelValue))})},this.$addOption=function(t){e.options.push(t)},this.$toggleOption=function(t){t.selected?_.pull(e.ngModelCtrl.$modelValue,t.value):e.ngModelCtrl.$modelValue.push(t.value),t.selected=!t.selected}}t.$inject=["$scope"],angular.module("itaca.components").component("chArrayInput",{require:{ngModelCtrl:"ngModel"},transclude:!0,bindings:{ngModel:"=",ngRequired:"<?",options:"<?"},controller:t,template:'<div class="layout-padding"><div class="layout-row layout-wrap" ng-transclude></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.reservation=a.reservation||{},a.step=_.isNil(a.step)?1:parseInt(a.step),a.$initWatches()},this.$next=function(){a.onNext&&a.onNext()},this.$checkMinEndDate=function(){if(a.reservation.checkin){var t=n.absoluteMoment(a.reservation.checkin),e=n.absoluteMoment(t).add(1,"days");a.$$minEndDate=e.toDate();var i=n.absoluteMoment(t).add(a.maxRange,"days");a.$$maxEndDate=i.toDate(),!a.reservation.checkout||n.absoluteMoment(a.reservation.checkout).isBefore(e,"day")?a.reservation.checkout=angular.copy(a.$$minEndDate):a.reservation.checkout&&n.absoluteMoment(a.reservation.checkout).isAfter(i,"day")&&(a.reservation.checkout=angular.copy(a.$$maxEndDate))}},this.$calculateNights=function(){a.reservation.nights=n.absoluteMoment(a.reservation.checkout).diff(n.absoluteMoment(a.reservation.checkin),"days")},this.$search=function(){a.onSearch&&a.onSearch({checkin:a.reservation.checkin,checkout:a.reservation.checkout,nights:a.reservation.nights,people:a.reservation.people})},this.$initWatches=function(){t.$watchGroup([function(){return a.reservation.checkin},function(){return a.reservation.checkout}],function(t,e){a.$checkMinEndDate(),a.$calculateNights(),n.absoluteMoment(t[0]).isSame(n.absoluteMoment(e[0]),"day")&&n.absoluteMoment(t[1]).isSame(n.absoluteMoment(e[1]),"day")||a.onDateChanged&&a.onDateChanged({checkin:a.reservation.checkin,checkout:a.reservation.checkout,nights:a.reservation.nights})})}}t.$inject=["$scope","$timeout","DateUtils"],angular.module("itaca.components").component("chBookingForm",{bindings:{reservation:"<",minDate:"<?",maxRange:"<?",step:"<?",onDateChanged:"&?",onSearch:"&?",onNext:"&?"},controller:t,template:'<ng-form name="bookingForm" novalidate layout="column" layout-padding><div class="md-subhead no-padding-top no-padding-bottom text-gray-light text-center"><strong ng-if="$ctrl.reservation.nights && $ctrl.reservation.rooms.length"><span translate="reservation.summary.your"></span></strong><strong ng-if="$ctrl.reservation.nights && !$ctrl.reservation.rooms.length"><span translate="reservation.summary.search"></span></strong><strong ng-if="!$ctrl.reservation.nights" ><span translate="reservation.search.your.room"></span></strong></div><div ng-if="!$ctrl.step || $ctrl.step <= 1" class="no-padding-top no-padding-bottom"><div flex layout="column"><ch-date-range-picker label="{{\'reservation.when.question\'|translate}}"start-label="{{\'date.checkin.select.alt\'|translate}}"start="$ctrl.reservation.checkin"start-min-date="$ctrl.minDate"start-error-messages="{mindate: (\'error.date.before.today\'|translate)}"end-label="{{\'date.checkout.select.alt\'|translate}}"end="$ctrl.reservation.checkout"end-min-date="$ctrl.$$minEndDate" end-max-date="$ctrl.$$maxEndDate"end-error-messages="{mindate: (\'error.date.end.before.start\'|translate), maxdate: (\'error.reservation.search.maxdate\'|translate)}"max-range="$ctrl.maxRange"diff-label-singular="{{\'common.night\'|translate}}"diff-label-plural="{{\'common.nights\'|translate}}"use-utc="true" disable-body-scroll="true"></ch-date-range-picker></div><div><md-divider></md-divider></div><div flex layout="column"><ch-people-picker label="{{\'reservation.people.question\'|translate}}"people="$ctrl.reservation.requestPeople"ng-required="true"has-confirm="false"disable-body-scroll="true"></ch-people-picker></div></div><div ng-if="$ctrl.step > 1" class="no-padding-top no-padding-bottom"><div flex layout="column"><div layout="column" layout-padding class="text-center"><div class="text-gray-light text-small no-padding-bottom"><span>{{\'reservation.when.question\'|translate}}</span></div><div class="layout layout-wrap layout-align-center-center row-mini text-lowercase no-padding-bottom"><span><span translate="date.from.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.reservation.checkin|utcDate:"shortDate"}}</strong></span>&nbsp;</span><span><span translate="date.to.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.reservation.checkout|utcDate:"shortDate"}}</strong></span></span><span ng-if="$ctrl.reservation.nights" class="text-gray-light text-small no-padding no-margin text-lowercase">(<span>&nbsp;{{$ctrl.reservation.nights}}&nbsp;</span><span ng-show="$ctrl.reservation.nights == 1">{{\'common.night\'|translate}})</span> <span ng-show="$ctrl.reservation.nights > 1">{{\'common.nights\'|translate}})</span></span></div></div></div><div><md-divider></md-divider></div><div flex layout="column"><div layout="column" layout-padding class="text-center"><div class="text-gray-light text-small no-padding-bottom"><span translate="reservation.people.question"></span></div><div ng-if="$ctrl.reservation.people" class="md-subhead text-wrap row-mini no-padding-bottom"><strong><ch-people-summary people="$ctrl.reservation.people"></ch-people-summary></strong></div><div ng-if="$ctrl.step == 2 && ($ctrl.reservation.remainingPeople.adults > 0 || $ctrl.reservation.remainingPeople.boys > 0 || $ctrl.reservation.remainingPeople.children > 0 || $ctrl.reservation.remainingPeople.kids > 0)"class="text-lowercase text-small text-warn"><md-icon class="mdi mdi-alert md-14 text-warn"></md-icon><span translate="reservation.people.unsatisfied"></span>:&nbsp;<strong><ch-people-summary people="$ctrl.reservation.remainingPeople"></ch-people-summary></strong>&nbsp;<span translate="reservation.people.unsatisfied.to.arrange"></span>.<span class="text-initial" translate="reservation.people.unsatisfied.add.beds.or.rooms"></span>.</div></div></div></div><div class="no-padding-top"><md-divider></md-divider></div><div id="booking-summary" class="no-margin-top no-margin-bottom no-padding-top no-padding-bottom" ng-show="$ctrl.reservation.totalAmount.finalAmount && $ctrl.reservation.totalAmount.finalAmount > 0"><div class="text-gray-light text-small text-center"><span translate="reservation.rooms.details"></span>:</div><ul><li ng-repeat="room in $ctrl.reservation.rooms" class="padding-left layout-row layout-wrap "><small class="flex"><strong>1&nbsp;<span translate="{{room.type.roomType.nameKey}}"></span>&nbsp;</strong><span ng-if="$ctrl.reservation.nights > 1">(<span>{{room.totalRate.dailyRates[0].amount.finalAmount|chCurrency}}</span><span>&nbsp;x&nbsp;{{$ctrl.reservation.nights}}<span translate="date.days.abbr"></span></span>)</span></small><div class="text-right"><div class="text-gray-light" ng-if="room.totalRate.amount.initialAmount != room.totalRate.amount.finalAmount"><small><del><em>{{room.totalRate.amount.initialAmount|chCurrency}}</em></del></small></div><div><span>{{room.totalRate.amount.finalAmount|chCurrency}}</span></div></div><ul class="flex-100 no-padding no-margin"><li ng-if="!serviceSold.included" ng-repeat="serviceSold in room.services" class="padding-left layout-row layout-wrap" ng-class="{\'text-danger\': serviceSold.toRemove}"><small class="flex"><span><span ng-if="serviceSold.count > 1">{{serviceSold.count}}&nbsp;x&nbsp;</span><span ng-if="serviceSold.count <= 1">1&nbsp;</span><span translate="{{serviceSold.service.type.nameKey}}"></span>&nbsp;</span><span ng-if="serviceSold.service.paymentType == \'PER_PERSON\' && ! serviceSold.toRemove"><ch-people-summary people="serviceSold.people" no-details="true"></ch-people-summary>&nbsp;</span><span ng-if="$ctrl.reservation.nights > 1 && serviceSold.service.frequency == \'DAILY\'">(x&nbsp;{{$ctrl.reservation.nights}}<span translate="date.days.abbr"></span>)</span></small><span class="text-right"><span ng-if="serviceSold.amount.finalAmount > 0">{{serviceSold.amount.finalAmount|chCurrency}}</span><i ng-if="serviceSold.amount.finalAmount <= 0" translate="common.free"></i></span></li></ul><ul class="flex-100 no-padding no-margin"><li ng-repeat="bed in room.otherBeds" class="padding-left layout-row layout-wrap"><small class="flex"><span>1&nbsp;<span class="text-lowercase" translate="bed.bed"></span>&nbsp;<span translate="{{\'bed.\' + bed.bed.type}}"></span>&nbsp;</span><span ng-if="$ctrl.reservation.nights > 1">(x&nbsp;{{$ctrl.reservation.nights}}<span translate="date.days.abbr"></span>)</span></small><span class="text-right"><span>{{bed.amount.finalAmount|chCurrency}}</span></span></li></ul></li></ul><md-divider></md-divider><div class="layout-row layout-wrap layout-padding no-padding-left no-padding-right" ng-if="$ctrl.reservation.totalAmount.finalAmount"><div class="flex no-padding" style="min-width: 125px"><div class="md-headline"><span translate="common.total"></span>:</div><div style="margin-top:-6px;" ng-if="appOptions.currentCurrency != hotel.currency"><small>(<span translate="currency.your.currency"></span>)</small></div></div><div class="text-right no-padding md-headline"><span>{{$ctrl.reservation.totalAmount.finalAmount|chCurrency}}</span><span ng-if="appOptions.currentCurrency != hotel.currency">*</span></div></div><div class="layout-row layout-padding no-padding-left no-padding-right no-padding-top" ng-if="$ctrl.reservation.totalAmount.finalAmount && appOptions.currentCurrency != hotel.currency"><div class="flex no-padding"><div class="md-subhead"><span translate="common.total"></span>:</div><div style="margin-top:-6px;"><small>(<span translate="currency.hotel.currency"></span>)</small></div></div><div class="md-subhead text-right no-padding"><span>{{$ctrl.reservation.totalAmount.finalAmount | chCurrency:hotel.currency }}</span></div></div><div class="text-gray-light layout-row no-padding" ng-if="$ctrl.reservation.totalAmount.finalAmount && appOptions.currentCurrency != hotel.currency"><small class="layout-column layout-margin no-margin"><span class="no-margin"><span translate="currency.info.payment" translate-values="{name: hotel.name}"></span><span>:&nbsp;{{ 1 | chCurrency:hotel.currency}} = {{ 1 | chCurrency}}</span></span><span class="no-margin-left no-margin-bottom no-margin-right"><span translate="currency.info.payment2"></span></span></small></div></div><div layout="column" class="no-padding" ng-switch="$ctrl.step"><div ng-switch-default layout="column"><md-button class="md-raised md-primary row-1" ng-disabled="bookingForm.$invalid" ch-click="$ctrl.$search()" aria-label="Check availability"><div layout="column" layout-padding><span translate="reservation.availability.check"></span></div></md-button></div><div ng-switch-when="1" layout="column"><md-button class="md-raised md-primary row-1" ng-disabled="$ctrl.reservation.rooms.length <= 0" ng-click="$ctrl.$next()" aria-label="Book now"><div layout="column" layout-padding><span ng-if="$ctrl.reservation.rooms.length"><span translate="reservation.instant"></span><md-icon class="mdi mdi-chevron-down" ng-class="{\'animated infinite bounce\':$ctrl.reservation.rooms.length}"></md-icon></span><span ng-if="!$ctrl.reservation.rooms.length"><span translate="reservation.rooms.select"></span></span></div></md-button></div><div ng-switch-when="2|3|4" ng-switch-when-separator="|" layout="column"><md-button class="md-raised row-1" ng-class="{\'md-primary\': $ctrl.step == 2, \'bg-success\': $ctrl.step == 3}" ng-click="$ctrl.$next()" aria-label="Book now" ng-switch="$ctrl.step"><div ng-switch-when="2" layout="column" layout-padding><span><span translate="common.last.step"></span><md-icon class="mdi mdi-chevron-down animated infinite bounce"></md-icon></span></div><div ng-switch-when="3" layout="column" layout-padding><div class="text-initial no-padding"><small translate="reservation.text.alright"></small></div><div class="text-uppercase no-padding"><strong translate="reservation.book.now" style="margin-left: 24px;"></strong><md-icon class="mdi mdi-chevron-down text-white animated infinite bounce"></md-icon></div><small ng-if="$ctrl.reservation.guest.email" class="ng-binding ng-scope no-padding text-initial text-wrap"><span><span translate="reservation.email.confirm.to"></span>:</span><span>{{$ctrl.reservation.guest.email}}</span></small></div></md-button></div></div><div class="layout-column layout-padding no-padding text-center" ng-if="$ctrl.step == 1 && $ctrl.reservation.rooms.length > 0"><span class="no-padding-bottom"><md-icon class="mdi mdi-checkbox-marked-circle-outline text-success md-18"></md-icon><span class="text-success" translate="common.only.two.min"></span></span></div><div layout="column" class="text-gray-light" ng-if="$ctrl.reservation.nights"><small><span ng-if="$ctrl.reservation.nights == 1" translate="reservation.rates.info.night"></span><span ng-if="$ctrl.reservation.nights > 1" translate="reservation.rates.info.nights" translate-value-count="{{$ctrl.reservation.nights}}"></span></small><small ng-if="hotel.vatTax"><strong><span translate="common.included"></span>:</strong>&nbsp;{{::hotel.vatTax.finalAmount}}%&nbsp;<span translate="billing.vat.tax"></span></small><small ng-if="hotel.cityTax || $ctrl.reservation.checkinDetails"><strong><span translate="common.included.not"></span>:</strong>&nbsp;<span ng-if="hotel.cityTax && hotel.cityTax.finalAmount">{{::(hotel.cityTax.finalAmount|chCurrency:hotel.currency)}}&nbsp;<span translate="reservation.cityTax.description"></span></span><span ng-if="$ctrl.reservation.checkinDetails && $ctrl.reservation.checkinDetails.amount.finalAmount"><span ng-if="hotel.cityTax.finalAmount">,&nbsp;</span>{{::($ctrl.reservation.checkinDetails.amount.finalAmount|chCurrency:hotel.currency)}}&nbsp;<span translate="reservation.checkinDetails.description"></span></span></small></div></ng-form>'})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){if(!l.creationDate)throw new Error("chCancellationBar: creationDate cannot be null");if(!l.checkinDate)throw new Error("chCancellationBar: checkinDate cannot be null");l.$$startDate=moment(l.creationDate).toDate(),l.$$endDate=i.absoluteDate(l.checkinDate),l.$$freeCancelDate=moment(l.limitDate||l.$$endDate).toDate();var t=moment(l.$$startDate),s=moment(l.$$endDate),o=l.$$freeCancelDate?moment(l.$$freeCancelDate):null;l.$$inPenalty=!1,o&&o.isAfter(s,"days")&&(l.$$endDate=o.toDate(),s=moment(l.$$endDate)),t.isAfter(s,"days")&&(n.warn("chCancellationBar: creationDate is after checkinDate. Will be adjusted to checkinDate."),l.$$startDate=s.toDate(),t=moment(l.$$startDate),l.$$inPenalty=!0),o&&o.isSame(s,"days")&&(l.$$endDate=o.toDate(),s=moment(l.$$endDate));var r=moment();r.isAfter(s,"days")?l.$$hideToday=!0:l.$$now=r.toDate(),s.endOf("day");var c=s.diff(t,"days")||1,d=moment.duration(s.diff(r)).asDays();if(l.$$todayPosition=a.fixedDecimals(100-d/c*100),l.$$todayPosition=l.$$todayPosition>100?100:l.$$todayPosition<0?0:l.$$todayPosition,l.limitDate){l.finalLimitDate=o.utcOffset(l.offsetSeconds?l.offsetSeconds/60:0).toDate(),l.daysToLimit=moment.duration(moment(l.finalLimitDate).diff(r)).asDays();var m=moment.duration(s.diff(moment(l.finalLimitDate))).asDays();l.$$limitRate=m>=0?a.fixedDecimals(100-100*m/c):0,l.$$limitRate=l.$$limitRate>100?100:l.$$limitRate<0?0:l.$$limitRate,l.$$inPenalty=l.daysToLimit<=0}else l.$$inPenalty=!_.isNil(l.feeAmount)&&l.feeAmount>0,l.$$inPenalty?(l.$$limitRate=0,l.finalLimitDate=t.utcOffset(l.offsetSeconds?l.offsetSeconds/60:0).toDate()):l.$$limitRate=100;var p=angular.element(e[0].querySelector(".limit-label"));100==l.$$limitRate?(p.addClass("limit-label-full"),p.removeClass("limit-label-empty")):0==l.$$limitRate&&(p.addClass("limit-label-empty"),p.removeClass("limit-label-full"))}}t.$inject=["$scope","$element","$log","NumberUtils","DateUtils"],angular.module("itaca.components").component("chCancellationBar",{bindings:{creationDate:"<",checkinDate:"<",limitDate:"<?",feeAmount:"<?",offsetSeconds:"<?",startLabel:"@",endLabel:"@",penaltyCancelLabel:"@",freeCancelLabel:"@",limitCancelLabel:"@"},controller:t,template:'<div class="ch-cancellation-bar-container"><div class="summary-label"><strong ng-if="!$ctrl.$$inPenalty" class="text-success"><span ng-if="$ctrl.finalLimitDate"><span>{{$ctrl.limitCancelLabel}}</span>&nbsp;<span ng-if="$ctrl.daysToLimit">{{$ctrl.daysToLimit|amDurationFormat : "days"}}</span>&nbsp;<span ng-if="!$ctrl.daysToLimit" class="text-lowercase" translate="date.today"></span><span class="text-gray-light text-normal">&nbsp;({{$ctrl.finalLimitDate|offsetDate:"shortDate":$ctrl.offsetSeconds}}&nbsp;<span class="text-lowercase" translate="date.time.to"></span>&nbsp;{{$ctrl.finalLimitDate|offsetDate:"shortTime":$ctrl.offsetSeconds}})</span></span><span ng-if="!$ctrl.finalLimitDate"><span>{{$ctrl.freeCancelLabel}}</span></span></strong><strong ng-if="$ctrl.$$inPenalty" class="text-danger">{{$ctrl.penaltyCancelLabel}}</span></strong></div><div layout layout-padding-sm><div layout="column" layout-align="center center" class="no-padding-top no-padding-bottom cursor-help"><md-icon class="mdi mdi-book-plus md-18"></md-icon><small class="text-gray-light">{{$ctrl.$$startDate|utcDate:"dd/MM"}}</small><md-tooltip><span ng-if="!$ctrl.startLabel" translate="reservation.insert.date"></span><span ng-if="$ctrl.startLabel">{{$ctrl.startLabel}}</span></md-tooltip></div><div flex class="progress-bar"><span ng-if="$ctrl.finalLimitDate" class="limit-label cursor-help" style="left:{{$ctrl.$$limitRate}}%"><span>{{$ctrl.finalLimitDate|offsetDate:"d MMMM":$ctrl.offsetSeconds}}</span><md-tooltip>{{$ctrl.limitCancelLabel}}&nbsp;{{$ctrl.finalLimitDate|offsetDate:"shortDate":$ctrl.offsetSeconds}}&nbsp;<span class="text-lowercase" translate="date.time.to"></span>&nbsp;{{$ctrl.finalLimitDate|offsetDate:"shortTime":$ctrl.offsetSeconds}}</md-tooltip></span><span ng-if="!$$hideToday" class="today-label cursor-help" style="left:{{$ctrl.$$todayPosition}}%"><span translate="date.today"></span><md-tooltip><span translate="date.today"></span>&nbsp;{{$ctrl.$$now|date:"short"}}</md-tooltip></span><div class="bar bg-success" style="width:{{$ctrl.$$limitRate}}%;"></div><div class="bar bg-danger" style="left:{{$ctrl.$$limitRate}}%; width:{{100 - $ctrl.$$limitRate}}%;"></div></div><div layout="column" layout-align="center center" class="no-padding-top no-padding-bottom cursor-help"><md-icon class="mdi mdi-debug-step-into md-18"></md-icon><small class="text-gray-light">{{$ctrl.$$endDate|utcDate:"dd/MM"}}</small><md-tooltip><span ng-if="!$ctrl.endLabel" translate="date.checkin"></span><span ng-if="$ctrl.endLabel">{{$ctrl.endLabel}}</span></md-tooltip></div></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.$$bgStyle=n.bgUrl?{background:"url('"+n.bgUrl+"') center center no-repeat","background-size":"cover"}:null,n.colorClass=n.colorClass||"layout-column layout-align-center-center bg-gray-lighter md-padding",n.titleClass=n.titleClass||"md-subhead text-bold",n.iconLabelPosition=_.includes(["left","right","top","bottom"],n.iconLabelPosition)?n.iconLabelPosition:"left",n.menuItems=n.menuItems&&angular.isArray(n.menuItems)?n.menuItems:null,n.menuClass=n.menuClass||null,n.showAvatar=!!_.isBoolean(n.showAvatar)&&n.showAvatar,n.$initWatches()},this.$goTo=function(){n.ngDisabled||(angular.isFunction(n.onClick)?n.onClick():_.isNil(n.state)?_.isNil(n.url)||e.go(n.url):e.goToState(n.state,n.stateParams))},this.$menuClick=function(t){!_.isNil(t.fn)&&angular.isFunction(t.fn)?t.fn.apply(this,t.fnParams):_.isNil(t.state)?_.isNil(t.url)||(location.href=t.url):e.goToState(t.state,t.stateParams)},this.$initWatches=function(){t.$watch(function(){return n.imgUrl},function(t,e){n.imgUrl=t})}}t.$inject=["$scope","Navigation"],angular.module("itaca.components").component("chCard",{transclude:!0,bindings:{bgUrl:"@",bgClass:"@",imgUrl:"@",imgClass:"@",imgContClass:"@",showAvatar:"=?",iconClass:"@",iconLabel:"<?",iconLabelClass:"@",iconLabelPosition:"@",iconSecondaryLabel:"<?",iconSecondaryLabelClass:"@",iconSecondaryLabelPosition:"@",otherIconClass:"@",title:"@",titleClass:"@",subtitle:"@",colorClass:"@",ngDisabled:"=?",disabledLabel:"@",disabledClass:"@",disabledBarClass:"@",url:"@",state:"@",stateParams:"<?",onClick:"&?",menuItems:"<?",disabledMenuItems:"<?",menuClass:"@",noHover:"<?"},controller:t,template:'<div class="md-whiteframe-1dp bg-white flex layout-column" ng-click="$ctrl.$goTo()"ng-class="{"clickable": !$ctrl.ngDisabled && ($ctrl.url || $ctrl.state || $ctrl.onClick), "cursor-disabled": $ctrl.ngDisabled}"><div class="relative"><div ng-if="$ctrl.ngDisabled" class="disabled-box {{$ctrl.disabledClass}}"><span ng-if="$ctrl.disabledLabel" class="disabled-box-bar {{$ctrl.disabledBarClass}}">{{$ctrl.disabledLabel}}</span></div><div class="layout-padding no-padding-right absolute position-right position-top" style="z-index:2"><md-menu class="md-secondary" ng-if="$ctrl.menuItems && !$ctrl.ngDisabled"><md-button aria-label="Open user interactions menu" class="md-icon-button {{$ctrl.menuClass}}" ng-click="$mdMenu.open($event)"><md-icon class="mdi mdi-dots-vertical text-white"></md-icon></md-button><md-menu-content width="4"><md-menu-item ng-repeat="item in $ctrl.menuItems" ng-if="!item.hide"><md-button ng-click="$ctrl.$menuClick(item)" aria-label="{{item.label | translate}}" class="{{item.labelClass}}" ng-disabled="item.disabled"><md-icon class="{{item.icon}} material-icons"></md-icon>&nbsp;<span translate-once="{{item.label}}"></span></md-button></md-menu-item></md-menu-content></md-menu><md-menu class="md-secondary" ng-if="$ctrl.disabledMenuItems && $ctrl.ngDisabled"><md-button aria-label="Open user interactions menu" class="md-icon-button {{$ctrl.menuClass}}" ng-click="$mdMenu.open($event)"><md-icon class="mdi mdi-dots-vertical text-white"></md-icon></md-button><md-menu-content width="4"><md-menu-item ng-repeat="item in $ctrl.disabledMenuItems" ng-if="!item.hide"><md-button ng-click="$ctrl.$menuClick(item)" aria-label="{{item.label | translate}}" class="{{item.labelClass}}" ng-disabled="item.disabled"><md-icon class="{{item.icon}} material-icons"></md-icon>&nbsp;<span translate-once="{{item.label}}"></span></md-button></md-menu-item></md-menu-content></md-menu></div><div class="flex layout-column layout-align-center-center text-center overflow-hidden card-image" ng-class="{"md-hover-icon": !$ctrl.noHover}" ng-style="$ctrl.$$bgStyle"><div ng-if="$ctrl.imgUrl" class="{{$ctrl.imgContClass}}"><img ng-if="$ctrl.imgUrl" ng-src="{{$ctrl.imgUrl}}" class="{{$ctrl.imgClass}}" lazy-image loaded-class="animated fadeIn"></div><div ng-if="!$ctrl.imgUrl && ($ctrl.iconClass || $ctrl.iconSecondaryClass)"><div class="layout-column layout-padding-sm layout-align-center-center"><div ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "top"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</div><div ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "top"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</div><div><span ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "left"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</span><span ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "left"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</span><md-icon class="{{$ctrl.iconClass}} material-icons"></md-icon><md-icon ng-if="$ctrl.otherIconClass" class="{{$ctrl.otherIconClass}} material-icons"></md-icon><span ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "right"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</span><span ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "right"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</span></div><div ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "bottom"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</div><div ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "bottom"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</div></div></div><div ng-if="$ctrl.showAvatar && !$ctrl.imgUrl && !$ctrl.iconClass && !i$ctrl.conSecondaryClass && ($ctrl.title || $ctrl.description)" class="layout-row layout-align-center-center {{$ctrl.imgContClass}}"><span class="md-display-3 text-uppercase"><span ng-if="$ctrl.title">{{$ctrl.title.charAt(0)}}</span><span ng-if="!$ctrl.title">{{$ctrl.description.charAt(0)}}</span></span></div></div></div><md-divider></md-divider><div class="md-padding layout-column layout-padding-sm flex {{$ctrl.colorClass}}"><div class="layout-column layout-align-center-center"><div class="{{$ctrl.titleClass}} row-mini text-center"><span>{{$ctrl.title}}</span></div><small class="text-center" ng-if="subtitle">{{$ctrl.subtitle}}</small></div><div ng-transclude class="flex layout-column layout-align-center-center card-footer"></div></div></div>'})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.$$timezone=a.secondsToOffsetString(l.offsetSeconds),l.showDate=!_.isBoolean(l.showDate)||l.showDate,l.showTime=!_.isBoolean(l.showTime)||l.showTime,l.dateFormat=l.dateFormat||"mediumDate",l.timeFormat=l.timeFormat||"shortTime",l.$$stop=i(function(){l.$updateDate()},1e3)},this.$onDestroy=function(){i.cancel(l.$$stop)},this.$updateDate=function(){l.$$date=new Date}}t.$inject=["$scope","$element","$attrs","DateUtils","$interval"],angular.module("itaca.components").component("chClock",{bindings:{offsetSeconds:"<",showDate:"<",showTime:"<",dateFormat:"@",timeFormat:"@"},controller:t,template:"<div><div ng-if='$ctrl.showDate'><small>{{$ctrl.$$date|date:$ctrl.dateFormat:$ctrl.$$timezone}}</small></div><div ng-if='$ctrl.showTime'><strong>{{$ctrl.$$date|date:$ctrl.timeFormat:$ctrl.$$timezone}}</strong></div></div>"})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){n.addEventListener("offline",a.$showDialog)},this.$showDialog=function(){function t(t,e){var n=function(){t.hide()};this.$onInit=function(){e.addEventListener("online",n)},this.$onDestroy=function(){e.removeEventListener("online",n)}}t.$inject=["$mdDialog","$window"],e.show({controller:t,escapeToClose:!1,template:'<md-dialog flex="70" aria-label="offline dialog"><md-dialog-content class="md-padding text-center"><div><md-icon class="mdi mdi-close-network md-160"></md-icon></div><h1 class="md-display-1 no-margin"><span translate="alerts.offline.title"></span></h1><h4 class="md-subhead no-margin-top"><span translate="alerts.offline.text"></span></h4></md-dialog-content></md-dialog>'})},this.$onDestroy=function(){n.removeEventListener("offline",a.$showDialog)}}t.$inject=["$scope","$mdDialog","$window"],angular.module("itaca.components").component("chConnectionCheck",{bindings:{},controller:t,template:"<span></span>"})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.btnClass=a.btnClass||"md-fab md-mini",a.btnActiveClass=a.btnActiveClass||"md-primary",a.labelClass=a.labelClass||"text-gray-light text-small",a.count=angular.isNumber(a.count)?a.count:0,a.step=angular.isNumber(a.step)?a.step:1,a.$initWatches()},this.$observeFlexible=function(){a.flexible=_.isBoolean(a.flexible)?a.flexible:n.hasOwnProperty("flexible")&&(void 0===a.flexible||_.isEmpty(a.flexible)||a.flexible),a.flexible&&e.addClass("flex")},this.$observeLabelDirection=function(){a.labelDirection=_.includes(["top","right","bottom","left"],a.labelDirection)?a.labelDirection:"top",a.labelContClass=_.includes(["right","left"],a.labelDirection)?"layout-row":"layout-column"},this.$observeMin=function(){a.min=angular.isNumber(a.min)&&angular.isNumber(a.max)&&a.min>a.max?a.max-a.step:a.min,angular.isNumber(a.min)&&a.count<a.min&&(a.count=a.min)},this.$observeMax=function(){a.max=angular.isNumber(a.max)&&angular.isNumber(a.min)&&a.max<a.min?a.min+a.step:a.max,angular.isNumber(a.max)&&a.count>a.max&&(a.count=a.max)},this.$decrease=function(){a.$isDecreaseDisabled()||(a.count=(a.count||0)-a.step,a.$updateModel(),a.onMinus&&a.onMinus())},this.$increase=function(){a.$isIncreaseDisabled()||(a.count=(a.count||0)+a.step,a.$updateModel(),a.onPlus&&a.onPlus())},this.$isDecreaseDisabled=function(){return a.ngDisabled?a.ngDisabled:a.minusDisabled?a.minusDisabled:angular.isNumber(a.min)&&a.count<=a.min},this.$isIncreaseDisabled=function(){return a.ngDisabled?a.ngDisabled:a.plusDisabled?a.plusDisabled:angular.isNumber(a.max)&&a.count>=a.max},this.$updateModel=function(){a.ngModelCtrl.$setViewValue(a.count)},this.$initWatches=function(){$scope.$watch("flexible",a.$observeFlexible),$scope.$watch("labelDirection",a.$observeLabelDirection),$scope.$watch("min",a.$observeMin),$scope.$watch("max",a.$observeMax)}}t.$inject=["$ctrl","$element","$attrs"],angular.module("itaca.components").component("chCounter",{transclude:!0,require:{ngModelCtrl:"ngModel"},bindings:{flexible:"<?",wrapperClass:"@",btnClass:"@",btnActiveClass:"@",iconClass:"@",iconActiveClass:"@",label:"@",labelClass:"@",labelDirection:"@",count:"=ngModel",countClass:"@",fieldName:"@",min:"<?",max:"<?",step:"<?",ngDisabled:"<?",minusDisabled:"<?",plusDisabled:"<?",onMinus:"&?",onPlus:"&?"},controller:t,template:'<div class="layout-column {{$ctrl.wrapperClass}}" ng-class="{"flex": $ctrl.flexible}" ng-style="{"display": $ctrl.flexible ? "inherit" : "inline-block"}" style="min-width: 150px;"><div class="{{$ctrl.labelContClass}} layout-padding no-padding"><div ng-if="$ctrl.label && ($ctrl.labelDirection == "left" || $ctrl.labelDirection == "top")" class="layout-row layout-align-center-center {{$ctrl.labelClass}}"><span ng-bind-html="$ctrl.label"></span></div><div class="layout-row layout-align-center-center flex"><md-button class="{{$ctrl.btnClass}} no-margin" ng-class="!$ctrl.$isDecreaseDisabled() ? $ctrl.btnActiveClass : """ aria-label="Minus" ng-disabled="$ctrl.$isDecreaseDisabled()" ng-click="$ctrl.$decrease()"><md-icon class="material-icons mdi mdi-minus md-18 {{$ctrl.iconClass}}" ng-class="!$ctrl.$isDecreaseDisabled() ? $ctrl.iconActiveClass : """></md-icon></md-button><div class="layout-column layout-padding layout-align-center-center" ng-class="{"flex": $ctrl.flexible}"><span class="{{$ctrl.countClass}} border-gray-lighter border-radius">{{$ctrl.count || 0}}</span></div><md-button class="{{$ctrl.btnClass}} no-margin" ng-class="!$ctrl.$isIncreaseDisabled() ? $ctrl.btnActiveClass : """ aria-label="Plus" ng-disabled="$ctrl.$isIncreaseDisabled()" ng-click="$ctrl.$increase()"><md-icon class="material-icons mdi mdi-plus md-18 {{$ctrl.iconClass}}" ng-class="!$ctrl.$isIncreaseDisabled() ? $ctrl.iconActiveClass : """></md-icon></md-button></div><div ng-if="$ctrl.label && ($ctrl.labelDirection == "right" || $ctrl.labelDirection == "bottom")" class="layout-row layout-align-center-center {{$ctrl.labelClass}}"><span ng-bind-html="$ctrl.label"></span></div></div><div class="no-padding"><md-input-container md-no-float class="md-block minimal-input no-margin no-padding"><input ng-if="$ctrl.fieldName" type="hidden" name="{{$ctrl.fieldName}}"><small ng-transclude class="no-padding text-center"></small></md-input-container></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.$initWatches()},this.$calculateDiff=function(){var t=a.start?moment(a.start):moment(),e=a.start?moment(a.end):moment();a.$$dateLeft=t.to(e)},this.$initWatches=function(){$scope.$watchGroup([function(){return a.start},function(){return a.end}],a.$calculateDiff)}}t.$inject=["scope","ReservationUtils","$translate"],angular.module("itaca.components").component("chDateLeft",{bindings:{start:"<?",end:"<?"},controller:t,template:"<span>{{$ctrl.$$dateLeft}}</span>"})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.wrapperClass=l.wrapperClass||"md-padding",l.buttonClass=l.buttonClass||"no-padding no-margin layout-padding",l.hasBackdrop=!_.isNil(l.hasBackdrop)&&l.hasBackdrop,l.timezone=_.isBoolean(l.useUtc)&&l.useUtc?"UTC":"";var t=e[0].querySelector(".ch-date-picker-button"),i=n.newPanelPosition().relativeTo(angular.element(t)).addPanelPosition(n.xPosition.CENTER,n.yPosition.BELOW);l.$$config={attachTo:angular.element(document.body),controller:"dateRangeCtrl",controllerAs:"ctrl",templateUrl:"/tpls/date.part",position:i,clickOutsideToClose:!0,disableParentScroll:l.disableParentScroll,hasBackdrop:!a("gt-xs")||l.hasBackdrop,fullscreen:!a("gt-xs"),panelClass:"bg-white md-whiteframe-15dp",trapFocus:!0,onCloseSuccess:function(t,e){_.isBoolean(e)&&e&&(l.updateOriginal(),l.onClose&&l.onClose(l.$$data)),(l.hasBackdrop||l.disableBodyScroll)&&l.$$toggleBodyScroll(!1)},onOpenComplete:function(){(l.hasBackdrop||l.disableBodyScroll)&&l.$$toggleBodyScroll(!0)}}},this.$$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){l.$$data={current:l.ngModel,min:l.minDate,max:l.maxDate};var e={hasConfirm:!_.isBoolean(l.hasConfirm)||l.hasConfirm,showDiff:!_.isBoolean(l.showDiffInCalendar)||l.showDiffInCalendar,diffLabelSingular:l.diffLabelSingular,diffLabelPlural:l.diffLabelPlural,useUtc:!!_.isBoolean(l.useUtc)&&l.useUtc,currentView:"end",data:l.$$data};l.$$config.openFrom=t,l.$$config.hasBackdrop=!a("gt-xs")||l.hasBackdrop,l.$$config.fullscreen=!a("gt-xs"),l.$$config.locals=e,n.open(l.$$config)},this.$updateOriginal=function(){l.$$data&&(l.ngModel=l.$getDate(l.$$data.current),l.minDate=l.$getDate(l.$$data.min),l.maxDate=l.$getDate(l.$$data.max))},this.$getDate=function(t){var e=l.$getMoment(t);return e?e.toDate():null},this.$getMoment=function(t){return t?_.isBoolean(l.useUtc)&&l.useUtc?i.absoluteMoment(t):moment(t):null}}t.$inject=["$scope","$element","$mdPanel","$mdMedia","DateUtils"],angular.module("itaca.components").component("chDatePicker",{require:{ngModelCtrl:"ngModel"},bindings:{buttonClass:"@",wrapperClass:"@",label:"@",ngModel:"=",minDate:"<?",maxDate:"<?",errorMessages:"<?",useUtc:"<?",showDiff:"<?",hasBackdrop:"<?",hasConfirm:"<?",disableParentScroll:"<?",disableBodyScroll:"<?",onClose:"&?",ngDisabled:"<?"},controller:t,template:'<ng-form name="chDateRangeForm" class="flex no-padding layout-column"><md-button class="ch-date-picker-button flex minimal-button text-lowercase text-center {{$ctrl.buttonClass}}" ng-click="$ctrl.$openPanel($event)" aria-label="Change date" ng-disabled="$ctrl.ngDisabled"><div class="{{$ctrl.wrapperClass}}"><div class="no-padding row-mini"><small class="row-mini text-initial" ng-bind-html="$ctrl.label"></small></div><div class="layout-align-center-center layout-row no-padding"><span><md-icon class="mdi mdi-calendar md-32"></md-icon></span><span class="md-display-1 layout-padding">{{$ctrl.ngModel|date:"dd"}}</span><span class="layout-column row-mini"><span class="text-lowercase">{{$ctrl.ngModel|date:"MMM"}}</span><span>{{$ctrl.ngModel|date:"yyyy"}}</span></span></div></div></md-button></ng-form>'})}(),function(){"use strict";function t(t,e,n,a,i){this.$onInit=function(){ctrl.startInputName=ctrl.startInputName||"start",ctrl.endInputName=ctrl.endInputName||"end",ctrl.wrapperClass=ctrl.wrapperClass||"md-padding",ctrl.buttonClass=ctrl.buttonClass||"no-padding no-margin layout-padding",ctrl.hasBackdrop=!_.isNil(ctrl.hasBackdrop)&&ctrl.hasBackdrop,ctrl.$$timezone=_.isBoolean(ctrl.useUtc)&&ctrl.useUtc?"UTC":"",ctrl.labelClass=ctrl.labelClass||"text-gray-light",ctrl.largeTemplate=ctrl.largeTemplate||!1;var t=e[0].querySelector(".ch-date-range-picker-button"),i=n.newPanelPosition().relativeTo(angular.element(t)).addPanelPosition(n.xPosition.CENTER,n.yPosition.BELOW);ctrl.$$config={attachTo:angular.element(document.body),controller:"dateRangeCtrl",controllerAs:"ctrl",templateUrl:"/tpls/date-range.part",position:i,clickOutsideToClose:!0,disableParentScroll:ctrl.disableParentScroll,hasBackdrop:!a("gt-xs")||ctrl.hasBackdrop,fullscreen:!a("gt-xs"),panelClass:"bg-white md-whiteframe-15dp",trapFocus:!0,onCloseSuccess:function(t,e){_.isBoolean(e)&&e&&(ctrl.$updateOriginal(),ctrl.onClose&&ctrl.onClose(ctrl.$$data)),(ctrl.hasBackdrop||ctrl.disableBodyScroll)&&ctrl.$$toggleBodyScroll(!1)},onOpenComplete:function(){(ctrl.hasBackdrop||ctrl.disableBodyScroll)&&ctrl.$$toggleBodyScroll(!0)}},ctrl.calculateDiff()},this.$$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){ctrl.$$data={start:ctrl.start,startMinDate:ctrl.startMinDate,startMaxDate:ctrl.startMaxDate,end:ctrl.end,endMinDate:ctrl.endMinDate,endMaxDate:ctrl.endMaxDate,maxRange:ctrl.maxRange};var e={showDiff:!_.isBoolean(ctrl.showDiffInCalendar)||ctrl.showDiffInCalendar,diffLabelSingular:ctrl.$$diffLabelSingular,diffLabelPlural:ctrl.$$diffLabelPlural,useUtc:!!_.isBoolean(ctrl.useUtc)&&ctrl.useUtc,startTitle:ctrl.startLabel,endTitle:ctrl.endLabel,data:ctrl.$$data};ctrl.$$config.openFrom=t,ctrl.$$config.hasBackdrop=!a("gt-xs")||ctrl.hasBackdrop,ctrl.$$config.fullscreen=!a("gt-xs"),ctrl.$$config.locals=e,n.open(ctrl.$$config)},this.$updateOriginal=function(){ctrl.$$data&&(ctrl.start=ctrl.$getDate(ctrl.$$data.start),ctrl.startMinDate=ctrl.$getDate(ctrl.$$data.startMinDate),ctrl.startMaxDate=ctrl.$getDate(ctrl.$$data.startMaxDate),ctrl.end=ctrl.$getDate(ctrl.$$data.end),ctrl.endMinDate=ctrl.$getDate(ctrl.$$data.endMinDate),ctrl.endMaxDate=ctrl.$getDate(ctrl.$$data.endMaxDate),ctrl.calculateDiff())},this.$getDate=function(t){var e=ctrl.$getMoment(t);return e?e.toDate():null},this.$getMoment=function(t){return t?_.isBoolean(ctrl.useUtc)&&ctrl.useUtc?i.absoluteMoment(t):moment(t):null},this.calculateDiff=function(){(!_.isBoolean(ctrl.showDiff)||ctrl.showDiff)&&ctrl.end&&ctrl.start?ctrl.$$diff=ctrl.$getMoment(ctrl.end).diff(ctrl.$getMoment(ctrl.start),"days"):ctrl.$$diff=null}}t.$inject=["$scope","$element","$mdPanel","$mdMedia","DateUtils"],angular.module("itaca.components").component("chDateRangePicker",{bindings:{buttonClass:"@",wrapperClass:"@",placeholder:"@",label:"@",labelClass:"@",startLabel:"@",startInputName:"@",start:"=",startMinDate:"<?",startMaxDate:"<?",startErrorMessages:"<?",endLabel:"@",endInputName:"@",end:"=",endMinDate:"<?",endMaxDate:"<?",endErrorMessages:"<?",maxRange:"<?",useUtc:"<?",showDiff:"<?",showDiffInCalendar:"<?",diffLabelSingular:"@",diffLabelPlural:"@",hasBackdrop:"<?",largeTemplate:"<?",disableParentScroll:"<?",disableBodyScroll:"<?",onClose:"&?",ngDisabled:"<?"},controller:t,template:'<ng-form name="chDateRangeForm" class="flex no-padding layout-column"><md-button class="ch-date-range-picker-button flex minimal-button text-lowercase text-center {{$ctrl.buttonClass}}" ng-click="$ctrl.$openPanel($event)" aria-label="Change period" ng-disabled="$ctrl.ngDisabled"><div class="{{$ctrl.wrapperClass}}"><div ng-if="$ctrl.label || $ctrl.placeholder" class="md-padding"><div class="{{$ctrl.labelClass}} text-initial text-wrap row-1" ng-class="{"text-small": $ctrl.start || $ctrl.end}"><span ng-if="$ctrl.placeholder && !$ctrl.start && !$ctrl.end" ng-bind-html="$ctrl.placeholder"></span><span ng-if="$ctrl.label && (($ctrl.start || $ctrl.end) || !$ctrl.placeholder)" ng-bind-html="$ctrl.label"></span></div></div><div ng-if="!$ctrl.largeTemplate"><div ng-show="$ctrl.start || $ctrl.end" class="layout layout-wrap layout-align-center-center row-mini"><span><span translate="date.from.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.start|date:"shortDate":$ctrl.$$timezone}}</strong></span>&nbsp;</span><span><span translate="date.to.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.end|date:"shortDate":$ctrl.$$timezone}}</strong></span></span><span ng-if="$ctrl.$$diff" class="{{$ctrl.labelClass}} text-small no-padding no-margin text-lowercase">&nbsp;(<span ng-bind="$ctrl.$$diff">&nbsp;</span><span ng-show="$ctrl.$$diff == 1"><span ng-if="!$ctrl.$$diffLabelSingular" translate="date.day"></span><span ng-if="$ctrl.$$diffLabelSingular" ng-bind="$ctrl.$$diffLabelSingular"></span>)</span><span ng-show="$ctrl.$$diff > 1"><span ng-if="!$ctrl.$$diffLabelPlural" translate="date.days"></span><span ng-if="$ctrl.$$diffLabelPlural" ng-bind="$ctrl.$$diffLabelPlural"></span>)</span></span></div></div><div ng-if="$ctrl.largeTemplate" class="layout-row layout-wrap layout-align-center-center "><div class="layout-column flex-45 row-1"><small class="row-1 text-initial" translate="date.checkin"></small><div class="layout-align-center-center layout-row"><span><md-icon class="mdi mdi-calendar md-32"></md-icon></span><span class="md-display-1 layout-padding">{{$ctrl.start|date:"dd":$ctrl.$$timezone}}</span><span class="layout-column row-mini"><span>{{$ctrl.start|date:"MMM":$ctrl.$$timezone}}</span><span>{{$ctrl.start|date:"yyyy":$ctrl.$$timezone}}</span></span></div></div><div class="layout-column flex text-bold">-</div><div class="layout-column flex-45 row-1"><small class="row-mini text-initial" translate="date.checkout"></small><div class="layout-align-center-center layout-row"><span><md-icon class="mdi mdi-calendar md-32"></md-icon></span><span class="md-display-1 layout-padding">{{$ctrl.end|date:"dd":$ctrl.$$timezone}}</span><span class="layout-column row-mini"><span>{{$ctrl.end|date:"MMM":$ctrl.$$timezone}}</span><span>{{$ctrl.end|date:"yyyy":$ctrl.$$timezone}}</span></span></div></div><div class="layout-column flex-100 row-1"><span ng-if="$ctrl.$$diff" class="{{$ctrl.labelClass}} text-small no-padding no-margin text-lowercase">&nbsp;(<span ng-bind="$ctrl.$$diff">&nbsp;</span><span ng-show="$ctrl.$$diff == 1"><span ng-if="!$ctrl.$$diffLabelSingular" translate="date.day"></span><span ng-if="$ctrl.$$diffLabelSingular" ng-bind="$ctrl.$$diffLabelSingular"></span>)</span><span ng-show="$ctrl.$$diff > 1"><span ng-if="!$ctrl.$$diffLabelPlural" translate="date.days"></span><span ng-if="$ctrl.$$diffLabelPlural" ng-bind="$ctrl.$$diffLabelPlural"></span>)</span></span></div></div></div></md-button><input type="hidden" name="{{$ctrl.startInputName}}" ng-model="start" required><input type="hidden" name="{{$ctrl.endInputName}}" ng-model="end" required><div ng-messages="chDateRangeForm[$ctrl.startInputName].$error" class="font-12 text-center text-danger" ng-show="chDateRangeForm[$ctrl.startInputName].$dirty || chDateRangeForm.$submitted"><span ng-message="required"><span translate-once="error.required"></span></span><span ng-if="$ctrl.startErrorMessages" ng-repeat="error in $ctrl.startErrorMessages" ng-message="error.key"><span translate="error.label"></span></span></div><div ng-messages="chDateRangeForm[$ctrl.endInputName].$error" class="font-12 text-center text-danger" ng-show="!chDateRangeForm[$ctrl.startInputName].$invalid && (chDateRangeForm[$ctrl.endInputName].$dirty || chDateRangeForm.$submitted)"><span ng-message="required"><span translate-once="error.required"></span></span><span ng-if="$ctrl.endErrorMessages" ng-repeat="error in $ctrl.endErrorMessages" ng-message="error.key"><span translate="error.label"></span></span></div></ng-form>'})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.btnClass=l.btnClass||"md-raised md-primary",l.downloadingClass=l.downloadingClass||"md-accent md-hue-2",l.maxRetry=l.maxRetry||1,l.retryDelay=l.retryDelay||5e3},this.$download=function(t){l.$$attempt=1,l.$doDownload(t)},this.$doDownload=function(t){l.$$downloading=!0;var n=function(){l.$$attempt++};e.get(l.url).then(function(e){if(e.data.file){if(bowser.ios){var n={file:e.data.file,filename:e.data.filename,contentType:e.data.contentType,title:l.downloadReadyLabel,downloadLabel:l.downloadLabel};i.downloadFile(t,n)}else{var a=l.$getLinkEl();if(a.href="data:"+(e.data.contentType||"application/octet-stream")+";base64,"+encodeURI(e.data.file),a.setAttribute("download",e.data.filename),document.createEvent){var s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});a.dispatchEvent(s)}else a.fireEvent("click")}l.$$downloading=!1}else l.$manageRetry(!0)},function(t){412!=t.status&&l.$manageRetry(507==t.status)||(a.error((t.data,t.data.message?t.data.message:"")),l.onError&&l.onError({response:t}),l.$$downloading=!1)}).finally(n,n)},this.$manageRetry=function(t){return l.$$attempt<l.maxRetry&&(n(l.$doDownload,t?l.retryDelay:1e3),!0)},this.$getLinkEl=function(){var t=element[0].querySelector(".ch-download-button-link");return null==t&&((t=document.createElement("a")).setAttribute("target","_blank"),t.className="ch-download-button-link",element[0].appendChild(t)),t}}t.$inject=["$scope","$http","$timeout","$log","Dialog"],angular.module("itaca.components").component("chDownloadButton",{bindings:{url:"<",btnClass:"@",label:"@",labelClass:"@",iconClass:"@",downloadingLabel:"@",downloadingClass:"@",downloadReadyLabel:"@",downloadLabel:"@",maxRetry:"<?",retryDelay:"<?",onError:"&?"},controller:t,template:'<span class="no-padding no-margin"><md-button class="{{$ctrl.btnClass}}" ng-click="$ctrl.$download($event)" aria-label="{{$ctrl.label}}" ng-disabled="$ctrl.$$downloading"><span ng-if="!$ctrl.$$downloading" class="layout-row layout-align-center-center"><md-icon ng-show="$ctrl.iconClass" class="material-icons {{$ctrl.iconClass}}"></md-icon><span style="margin-left: 5px" class="{{$ctrl.labelClass}}">{{$ctrl.label}}</span></span><span ng-if="$ctrl.$$downloading" class="layout-row layout-align-center-center"><md-progress-circular class="{{$ctrl.downloadingClass}}" md-mode="indeterminate" md-diameter="20"></md-progress-circular><span style="margin-left: 5px" class="{{$ctrl.labelClass}}">{{$ctrl.downloadingLabel || $ctrl.label}}</span></span></md-button><a class="ch-download-button-link" download target="_blank"></a></span>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.ngDisabled=!!_.isBoolean(a.ngDisabled)&&a.ngDisabled,a.bgClass=a.bgClass||"bg-primary",a.easingClass=a.easingClass||"text-white",a.easingClassLimit=isFinite(parseInt(a.easingClassLimit))?parseInt(a.easingClassLimit):.5,a.easingClassLimit=a.easingClassLimit<=1?a.easingClassLimit:1,a.opacityLimit=isFinite(parseInt(a.opacityLimit))?parseInt(a.opacityLimit):450,a.$$contStyle={position:"fixed",width:"100%",top:"0",left:"0","z-index":"25"},a.$$transStyle={"z-index":"1"},a.$$baseBgStyle="position: absolute; z-index: -1; height: 100%; width: 100%; top: 0; left: 0;",a.$initWatches()},this.$postLink=function(){a.ngDisabled?a.$disableEasing():a.$enableEasing()},this.$enableEasing=function(){a.$$transClass=a.easingClass,angular.element(n).on("scroll",a.$ease)},this.$disableEasing=function(){angular.element(n).off("scroll",a.$ease),a.$$bgStyle=a.$$baseBgStyle+"opacity: 1 !important;",a.$$transClass="",t.$broadcast("easing-bg",{opacity:1})},this.$ease=function(){if(a.ngDisabled)a.$disableEasing();else{var i=angular.element(document.querySelectorAll(".md-select-backdrop, .md-menu-backdrop")),l=0+n.pageYOffset/(a.opacityLimit-e[0].childNodes[0].offsetHeight),s=l>=1?1:l;i.length>0&&(s=1),a.$$bgStyle=a.$$baseBgStyle+"opacity: "+s+"!important;",s<=a.easingClassLimit?a.$$transClass=a.easingClass:a.$$transClass="",t.$broadcast("easing-bg",{opacity:s}),t.$apply()}},this.$initWatches=function(){t.$watch(function(){return a.ngDisabled},function(t){(t=!!_.isBoolean(t)&&t)?a.$disableEasing():a.$enableEasing()})},this.$onDestroy=function(){a.$disableEasing()}}t.$inject=["$scope","$element","$window"],angular.module("itaca.components").component("chEasingBg",{transclude:!0,bindings:{bgClass:"@?",easingClass:"@?",easingClassLimit:"<",opacityLimit:"<",ngDisabled:"<"},controller:t,template:'<div class="ch-easing-bg" ng-style="$ctrl.$$contStyle"><div class="{{$ctrl.bgClass}}" ng-attr-style="{{$ctrl.$$bgStyle}}"></div><div ng-transclude class="{{$ctrl.$$transClass}}" ng-style="$ctrl.$$transStyle"></div></div>'})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.storageUrl?i.initGridList():e.get().then(function(t){i.storageUrl=t.url,i.initGridList()})},this.openGallery=function(t,e){n.showGallery(t,i.galleryTitle,i.gallery,{storageUrl:i.storageUrl,initialSlide:e||0})},this.initGridList=function(){if(!_.isEmpty(i.gallery)){i.ratio=i.ratio||"4:3",i.maxCols=i.gallery.length,i.cols&&(i.colsArray=[],i.totalCols=0,_.forEach(i.cols.split(":"),function(t){var e=Math.abs(parseInt(t));i.totalCols+=e,i.colsArray.push(e)}),i.maxCols=a.lcmArray(i.colsArray),i.maxCols=i.gallery.length<i.colsArray[0]?i.gallery.length:i.maxCols),i.previewGallery=[],i.more=!1;var t=_.size(i.gallery);if(!(t<=0)){if(t>=i.totalCols){var e=i.maxItems?t-i.maxItems:t-i.totalCols;i.previewGallery=_.dropRight(i.gallery,e),i.more=t>i.totalCols}else i.previewGallery=i.gallery;if(i.rowspan&&(i.rowspanArray=[],_.forEach(i.rowspan.split(":"),function(t){i.rowspanArray.push(Math.abs(parseInt(t)))})),i.tilesConfig=[],_.forEach(i.previewGallery,function(t,e){_.isEmpty(i.colsArray)?i.tilesConfig.push({colspan:1}):_.forEach(i.colsArray,function(t,n,a){if(e<(0==n?t:t+a[n-1])||n+1==a.length)return i.tilesConfig.push({colspan:i.maxCols/t}),!1})}),_.size(i.tilesConfig)>1){var n=0;_.forEach(i.tilesConfig,function(t,e){_.isEmpty(i.rowspanArray)?t.rowspan=1:(n+=t.colspan,t.rowspan=i.rowspanArray[Math.ceil(n/i.maxCols)-1]||1)})}else i.tilesConfig[0].rowspan=1}}}}t.$inject=["$scope","AboutStorage","Dialog","NumberUtils"],angular.module("itaca.components").component("chGallery",{require:{},bindings:{gallery:"<?",storageUrl:"<?",galleryTitle:"@",cols:"@",rowspan:"@?",ratio:"@?",maxItems:"<?"},controller:t,template:'<div ng-if="$ctrl.gallery.length"><md-grid-list md-cols="{{$ctrl.maxCols}}" md-row-height="{{$ctrl.ratio}}" md-gutter="6px" md-gutter-gt-sm="4px"><md-grid-tile class="bg-black-light clickable" ng-repeat="photo in $ctrl.previewGallery track by $index" ng-click="$ctrl.openGallery($event, $index)" aria-lable="open gallery" md-colspan="{{$ctrl.tilesConfig[$index].colspan}}" md-rowspan="{{$ctrl.tilesConfig[$index].rowspan}}" style="overflow: hidden;"><span ng-class="{\'locked layout-row layout-align-start-center\': $last && $ctrl.more}"><strong ng-if="$last && $ctrl.more" class="locked-string locked-string-initial bg-opaque-7 text-uppercase"><span ng-if="($ctrl.gallery.length - $ctrl.previewGallery.length) == 1" translate="photo.photo.other.count"></span><span ng-if="($ctrl.gallery.length - $ctrl.previewGallery.length) != 1" translate="photo.photos.other.count" translate-value-count="{{$ctrl.gallery.length - $ctrl.previewGallery.length}}"></span></strong><img ng-src="{{$ctrl.storageUrl + photo.path}}" alt="{{photo.tags[0]}}" lazy-image default-img-url="\'/resources/public/img/no-gallery-image.png\'"></span></md-grid-tile></md-grid-list></div><div ng-if="!$ctrl.gallery.length"><img src="/resources/public/img/no-gallery-image.png" class="full-width"></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){},this.$hotelClick=function(t){e.onHotelClick&&e.onHotelClick({$event:t,hotel:e.hotel})}}t.$inject=["$scope"],angular.module("itaca.components").component("chHotelMapInfoWindow",{require:{chHotelMapCtrl:"^chHotelMap",ngMapCtrl:"ngMap"},bindings:{hotel:"<",showGallery:"<?",markerType:"@",onHotelClick:"&?"},controller:t,template:'<info-window id="hotel-iw"><div ng-non-bindable style="max-width: 300px;"><div ng-if="$ctrl.showGallery" style="width: 100; max-height: 200px" ng-init="config.noTop = true"><div flex ng-controller="slideGalleryCtrl" ng-init="bindGallery($ctrl.hotel.gallery); overrideConfig({autoplay: 0});"><div class="relative"><div class="img-top-bar"><div class="img-top-left-cont layout-row"><div class="md-subhead row-mini" ng-if="$ctrl.hotel.recommended"><small class="label gradient-yellow"><md-icon class="mdi mdi-thumb-up md-14 text-white"></md-icon>&nbsp;<span translate="common.recommended"></span></small></div><div flex></div><span ng-if="$ctrl.hotel" ng-controller="favoriteCtrl" ng-init="init($ctrl.hotel)"><md-button class="md-icon-button bg-opaque-5" ng-click="setFavorite()" aria-label="Like hotel"><md-icon ng-show="!$ctrl.hotel.favorite" class="mdi mdi-heart-outline text-white md-24"></md-icon><md-icon ng-show="$ctrl.hotel.favorite" class="mdi mdi-heart text-danger md-24" ng-class="{\'animated rubberBand\': $ctrl.hotel.favorite}"></md-icon><md-tooltip><span translate="common.favorite.set"></span></md-tooltip></md-button></span></div></div><div ng-show="loading" flex layout layout-align="center center"><md-progress-circular class="md-primary ch-progress" md-mode="indeterminate" md-diameter="40"></md-progress-circular></div><img ng-if="!gallery.length && !loading" class="main-image" ng-attr-alt="{{$ctrl.hotel.name}}" src="/resources/public/img/header.jpg"><ks-swiper-container class="button-mini" ng-if="gallery.length && galleryConfig.storageUrl && !loading"override-parameters="{grabCursor: galleryConfig.navButtons,keyboardControl: galleryConfig.keyboardControl,onSlideChangeStart: loadImageTags,centeredSlides: galleryConfig.centered,autoplayDisableOnInteraction: galleryConfig.autoplayDisableOnInteraction,preloadImages: !galleryConfig.lazyLoading,lazyLoading: galleryConfig.lazyLoading,lazyLoadingInPrevNext: galleryConfig.lazyLoading,pagination: false,watchSlidesVisibility: galleryConfig.lazyLoading && (galleryConfig.slidesPerView == \'auto\' || galleryConfig.slidesPerView > 1)}"container-cls="index-0 bg-gray-base"wrapper-cls="layout-row layout-align-start-center"pagination-cls="swiper-pagination-white"slides-per-view="galleryConfig.slidesPerView"slides-per-column="galleryConfig.slidesPerColumn"centered="galleryConfig.centered"autoplay="galleryConfig.autoplay"direction="{{galleryConfig.direction}}"show-nav-buttons="galleryConfig.navButtons"pagination-is-active="galleryConfig.pagination"pagination-clickable="galleryConfig.paginationClickable"initial-slide="galleryConfig.initialSlide"space-between="galleryConfig.spaceBetween"loop="galleryConfig.loop"><ks-swiper-slide slider-cls="no-bg" ng-class="{\'text-center\': galleryConfig.centered}" ng-repeat="image in gallery track by $index"><div ng-if="!galleryConfig.lazyLoading" class="main-image" ng-style="{\'background-image\': \'url(\'+galleryConfig.storageUrl + image.path+\')\'}"></div><div ng-if="galleryConfig.lazyLoading" ng-attr-data-background="{{galleryConfig.storageUrl}}{{image.path}}" class="main-image swiper-lazy"><div class="swiper-lazy-preloader swiper-lazy-preloader-white"></div></div></ks-swiper-slide></ks-swiper-container></div></div></div><div layout="column" class="md-padding no-padding-left no-padding-right no-padding-bottom text-left"><div layout><div flex><div md-truncate><span class="md-subhead">{{$ctrl.hotel.name}}</span></div><div layout><div flex><div><small class="label label-inline-block gradient-gray text-white text-wrap"><span translate="hotel.type.{{$ctrl.hotel.type}}"></span></small></div><div class="md-body-1 text-gray-light"><span>{{$ctrl.hotel.addressInfo.district}}</span>,&nbsp;<strong>{{$ctrl.hotel.addressInfo.city}}</strong></div><div class="md-body-1 text-gray-light"><md-icon class="mdi mdi-map-marker md-14"></md-icon>&nbsp;<small><em>{{$ctrl.hotel.addressInfo.address}},&nbsp;{{$ctrl.hotel.addressInfo.zipcode}}</em></small></div></div><div ng-if="$ctrl.markerType == \'price\'"><md-button ng-if="$ctrl.hotel.price" class="only-border border-success text-success no-margin-top no-margin-right"><div class="row-mini text-left"><div layout="column"><small><span class="text-initial" translate="common.from"></span><i ng-if="$ctrl.hotel.price.amount.initialAmount > 0 && $ctrl.hotel.price.amount.initialAmount > $ctrl.hotel.price.amount.finalAmount">&nbsp;<del>{{$ctrl.hotel.price.amount.initialAmount|chCurrency}}</del></i></small><span class="md-subhead row-mini"><strong>{{($ctrl.hotel.price.amount.finalAmount|chCurrency)}}</strong></span><small ng-if="$ctrl.hotel.nights > 0" class="text-lowercase"><span translate="common.for"></span>&nbsp;{{$ctrl.hotel.nights}}&nbsp;<span ng-show="$ctrl.hotel.nights == 1" translate="common.night"></span><span ng-show="$ctrl.hotel.nights > 1" translate="common.nights"></span></small></div></div></md-button><div ng-if="!$ctrl.hotel.price" layout="column" class="text-warn"><md-icon class="mdi mdi-emoticon-sad md-32 text-warn"></md-icon><strong translate="reservation.availability.missed"></strong></div></div></div></div></div><div ng-if="$ctrl.markerType == \'price\'"><div layout layout-padding layout-wrap class="no-padding-right no-padding-left no-padding-bottom" ng-if="$ctrl.hotel.price && $ctrl.hotel.roomsCounter.actual >= 1"><div flex-xs="100" flex-gt-xs layout layout-align="start center" class="text-success no-padding-left"><strong><em translate="reservation.availability.ok.simple"></em></strong></div><div flex-xs="100" flex layout="column" class="no-padding"><md-button class="bg-success no-margin-left no-margin-right" ng-click="$ctrl.$hotelClick()" aria-label="Book now"><span translate="common.book"></span></md-button></div></div><div layout layout-padding layout-wrap class="no-padding-right no-padding-left no-padding-bottom" ng-if="!$ctrl.hotel.price || $ctrl.hotel.roomsCounter.actual <= 0"><div flex-xs="100" flex-gt-xs layout layout-align="start center" class="text-warn no-padding-left"><strong><em translate="reservation.availability.missed.full"></em></strong></div><div flex-xs="100" flex layout="column" class="no-padding"><md-button class="bg-warn no-margin-left no-margin-right" ng-click="$ctrl.$hotelClick()" aria-label="Search other dates"><span translate="reservation.view.other.period"></span></md-button></div></div></div></div></div></info-window>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.$$markerIcon="/resources/public/img/map-marker.01.png",e.$getMarkerPosition()},this.$getMarkerPosition=function(){if(e.hotel){var t=e.hotel.addressInfo.address+", "+e.hotel.addressInfo.city+", "+e.hotel.addressInfo.zipcode;e.chHotelMapCtrl.$$geocoder.geocode({address:t},function(n,a){a==google.maps.GeocoderStatus.OK?e.$$position=n[0].geometry.location:console.error("Error geocoding hotel '"+e.hotel.name+"' (address: "+t+"): "+a)})}},this.$setSelected=function(t,e){t&&(t.selectEffect=!1,t.selected=!_.isBoolean(e)||e)},this.$showDetails=function(t,n){e.chHotelMapCtrl.$$currHotel&&e.chHotelMapCtrl.$$currHotel.id==t.id||(e.$hideDetails(ev,e.chHotelMapCtrl.$$currHotel),e.setSelected(t,!0),e.chHotelMapCtrl.$$currHotel=t),e.chHotelMapCtrl.map.showInfoWindow("hotel-iw",n?"cmk_"+t.id:"mk_"+t.id)},this.$hideDetails=function(t){e.$setSelected(t,!1),e.chHotelMapCtrl.map.hideInfoWindow("hotel-iw")}}t.$inject=["$scope"],angular.module("itaca.components").component("chHotelMapMarker",{require:{chHotelMapCtrl:"^chHotelMap"},bindings:{hotel:"<",markerType:"@"},controller:t,template:'<div ng-if="$ctrl.hotel" ng-switch="$ctrl.markerType"><div ng-switch-when="pointer"><marker class="clickable" id="mk_{{$ctrl.hotel.id}}" ng-if="$ctrl.$$position" position="[{{$ctrl.$$position.lat()}}, {{$ctrl.$$position.lng()}}]" icon="{{$ctrl.$$markerIcon}}" on-mouseover="$ctrl.$showDetails($ctrl.hotel);"></marker></div><div ng-switch-default><custom-marker id="cmk_{{$ctrl.hotel.id}}" ng-if="$ctrl.$$position" position="[{{$ctrl.$$position.lat()}}, {{$ctrl.$$position.lng()}}]"on-click="$ctrl.$showDetails($ctrl.hotel, true)" on-mouseover="$ctrl.$setSelected($ctrl.hotel, true)" on-mouseout="$ctrl.$setSelected($ctrl.hotel, false)"><div class="clickable" ng-class="{\'animated bounce\': $ctrl.hotel.selected && $ctrl.hotel.selectEffect}"><div class="ch-marker-inner md-caption" ng-class="{\'bg-primary\': $ctrl.markerType == \'name\' || $ctrl.hotel.selected,\'bg-primary-light\': $ctrl.markerType == \'price\' && !$ctrl.hotel.selected && $ctrl.hotel.price ,\'bg-gray-light\': $ctrl.markerType == \'price\' && !$ctrl.hotel.selected && !$ctrl.hotel.price}" ng-switch="$ctrl.markerType"><span ng-switch-when="price"><div ng-if="$ctrl.hotel.price"><span>{{($ctrl.hotel.price.amount.finalAmount|chCurrency)}}</span></div><div ng-if="!$ctrl.hotel.price"><md-icon class="mdi mdi-emoticon-sad md-18 text-white"></md-icon></div></span><strong ng-switch-default>{{$ctrl.hotel.name}}</strong></div><div class="arrow-down arrow-sm" ng-class="{\'border-primary\': $ctrl.markerType == \'name\' || $ctrl.hotel.selected,'+"'border-primary-light': $ctrl.markerType == 'price' && !$ctrl.hotel.selected && $ctrl.hotel.price ,'border-gray-light': $ctrl.markerType == 'price' && !$ctrl.hotel.selected && !$ctrl.hotel.price}\"></div></div></custom-marker></div></div>"})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.contClass=e.contClass||"layout-row",e.optionClass=e.optionClass||"flex md-raised",e.$select(),e.$initWatches()},this.$select=function(t){var n=Math.floor(_.isNil(t)?e.ngModel:t),a=_.find(e.options,{value:n});return e.$$colorClass=a?a.colorClass:null,_.forEach(e.options,function(t){t.selected=t.value==n}),!0},this.$preview=function(t){_.isEqual(e.$$previewOpt,t)||(e.$$previewOpt=angular.copy(t))},this.$cancelPreview=function(){e.$$previewOpt=null},this.$updateModel=function(t){e.ngModel=t.value,e.$cancelPreview()},this.$initWatches=function(){t.$watchCollection(function(){return e.$$previewOpt},function(t,n){t?n&&t.value==n.value||e.$select(t.value):e.$select()})}}t.$inject=["$scope"],angular.module("itaca.components").component("chIconSelect",{transclude:!0,require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",options:"<",ngDisabled:"<?",contClass:"@?",optionClass:"@?"},controller:t,template:'<div class="ch-icon-select {{$ctrl.contClass}}"><md-button ng-repeat="option in $ctrl.options" class="ch-icon-select-option no-margin no-padding minimal-button text-wrap text-initial {{$ctrl.optionClass}}" ng-class="{\'md-hover-icon\': !option.selected}"ng-click="$ctrl.$updateModel(option)" aria-label="{{option.label || (option.labelKey|translate)}}" ng-disabled="$ctrl.ngDisabled"><div ng-if="option.iconClass" class="no-padding" layout layout-align="center center"><span><md-icon class="layout-padding material-icons {{option.iconClass}} {{option.colorClass}}"  ng-mouseover="$ctrl.$preview(option)" ng-mouseout="$ctrl.$cancelPreview()"></md-icon></span></div><div ng-if="option.label || option.labelKey" class="text-small no-padding row-1 md-icon-text {{option.colorClass}}"><span ng-if="option.label" ng-bind="option.label"></span><span ng-show="!option.label && option.labelKey"><span translate="{{option.labelkey}}"></span></span></div ></md-button></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.progressDiameter=e.progressDiameter||80}}t.$inject=["$scope"],angular.module("itaca.components").component("chLoadingModal",{bindings:{message:"<",messageKey:"<",progressDiameter:"@",contClass:"@"},controller:t,template:'<div flex layout="column" layout-padding layout-align="center center" class="ch-loading-modal {{$ctrl.contClass}}"><div><md-progress-circular class="md-primary ch-progress" md-mode="indeterminate" md-diameter="{{$ctrl.progressDiameter}}"></md-progress-circular></div><div ng-if="$ctrl.message || $ctrl.messageKey" class="text-center"><span ng-if="$ctrl.message" ng-bind="$ctrl.message"></span><span ng-if="!$ctrl.message && $ctrl.messageKey" translate="{{$ctrl.messageKey}}"></span></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$postLink=function(){n.$hideSiblings(n.hideSiblings)},this.$onInit=function(){n.contClass=n.contClass||"bg-primary text-white md-title",n.progressDiameter=n.progressDiameter||150,n.$initWatches()},this.$onDestroy=function(){n.$hideSiblings(!1)},this.$hideSiblings=function(t){var n=e.parent().children();t?n.addClass("ng-hide"):n.removeClass("ng-hide"),e.removeClass("ng-hide")},this.$initWatches=function(){t.$watch(function(){return n.hideElement},function(t,e){n.$toggleEl(e,!0),n.$toggleEl(t)})}}t.$inject=["$scope","$element"],angular.module("itaca.components").component("chLoadingProgress",{bindings:{message:"<",messageKey:"<",errorMessage:"<",errorMessageKey:"<",progressDiameter:"@",contClass:"@",hideSiblings:"<"},controller:t,template:'<div flex="100" layout="column" layout-align="center center" class="{{$ctrl.contClass}}"><div ng-if="!$ctrl.errorMessage && !$ctrl.errorMessageKey" flex layout="column" layout-padding layout-align="center center"><div><md-progress-circular class="ch-progress-white" md-mode="indeterminate" md-diameter="{{$ctrl.progressDiameter}}"></md-progress-circular></div><div ng-if="$ctrl.message || $ctrl.messageKey" class="text-center"><span ng-if="$ctrl.message" ng-bind="$ctrl.message"></span><span ng-if="!$ctrl.message && $ctrl.messageKey" translate="{{$ctrl.messageKey}}"></span></div></div><div ng-if="$ctrl.errorMessage || $ctrl.errorMessageKey" flex layout="column" layout-padding layout-align="center center"><div><md-icon class="mdi mdi-alert-circle-outline md-70 text-white"></md-icon></div><div class="md-display-2">Oops...</div><div><span ng-if="$ctrl.errorMessage" ng-bind="$ctrl.errorMessage"></span><span ng-if="!$ctrl.errorMessage && $ctrl.errorMessageKey" translate="{{$ctrl.errorMessageKey}}"></span></div></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;a.$onInit=function(){a.$$originalValue=a.referTo||angular.copy(a.ngModel),a.cssClass=a.cssClass||"label bg-blue-sea"}}t.$inject=["$scope","$element","$attrs"],angular.module("itaca.components").component("chOriginalValue",{require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",referTo:"=?",label:"@",filter:"@",cssClass:"@"},controller:t,template:'<span class="{{$ctrl.cssClass}}" ng-if="$ctrl.$$originalValue != $ctrl.ngModel"><span>{{$ctrl.label}}:&nbsp;</span><span ng-if="$ctrl.filter">{{::($ctrl.$$originalValue|useFilter:$ctrl.filter)}}</span><span ng-if="!$ctrl.filter">{{::$ctrl.$$originalValue}}</span></span>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.theme=_.includes(["dark","light"],n.theme)?n.theme:"light",n.iconClass=n.iconClass||"dark"!=n.theme?"text-white":"",n.size=_.includes(["big","small"],_.toLower(n.size))?n.size:"small",n.people=n.people||{},n.max=n.max||n.people.adults,n.$$maxUnderages=_.max([n.people.boys,n.people.children,n.people.kids]),n.$$maxUnderages=n.$$maxUnderages>n.max?n.max:n.$$maxUnderages,n.$$peopleDetails={adults:n.people.adults},n.extraMax=n.extraMax||(n.extraPeople?_.max([n.extraPeople.adults,n.extraPeople.boys,n.extraPeople.children,n.extraPeople.kids]):0),n.$$extra$$maxUnderages=n.extraPeople?_.max([n.extraPeople.boys,n.extraPeople.children,n.extraPeople.kids]):0,n.$$extra$$maxUnderages=n.$$extra$$maxUnderages>n.extraMax?n.extraMax:n.$$extra$$maxUnderages,n.$$extraPeopleDetails=n.extraPeople&&n.extraPeople.adults?{adults:n.extraPeople.adults}:n.extraPeople},this.$openDetails=function(t){_.isBoolean(n.hideDetails)&&n.hideDetails||e.paxDetails(t,{people:n.people,extraPeople:n.extraPeople,max:n.max,extraMax:n.extraMax})}}t.$inject=["$scope","Dialog"],angular.module("itaca.components").component.directive("chPeopleIcons",{bindings:{people:"<",max:"<?",extraPeople:"<?",extraMax:"<?",hideDetails:"<?",hideInfoIcon:"<?",hideTooltip:"<?",hidePeople:"<?",hideExtraPeople:"<?",size:"@",theme:"@",iconClass:"@"},controller:t,template:'<div flex layout="column"><md-button class="minimal-button no-margin" ng-class="{"layout-padding-sm": $ctrl.size == "big"}" ng-click="$ctrl.$openDetails($event)" aria-label="Show pax details"><span layout layout-wrap layout-align="center center"><small ng-if="!$ctrl.hidePeople && $ctrl.people.adults"><span ng-if="$ctrl.size == "small"">{{$ctrl.people.adults}}</span><md-icon class="material-icons mdi {{$ctrl.iconClass}}" ng-class="{"mdi-account-multiple" : $ctrl.people.adults > 1, "mdi-account": $ctrl.people.adults == 1, "md-18": $ctrl.size == "small", "md-48": $ctrl.size == "big"}"></md-icon><span ng-if="$ctrl.size == "big" && !$ctrl.hideDetails && !$ctrl.hideInfoIcon">&nbsp;<md-icon class="material-icons mdi mdi-information-outline md-14 {{$ctrl.iconClass}}"></md-icon></span><div ng-if="$ctrl.size == "big"" class="row-1 text-wrap"><ch-people-summary class="text-lowercase" people="$ctrl.$$peopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.beds.principal.into"></span></div></small><small ng-if="!$ctrl.hideExtraPeople && ($ctrl.extraPeople.adults || $ctrl.extraPeople.boys || $ctrl.extraPeople.children || $ctrl.extraPeople.kids)"><span ng-if="!$ctrl.hidePeople">&nbsp;+&nbsp;</span><span ng-if="$ctrl.size == "small""><span ng-if="$ctrl.extraPeople.adults">{{$ctrl.extraPeople.adults}}</span><span ng-if="!$ctrl.extraPeople.adults && $$extra$$maxUnderages">{{$ctrl.$$extra$$maxUnderages}}</span></span><md-icon ng-if="$ctrl.extraPeople.adults" class="material-icons mdi {{$ctrl.iconClass}}" ng-class="{"mdi-account-multiple" : $ctrl.extraPeople.adults > 1, "mdi-account": $ctrl.extraPeople.adults == 1, "md-18": $ctrl.size == "small", "md-48": $ctrl.size == "big"}"></md-icon><md-icon ng-if="!$ctrl.extraPeople.adults && $ctrl.$$extra$$maxUnderages" class="material-icons mdi mdi-human-child {{$ctrl.iconClass}}" ng-class="{"md-14": $ctrl.size == "small", "md-36": $ctrl.size == "big"}"></md-icon><span ng-if="$ctrl.size == "big" && !$ctrl.hideDetails && !$ctrl.hideInfoIcon">&nbsp;<md-icon class="material-icons mdi mdi-information-outline md-14 {{$ctrl.iconClass}}"></md-icon></span><div ng-if="$ctrl.size == "big"" class="row-1 text-wrap"><ch-people-summary class="text-lowercase" people="$ctrl.$$extraPeopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.otherbeds.into"></span></div></small><span ng-if="$ctrl.size == "small" && !$ctrl.hideDetails && !$ctrl.hideInfoIcon">&nbsp;<md-icon class="material-icons mdi mdi-information-outline md-14 {{$ctrl.iconClass}}"></md-icon></span><md-tooltip ng-if="!$ctrl.hideTooltip" class="auto-height text-wrap row-mini"><div class="text-wrap"><span ng-if="!$ctrl.hidePeople && $ctrl.people.adults"><ch-people-summary class="text-lowercase" people="$ctrl.$$peopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.beds.principal.into"></span></span><span ng-if="!$ctrl.hideExtraPeople && ($ctrl.extraPeople.adults || $ctrl.extraPeople.boys || $ctrl.extraPeople.children || $ctrl.extraPeople.kids)"><span ng-if="!$ctrl.hidePeople">&nbsp;+&nbsp;</span><ch-people-summary class="text-lowercase" people="$ctrl.$$extraPeopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.otherbeds.into"></span></span><span ng-if="$ctrl.$$maxUnderages || $ctrl.$$extra$$maxUnderages" class="text-lowercase">&nbsp;+&nbsp;<span translate="common.options.more.available"></span></span><div ng-if="!$ctrl.hideDetails"><em translate="common.information.further.click"></em></div></div></md-tooltip></span></md-button></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.containerClass=n.containerClass||"md-block",n.people=n.people||{},n.inputName=n.inputName||"people",n.mdNoAsterisk=!_.isNil(n.mdNoAsterisk)&&n.mdNoAsterisk,n.$$data={people:n.people},n.$initWhatches()},this.$observeOriginal=function(){n.$$data=n.$$data||{},n.$$data.people=n.people},this.$observeWorking=function(){_.assign(n.people,n.$$data.people),e.peopleSummary(n.$$data.people).then(function(t){n.$$peopleSummary=t})},this.$initWhatches=function(){t.$watchCollection(function(){return n.people},n.$observeOriginal),t.$watchCollection(function(){return n.$$data.people},n.$observeWorking)}}t.$inject=["$scope","ReservationUtils"],angular.module("itaca.components").component("chPeopleInput",{bindings:{containerClass:"@",inputLabel:"@",inputName:"@",people:"=",ngRequired:"<?",mdNoAsterisk:"<?",hasClose:"<?"},controller:t,template:'<ng-form name="chPeopleInputForm"><md-input-container class="{{$ctrl.containerClass}}"><label><span ng-if="!$ctrl.inputLabel" translate="people.people"></span><span ng-if="$ctrl.inputLabel" ng-bind="$ctrl.inputLabel"></span></label><input type="area" name="{{$ctrl.inputName}}" ng-model="$ctrl.$$peopleSummary" class="clickable" on-click-panel=""/tpls/pax-counters.part"" has-backdrop="false"disable-parent-scroll="true" data="$ctrl.$$data" readonly ng-required="$ctrl.ngRequired" md-no-asterisk="mdNoAsterisk" has-close="$ctrl.hasClose"><div ng-messages="chPeopleInputForm[$ctrl.inputName].$error"><span ng-message="required"><span translate="error.required"></span></span></div></md-input-container></ng-form>'})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.fieldName=i.fieldName||"people",i.clickOutsideToClose=i.clickOutsideToClose||!0,i.hasBackdrop=!_.isNil(i.hasBackdrop)&&i.hasBackdrop,i.buttonClass=i.buttonClass||"no-margin",i.labelClass=i.labelClass||"text-gray-light",i.$$xPosition="CENTER",i.$$yPosition="BELOW",i.$$panelClass="bg-white md-whiteframe-15dp";var t=n.newPanelPosition().relativeTo(e).addPanelPosition(n.xPosition[i.$$xPosition],n.yPosition[i.$$yPosition]);i.$$panelConfig={attachTo:angular.element(document.body),controller:"basePeopleCountPanelCtrl",controllerAs:"ctrl",templateUrl:"/tpls/pax-counters.part",position:t,clickOutsideToClose:i.clickOutsideToClose,disableParentScroll:i.disableParentScroll,hasBackdrop:i.hasBackdrop,fullscreen:!!_.isBoolean(i.fullscreen)&&i.fullscreen,panelClass:i.$$panelClass,locals:{data:i.$$workingData,maxCount:i.maxCount,hasConfirm:i.hasConfirm,hasClose:i.hasClose},onCloseSuccess:function(t,e){(!(!!_.isBoolean(i.hasConfirm)&&i.hasConfirm)||_.isBoolean(e)&&e)&&(_.assign(i.people,i.$$workingData.people),i.onClose&&i.onClose({people:i.people})),(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!1)},onOpenComplete:function(){(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!0)}},i.zIndex&&(i.$$panelConfig.zIndex=i.zIndex),i.$initWatches()},this.$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){i.people=i.people||{},i.$$workingData={people:angular.copy(i.people)},i.$$panelConfig.openFrom=t,i.$$panelConfig.locals={hasConfirm:i.hasConfirm,hasClose:i.hasClose},i.$$panelConfig.locals.data=i.$$workingData,i.$$panelConfig.locals.maxCount=i.maxCount,n.open(i.$$panelConfig)},this.$checkPeople=function(){i.$$hasPeople=i.people&&(i.people.adults||i.people.boys||i.people.children||i.people.kids);var t=i.chPeoplePickerForm[i.fieldName];if(t&&(i.$$hasPeople&&t.$setDirty(),i.minCount)){var e=a.guestsCount(i.people);e&&e.standard<i.minCount?t.$setValidity("min",!1):t.$setValidity("min",!0)}},this.$initWatches=function(){t.$watchCollection(function(){return i.people},function(t,e){i.$checkPeople()}),t.$watchCollection(function(){return i.minCount},function(t,e){i.$checkPeople()})}}t.$inject=["$scope","$element","$mdPanel","ReservationUtils"],angular.module("itaca.components").component("chPeoplePicker",{bindings:{buttonClass:"@",wrapperClass:"@",label:"@",labelClass:"@",people:"=",fieldName:"@",ngRequired:"<?",ngDisabled:"<?",hasBackdrop:"<?",hasConfirm:"<?",hasClose:"<?",disableParentScroll:"<?",disableBodyScroll:"<?",clickOutsideToClose:"<?",onClose:"&?",zIndex:"@",fullscreen:"<?",maxCount:"<?",minCount:"<?",errorMessages:"<?",showErrorIcon:"<?"},controller:t,template:'<ng-form name="chPeoplePickerForm" class="flex no-padding layout-column"><md-button class="ch-people-picker-button flex layout-padding no-padding minimal-button text-lowercase text-center {{$ctrl.buttonClass}}" aria-label="Change people" ng-disabled="$ctrl.ngDisabled" ng-click="$ctrl.$openPanel($event)"><div class="{{$ctrl.wrapperClass}}"><div ng-if="$ctrl.label" class="md-padding"><div class="{{$ctrl.labelClass}} text-initial text-wrap row-1" ng-class="{"text-small": $ctrl.$$hasPeople}"><span ng-bind-html="$ctrl.label"></span></div></div><div ng-show="$ctrl.$$hasPeople" class="md-subhead text-wrap row-mini"><strong><ch-people-summary people="$ctrl.people"></ch-people-summary></strong></div></div><input type="hidden" name="{{$ctrl.fieldName}}" ng-model="$ctrl.people" ng-required="$ctrl.ngRequired"><div ng-messages="chPeoplePickerForm[$ctrl.fieldName].$error" ng-show="chPeoplePickerForm[$ctrl.fieldName].$dirty" class="text-danger text-small text-center row-1 no-padding layout-column layout-padding-sm"><div ng-message="required"><md-icon ng-if="$ctrl.showErrorIcon" class="mdi mdi-alert-outline material-icons md-18 text-danger"></md-icon><span class="text-wrap" translate="error.required"></span></div><div ng-message="min"><md-icon ng-if="$ctrl.showErrorIcon" class="mdi mdi-alert-outline material-icons md-18 text-danger"></md-icon><span class="text-wrap" ng-if="$ctrl.errorMessages.min" ng-bind="$ctrl.errorMessages.min"></span><span class="text-wrap" ng-if="!$ctrl.errorMessages.min" translate="error.field.min" translate-value-num="{{$ctrl.minCount}}"></span></div></div></md-button></ng-form>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.$initWatches()},this.$updateSummary=function(){if(a.noDetails){var t=e.guestsCount(a.people,a.extraPeople);!t&&t.total<=0?n("people.none").then(function(t){a.$$peopleSummary=t}):n("people.pax").then(function(e){a.$$peopleSummary=t.total+" "+e})}else e.peopleSummary(a.people,a.extraPeople).then(function(t){a.$$peopleSummary=t})},this.$initWatches=function(){t.$watchCollection(function(){return a.people},a.$updateSummary),t.$watchCollection(function(){return a.extraPeople},a.$updateSummary),t.$watchCollection(function(){return a.noDetails},a.$updateSummary)}}t.$inject=["$scope","ReservationUtils","$translate"],angular.module("itaca.components").component("chPeopleSummary",{bindings:{people:"<",extraPeople:"<?",noDetails:"<?"},controller:t,template:"<span>{{$ctrl.$$peopleSummary}}</span>"})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.noAsterisk=!!_.isBoolean(i.noAsterisk)&&i.noAsterisk,i.inputName=i.inputName||"phone",i.ngPattern=i.ngPattern||n.phone,i.$$phone={},i.$$searchTerm={value:""},i.$decompilePhone(),i.$loadPrefixes(),i.$initWatches()},this.$loadPrefixes=function(){a.all().then(function(t){_.forEach(t.content,function(t){t.code=t.code.toLowerCase()}),i.prefixes=t.content},function(t){e.error(t)})},this.$decompilePhone=function(){i.$$phone=i.$$phone||{},i.ngModel&&a.decompile(i.ngModel).then(function(t){_.assign(i.$$phone,t),_.isObject(t.prefix)||(i.$$phone.prefix={dial_code:t.prefix})},function(t){_.assign(i.$$phone,a.decompileSimple(i.ngModel)),i.$$phone.prefix={dial_code:i.$$phone.prefix}})},this.$clearSearchTerm=function(){i.$$searchTerm.value=""},this.$updateModel=function(){i.ngModel=i.$$phone&&i.$$phone.prefix&&i.$$phone.prefix.dial_code?a.compile(i.$$phone.prefix.dial_code,i.$$phone.number):i.ngModel},this.$initWatches=function(){t.$watchCollection(function(){return i.$$phone},function(t,e){i.$updateModel()})}}t.$inject=["$scope","$log","REGEXP","PhoneList"],angular.module("itaca.components").component("chPhoneInput",{require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",inputName:"@",label:"@",placeholder:"@",prefixLabel:"@",prefixPlaceholder:"@",searchPlaceholder:"@",ngPattern:"<",ngRequired:"=?",ngDisabled:"=?",errorMessages:"<",prefixErrorMessages:"<",noAsterisk:"<"},controller:t,template:'<ng-form name="chPhoneInputForm" ng-class="{\'text-gray-light cursor-disabled\': $ctrl.ngDisabled}" layout><div><md-input-container class="md-block"><label ng-show="$ctrl.prefixLabel">{{$ctrl.prefixLabel}}</label><md-select name="prefix" placeholder="{{$ctrl.prefixPlaceholder}}" ng-model="phone.prefix" ng-required="$ctrl.ngRequired" ng-disabled="$ctrl.ngDisabled" ng-attr-md-no-asterisk="$ctrl.noAsterisk" md-container-class="selectHeader" aria-label="prefix" md-on-close="$ctrl.$clearSearchTerm()"><md-subheader class="no-padding"><md-select-header class="select-header bg-white"><input ng-model="$ctrl.$$searchTerm.value" type="search" ng-keydown="$event.stopPropagation()" placeholder="{{$ctrl.searchPlaceholder}}"class="header-searchbox md-text" autofocus></md-select-header></md-subheader><md-option ng-repeat="prefix in $ctrl.prefixes | filter:searchTerm.value" ng-value="prefix" ng-selected="prefix.dial_code == $ctrl.$$phone.prefix.dial_code"><span class="flag-icon flag-icon-{{::prefix.code}}"></span><strong>&nbsp;{{::prefix.name}}</strong><span>&nbsp;({{::prefix.dial_code}})</span></md-option></md-select><div ng-if="$ctrl.prefixErrorMessages" ng-messages="chPhoneInputForm.prefix.$error"><div ng-repeat="errMsg in $ctrl.prefixErrorMessages track by $index" ng-message="{{errMsg.error}}">{{errMsg.message}}</div></div></md-input-container></div><div flex><md-input-container class="md-block no-padding-important"><label ng-if="$ctrl.label">{{$ctrl.label}}</label><input type="text" name="{{$ctrl.inputName}}" placeholder="{{$ctrl.placeholder}}" ng-model="$ctrl.$$phone.number" ng-pattern="$ctrl.ngPattern" \tng-required="$ctrl.ngRequired" ng-disabled="$ctrl.ngDisabled" aria-label="{{$ctrl.label || $ctrl.placeholder}}"><div ng-if="$ctrl.errorMessages" ng-messages="chPhoneInputForm[$ctrl.inputName].$error"><div ng-repeat="errMsg in $ctrl.errorMessages track by $index" ng-message="{{errMsg.error}}">{{errMsg.message}}</div></div></md-input-container></div></ng-form>'})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.type=_.includes(["nightly","normal"],_.toLower(i.type))?_.toLower(i.type):"normal",i.hasBackdrop=!_.isNil(i.hasBackdrop)&&i.hasBackdrop;var t=e[0].querySelector(".ch-price-range-button"),l=n.newPanelPosition().relativeTo(angular.element(t)).addPanelPosition(n.xPosition.CENTER,n.yPosition.BELOW);i.$$config={attachTo:angular.element(document.body),controller:"priceSliderCtrl",controllerAs:"ctrl",templateUrl:"/tpls/reservation-price-slider.part",position:l,clickOutsideToClose:!0,disableParentScroll:i.disableParentScroll,hasBackdrop:!a("gt-sm")||i.hasBackdrop,fullscreen:!a("gt-sm"),panelClass:"panel-medium bg-white md-whiteframe-15dp",trapFocus:!0,onCloseSuccess:function(t,e){(!(!_.isBoolean(i.hasConfirm)||i.hasConfirm)||_.isBoolean(e)&&e)&&i.$updateOriginal(),(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!1)},onOpenComplete:function(){(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!0)}}},this.$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){i.$$data={min:i.min,max:i.max};var e={hasConfirm:!_.isBoolean(i.hasConfirm)||i.hasConfirm,title:i.title,subtitle:i.subtitle,data:i.$$data};i.$$config.openFrom=t,i.$$config.hasBackdrop=!a("gt-sm")||i.hasBackdrop,i.$$config.fullscreen=!a("gt-sm"),i.$$config.locals=e,n.open(i.$$config)},this.$updateOriginal=function(){i.$$data&&(i.min=i.$$data.min,i.max=i.$$data.max)}}t.$inject=["$scope","$element","$mdPanel","$mdMedia"],angular.module("itaca.components").component("chPriceRangePicker",{bindings:{min:"=?",max:"=?",title:"@",subtitle:"@",wrapperClass:"@",buttonClass:"@",type:"@",disableParentScroll:"<?",disableBodyScroll:"<?",hasBackdrop:"<?",hasConfirm:"<?",hasClose:"<?",ngDisabled:"<?"},controller:t,template:'<ng-form name="chPriceRangePickerForm" class="flex no-padding layout-column"><md-button class="ch-price-range-picker-button flex minimal-button text-initial {{$ctrl.buttonClass}}" ng-click="$ctrl.$openPanel($event)" aria-label="Change price range" ng-disabled="$ctrl.ngDisabled"><div class="{{$ctrl.wrapperClass}}"><div ng-show="$ctrl.max" class="text-wrap row-mini"><strong ng-show="$ctrl.min">{{$ctrl.min|chCurrency}}&nbsp;-&nbsp;</strong><span ng-show="!$ctrl.min"><span translate="common.up.to"></span>&nbsp;</span><strong>{{$ctrl.max|chCurrency}}</strong>&nbsp;<span ng-if="$ctrl.type == \'nightly\'" class="text-lowercase" translate="service.type.payment.NIGHTLY"></span></div><div ng-show="!$ctrl.max"><span translate="filter.by"></span>&nbsp;<span class="text-lowercase" translate="common.price"></span></div></div></md-button></ng-form>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewActionsContent",{transclude:!0,require:{chReviewActionsCtrl:"^chReviewActions"},controller:function(){var t=this;this.$onInit=function(){t.chReviewActionsCtrl.noDefault=!0},this.$onDestroy=function(){t.chReviewActionsCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.hideUser=_.isBoolean(n.hideUser)?n.hideUser:n.chReviewCtrl.hideUser,n.hideLikes=_.isBoolean(n.hideLikes)?n.hideLikes:n.chReviewCtrl.hideLikes,n.$initReview()},this.$initReview=function(){n.chReviewCtrl.review&&(n.review=n.chReviewCtrl.review)},this.$userClick=function(t){n.userState?e.goToState(n.userState,n.userStateParams):n.userClick&&n.userClick({$event:t,review:n.review})},this.$likeClick=function(t){n.likeClick&&n.likeClick({$event:t,review:n.review})}}t.$inject=["$scope","Navigator"],angular.module("itaca.components").component("chReviewActions",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{hideUser:"<?",userState:"@?",userStateParams:"<?",userClick:"&?",hideLikes:"<?",likeLabel:"@?",unlikeLabel:"@?",likeClick:"&?"},controller:t,template:'<div flex><div ng-if="!$ctrl.noDefault && (!$ctrl.hideUser || !$ctrl.hideLikes)" class="bg-gray-lighter flex layout-row layout-wrap layout-padding"><div class="layout-row layout-padding-sm no-padding no-outline" ng-class="{\'clickable\': $ctrl.userState || $ctrl.userClick}" ng-click="$ctrl.$userClick($event)" aria-label="Toggle user action"><div><span ng-if="$ctrl.userAvatar && $ctrl.review.reviewSettings.showAvatar && !$ctrl.review.reviewSettings.anonymous"class="relative menu-user-avatar-small display-block overflow-hidden"><img alt="User profile image" class="full-width" ng-src="{{$ctrl.userAvatar}}" lazy-image /></span><span ng-if="(!$ctrl.review.reviewSettings.showAvatar || !$ctrl.userAvatar) && !$ctrl.review.reviewSettings.anonymous"class="bg-blue-sea menu-user-avatar-small layout-row layout-align-center-center"><span class="md-headline text-uppercase">{{!$ctrl.review.reviewSettings.showRealName && ($ctrl.review.createdBy || $ctrl.review.reservation.guest).nickname ? ($ctrl.review.createdBy || $ctrl.review.reservation.guest).nickname.charAt(0) : ($ctrl.review.createdBy || $ctrl.review.reservation.guest).name.charAt(0)}}</span></span><md-icon ng-if="$ctrl.review.reviewSettings.anonymous" class="mdi mdi-account-circle md-38"></md-icon></div><div class="layout-align-center-start layout-column no-padding-bottom no-padding-top row-1"><small class="font-10 text-gray-light row-1"><span translate="common.written.by.female"></span>:</small><strong class="md-subhead"><span ng-if="!$ctrl.review.reviewSettings.anonymous && ($ctrl.review.createdBy || $ctrl.review.reservation.guest)"><span ng-if="!$ctrl.review.reviewSettings || $ctrl.review.reviewSettings.showRealName || !$ctrl.review.createdBy.nickname"><span ng-if="$ctrl.review.createdBy">{{::$ctrl.review.createdBy.name}}&nbsp;{{::$ctrl.review.createdBy.surname}}</span><span ng-if="!$ctrl.review.createdBy && $ctrl.review.reservation.guest">{{::$ctrl.review.reservation.guest.name}}&nbsp;{{::$ctrl.review.reservation.guest.surname}}</span></span><span ng-if="$ctrl.review.reviewSettings && !$ctrl.review.reviewSettings.showRealName && $ctrl.review.createdBy.nickname"><span ng-if="$ctrl.review.createdBy">{{::$ctrl.review.createdBy.nickname}}</span><span ng-if="!$ctrl.review.createdBy && $ctrl.review.reservation.guest">{{::$ctrl.review.reservation.guest.nickname}}</span></span></span><span ng-if="$ctrl.review.reviewSettings.anonymous || (!$ctrl.review.createdBy && !$ctrl.review.reservation.guest)" translate="common.anonymous"></span></strong><small class="font-10 text-gray-light row-1 text-lowercase" ng-if="!$ctrl.review.reviewSettings.anonymous && $ctrl.review.guest.reviewsCount"><span>{{::$ctrl.review.guest.reviewsCount}}&nbsp;</span><span ng-if="$ctrl.review.guest.reviewsCount == 1" translate="reviews.review"></span><span ng-if="$ctrl.review.guest.reviewsCount != 1" translate="reviews.reviews"></span></small></div></div><div ng-if="!$ctrl.hideLikes" class="no-padding flex-gt-sm flex-xs-100 flex-sm-100 layout-row layout-align-center-center layout-align-gt-sm-end-center"><md-button class="auto-height md-primary md-raised no-margin" ng-click="$ctrl.$likeClick($event)" aria-label="Toggle like"><md-icon ng-show="!$ctrl.review.helpful" class="mdi md-18 mdi-thumb-up"></md-icon>&nbsp;<small ng-if="!$ctrl.review.helpful"><span ng-if="!$ctrl.likeLabel" translate="review.likes.button"></span><span ng-if="$ctrl.likeLabel" ng-bind="$ctrl.likeLabel"></span></small><small ng-if="$ctrl.review.helpful"><span ng-if="!$ctrl.unlikeLabel" translate="review.likes.button.undo"></span><span ng-if="$ctrl.unlikeLabel" ng-bind="$ctrl.unlikeLabel"></span></small></md-button></div></div><div flex ng-transclude></div><md-divider></<md-divider></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.dateFormat=e.dateFormat||e.chReviewCtrl.dateFormat,e.hideLikes=_.isBoolean(e.hideLikes)?e.hideLikes:e.chReviewCtrl.hideLikes,e.$initReview()},this.$initReview=function(){e.chReviewCtrl.review&&(e.review=e.chReviewCtrl.review,e.review.showDetails=!0)}}t.$inject=["$scope"],angular.module("itaca.components").component("chReviewContent",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{dateFormat:"@?",hideLikes:"<?"},controller:t,template:'<div><div class="layout-row layout-wrap layout-align-center-center layout-padding"><div class="layout-column flex-xs-100 flex-sm-100 flex-gt-sm"><div ng-show="!$ctrl.review.showDetails"><div class="md-margin ng-scope no-margin-top no-margin-x-sides"><small><span translate="review.score.total"></span>:</small><md-progress-linear md-mode="determinate" value="{{($ctrl.review.score * 10)}}"></md-progress-linear></div></div><div ng-show="$ctrl.review.showDetails"><div ng-repeat="feedback in $ctrl.review.feedbacks track by $index" class="md-margin ng-scope no-margin-top no-margin-x-sides"title="{{::feedback.value}}" ng-switch="feedback.type"><small class="layout-row flex-100"><span class="flex" translate="{{::feedback.titleKey}}" translate-values="{{feedback.titleParams}}"></span><span ng-if="feedback.type == \'RANK\'">{{::feedback.value}}</span></small><md-progress-linear ng-switch-when="RANK" md-mode="determinate" value="{{(feedback.value * 10)}}"></md-progress-linear><div ng-switch-default><small ng-if="feedback.value">{{feedback.value}}</small><small ng-if="!feedback.value" class="text-gray-light text-lowercase"><em>({{::(\'review.comment.none\'|translate)}})</em></small></div></div></div><div class="text-right"><md-button class="auto-height no-margin row-1 text-capitalize text-gray-light text-small" ng-click="$ctrl.review.showDetails = !$ctrl.review.showDetails" aria-label="show details"><span ng-if="!$ctrl.review.showDetails" translate="common.show"></span><span ng-if="$ctrl.review.showDetails" translate="common.hide"></span>&nbsp;<span class="text-lowercase" translate="common.details"></span><md-icon ng-class="$ctrl.review.showDetails ? \'mdi-chevron-up\' : \'mdi-chevron-down\'" class="mdi md-18"></md-icon></md-button></div></div><div class="flex-100 flex-gt-sm-20 layout-column" ng-class="$ctrl.review.showDetails ? \'layout-align-center-center\' : \'layout-align-start-center\'"><small ng-if="$ctrl.review.showDetails" class="font-12 text-gray-light text-center" translate="review.score.total"></small><span class="md-headline">{{::$ctrl.review.score.toFixed(1)}}</span><span class="text-center" translate="{{$ctrl.review.label}}"></span></div></div><div ng-transclude></div><div ng-if="$ctrl.review.createdDate" class="layout-padding"><small class="text-gray-light">{{$ctrl.review.createdDate|utcDate:$ctrl.dateFormat}}</small></div><md-divider></<md-divider><div ng-if="!$ctrl.hideLikes && $ctrl.review.likes.length" class="bg-gray-lighter"><div class="layout-padding"><small class="text-primary"><md-icon class="mdi md-14 mdi-thumb-up text-primary"></md-icon>&nbsp;<span ng-if="!$ctrl.review.helpful" class="text-lowercase"><span>{{$ctrl.review.likes.length}}&nbsp;</span><span ng-if="$ctrl.review.likes.length == 1" translate="review.likes.count"></span><span ng-if="$ctrl.review.likes.length != 1" translate="review.likes.count.plur"></span></span><span ng-if="$ctrl.review.helpful"><span ng-if="$ctrl.review.likes.length == 1" translate="review.likes.you"></span><span ng-if="$ctrl.review.likes.length != 1" translate="review.likes.you.other" translate-values="{num: $ctrl.review.likes.length}"></span></span></small></div><md-divider></<md-divider></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.imgBaseUrl=a.imgBaseUrl||a.chReviewCtrl.imgBaseUrl,_.isBoolean(a.imgBaseUrl)&&(a.imgBaseUrl=a.imgBaseUrl&&t.config&&t.config.amz?t.config.amz.baseUrl+"/"+t.config.amz.bucketName+"/":""),a.defaultImgUrl=a.defaultImgUrl||"/resources/public/img/no-gallery-image.png",a.$initReview()},this.$initReview=function(){a.chReviewCtrl.review&&(a.review=a.chReviewCtrl.review)},this.$openGallery=function(t,i){e(a.review.label).then(function(e){var l=a.review.score+":&nbsp;";l+=a.review.title?a.review.title:e,n.showGallery(t,l,a.review.gallery,{storageUrl:a.imgBaseUrl,initialSlide:i||0})})}}t.$inject=["AppOptions","$translate","Dialog"],angular.module("itaca.components").component("chReviewGallery",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{imgBaseUrl:"@?",defaultImgUrl:"@?",title:"@"},controller:t,template:'<div ng-if="$ctrl.review.gallery.length" flex layout-padding><div class="layout-row layout-wrap layout-padding-sm layout-align-center-center layout-align-gt-sm-start-center"><span class="flex-100 font-12 ng-scope no-padding-bottom text-gray-light"><span ng-if="!$ctrl.title"><span translate="common.gallery"></span>:</span><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></span></span><div ng-repeat="photo in $ctrl.review.gallery" class="clickable" ng-click="$ctrl.$openGallery($event, $index)" aria-label="Open review gallery"><img ng-src="{{$ctrl.imgBaseUrl + photo.path}}" alt="{{photo.tags[0]}}" lazy-imagedefault-img-url="{{$ctrl.defaultImgUrl}}" class="width-100"></div></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.hideImage=!!_.isBoolean(n.hideImage)&&n.hideImage,n.imgBaseUrl=n.imgBaseUrl||n.chReviewCtrl.imgBaseUrl,_.isBoolean(n.imgBaseUrl)&&(n.imgBaseUrl=n.imgBaseUrl&&e.config&&e.config.amz?e.config.amz.baseUrl+"/"+e.config.amz.bucketName+"/":""),n.$initReview(),n.$getHotelImage()},this.$initReview=function(){n.chReviewCtrl.review&&(n.review=n.chReviewCtrl.review)},this.$getHotelImage=function(){var t=null;_.forEach(n.review.hotel.gallery,function(e,a,i){if(0==a&&(t=n.imgBaseUrl+e.path),e.cover)return t=n.imgBaseUrl+e.path,!1}),n.$$hotelImage=t}}t.$inject=["$scope","AppOptions"],angular.module("itaca.components").component("chReviewHotelInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{hideImage:"<?",imgBaseUrl:"@?"},controller:t,template:'<div flex layout-padding class="md-subhead row-mini text-bold"><a ng-href="{{\'/hotel/\'+ $ctrl.review.hotel.id}}" target="_blank" class="display-block clickable"><span class="layout-row layout-align-start-center"><img ng-if="!$ctrl.hideImage && $ctrl.$$hotelImage" class="md-margin menu-user-avatar-small no-margin-left no-margin-y-sides" ng-src="{{$ctrl.$$hotelImage}}"><span class="no-padding layout-column"><span><span class="text-primary">{{::$ctrl.review.hotel.name}}&nbsp;</span><span class="label label-xs" translate="hotel.type.{{::$ctrl.review.hotel.type}}"></span></span><small class="text-gray-light"><span>{{::$ctrl.review.hotel.addressInfo.city}}</span>,&nbsp;<span>{{::$ctrl.review.hotel.addressInfo.address}}</span></small></span></span></a></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewProCon",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{textLimit:"<?"},controller:function(){var t=this;this.$onInit=function(){t.textLimit=isFinite(parseInt(t.textLimit))?parseInt(t.textLimit):200,t.$initReview()},this.$initReview=function(){t.chReviewCtrl.review&&(t.review=t.chReviewCtrl.review)}},template:'<div ng-if="$ctrl.review.pro || $ctrl.review.con" flex layout-padding><div ng-if="$ctrl.review.pro" class="md-padding no-padding-top"><md-icon class="mdi mdi-thumb-up-outline text-success md-24"></md-icon>&nbsp;<strong><span translate="review.pro"></span>:</strong><div class="layout-margin no-margin-x-sides text-ellipsis"><span hm-read-more hm-text="{{$ctrl.review.pro}}" hm-limit="$ctrl.textLimit"hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}"hm-link-class="clickable text-primary"></span></div></div><div ng-if="$ctrl.review.con" class="md-padding no-padding-top"><md-icon class="mdi mdi-thumb-down-outline text-warn md-24"></md-icon>&nbsp;<strong><span translate="review.con"></span>:</strong><div class="layout-margin no-margin-x-sides text-ellipsis"><span hm-read-more hm-text="{{$ctrl.review.con}}" hm-limit="$ctrl.textLimit"hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}"hm-link-class="clickable text-primary"></span></div></div></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewReplyContent",{transclude:!0,require:{chReviewReplyCtrl:"^chReviewReply"},controller:function(){var t=this;this.$onInit=function(){t.chReviewReplyCtrl.noDefault=!0},this.$onDestroy=function(){t.chReviewReplyCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.ngReadonly=!_.isBoolean(e.ngReadonly)||e.ngReadonly,e.ngReadonly&&(e.$$currentMode="view"),e.ngEdit=!!_.isBoolean(e.ngEdit)&&e.ngEdit,e.responseClass=e.responseClass||"bg-info-light",e.arrowClass=e.arrowClass||"border-info-light",e.$initReview()},this.$initReview=function(){e.chReviewCtrl.review&&(e.review=e.chReviewCtrl.review,e.ngReadonly||e.review.reply&&e.review.reply.response||(e.$$currentMode="edit"))},this.$editReply=function(t){e.ngReadonly?e.$cancelReplyEdit(t):(e.$$reply=angular.copy(e.review.reply.response),e.$$currentMode="edit")},this.$cancelReplyEdit=function(t){e.$$reply=null,e.$$currentMode="view"},this.$sendReply=function(t){e.review.reply.response=angular.copy(e.$$reply),e.onReply&&e.onReply({$event:t,reply:e.review.reply.response}),e.$cancelReplyEdit(t)}}t.$inject=["$scope"],angular.module("itaca.components").component("chReviewReply",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{ngReadonly:"<?",ngEdit:"<?",title:"@",onReply:"&?",responseClass:"@?",arrowClass:"@?"},controller:t,template:'<div ng-show="!$ctrl.ngReadonly || $ctrl.review.reply.response || $ctrl.noDefault" class="ch-review-reply"><div class="ch-review-reply-arrow {{$ctrl.arrowClass}}"></div><div class="layout-padding no-padding ch-review-reply-inner {{$ctrl.responseClass}}"><div ng-if="!$ctrl.noDefault" class="layout-padding-sm"><div><strong><span ng-if="!$ctrl.title"><span translate="common.answer"></span>:</span><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></strong></div><div ng-if="$ctrl.$$currentMode == \'view\'"><div class="text-ellipsis text-wrap"><span hm-read-more hm-text="{{$ctrl.review.reply.response}}" hm-limit="200" hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}" hm-link-class="clickable text-primary"></span></div><div ng-if="!$ctrl.ngReadonly"><md-button ng-if="$ctrl.ngEdit" class="minimal-button no-margin-x-sides auto-height row-1 text-initial" ng-click="$ctrl.$editReply($event)" aria-label="Edit reply"><small translate="common.edit"></small></md-button></div></div><div ng-if="$ctrl.$$currentMode == \'edit\'" layout layout-padding-sm><div flex><md-input-container md-no-float class="md-block bg-white minimal-input no-margin"><textarea placeholder="{{\'review.reply.label\'|translate}}..." ng-model="$ctrl.$$reply" max-rows="5" md-no-resize></textarea></md-input-container></div><div layout layout-align="center end" class="no-padding"><md-button class="md-icon-button md-raised" ng-disabled="!$ctrl.$$reply" ng-click="$ctrl.$sendReply($event)" aria-label="Send reply"><md-icon class="mdi mdi-send md-24"></md-icon></md-button></div></div></div><div ng-transclude class="no-padding"></div></div></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewReportInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},controller:function(){var t=this;this.$onInit=function(){t.$initReview()},this.$initReview=function(){t.chReviewCtrl.review&&(t.review=t.chReviewCtrl.review)}},template:'<div class="no-padding flex" ng-if="$ctrl.review.reportType"><div><md-icon class="mdi md-18 mdi-flag-variant text-danger"></md-icon><small translate="review.reporting.label"></small></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.appOptions=t,this.portalIcons=e.portalIcons(),this.$onInit=function(){a.textLimit=isFinite(parseInt(a.textLimit))?parseInt(a.textLimit):200,a.$initReview()},this.$initReview=function(){a.chReviewCtrl.review&&(a.review=a.chReviewCtrl.review,a.$getPeriod())},this.$getPeriod=function(){var t=n.absoluteMoment(a.review.reservation.checkin),e=n.absoluteMoment(a.review.reservation.checkout);t.get("month")==e.get("month")?a.$$period=t.format("MMMM YYYY"):a.$$period=t.format("MMMM YYYY")+"/"+e.format("MMMM YYYY")}}t.$inject=["AppOptions","IconUtils","DateUtils"],angular.module("itaca.components").component("chReviewReservationInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{title:"@"},controller:t,template:'<div layout-padding><div class="no-padding-bottom no-padding-right"><div><small><span ng-if="!$ctrl.title"><span translate="review.source"></span>&nbsp;</span><span ng-if="$ctrl.title"><span ng-bind="$ctrl.title"></span>&nbsp;</span><strong ng-switch="$ctrl.review.reservation.source"><span ng-switch-when="PORTAL">{{$ctrl.appOptions.about.uiName}}</span><span ng-switch-default translate="channel.source.{{$ctrl.review.reservation.source.toLowerCase()}}"></span></strong></small><span><md-icon class="{{$ctrl.portalIcons[$ctrl.review.reservation.source]}} channel-icon-mini"></md-icon></span></div><div ng-if="$ctrl.$$period"><small ng-bind="$ctrl.$$period"></small></div></div></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewTitleContent",{transclude:!0,require:{chReviewTitleCtrl:"^chReviewTitle"},controller:function(){var t=this;this.$onInit=function(){t.chReviewTitleCtrl.noDefault=!0},this.$onDestroy=function(){t.chReviewTitleCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t,e,n){t.$mdMedia=n;var a=this;this.$onInit=function(){a.titleQuote=!_.isBoolean(a.titleQuote)||a.titleQuote,a.hideNewIcon=!!_.isBoolean(a.hideNewIcon)&&a.hideNewIcon,a.$initReview()},this.$initReview=function(){a.chReviewCtrl.review&&(a.review=a.chReviewCtrl.review)}}t.$inject=["$scope","ReviewsUtils","$mdMedia"],angular.module("itaca.components").component("chReviewTitle",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{titleQuote:"@?",hideNewIcon:"<?"},controller:t,template:'<div flex><div ng-if="!$ctrl.noDefault" class="flex layout-padding"><div class="md-subhead flex ellipsis text-wrap"><span ng-if="!$ctrl.hideNewIcon && $ctrl.review.isNew"><md-icon class="material-icons mdi mdi-new-box text-info"></md-icon>&nbsp;</span><strong><em ng-if="$ctrl.review.title"><span ng-if="$ctrl.titleQuote">&ldquo;</span><span ng-bind="$ctrl.review.title"></span><span ng-if="$ctrl.titleQuote">&bdquo;</span></em><span ng-if="!$ctrl.review.title"><span translate="{{$ctrl.review.label}}"></span></span></strong></div></div><div ng-transclude></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.newLimit=_.isFinite(parseInt(a.newLimit))?parseInt(a.newLimit):7,a.hideUser=!!_.isBoolean(a.hideUser)&&a.hideUser,a.hideLikes=!!_.isBoolean(a.hideLikes)&&a.hideLikes,a.imgBaseUrl=a.imgBaseUrl||!0,_.isBoolean(a.imgBaseUrl)&&(a.imgBaseUrl=a.imgBaseUrl&&n.config&&n.config.amz?n.config.amz.baseUrl+"/"+n.config.amz.bucketName+"/":""),a.$initReview()},this.$initReview=function(){a.review&&(a.review.isNew=moment().isBefore(moment(a.review.createdDate).add(a.newLimit,"days")),a.review.label=e.generateScoreLabel(Math.floor(a.review.score)),a.$getUserAvatar(),a.$initLikes(),a.$initWatches())},this.$initLikes=function(){a.review.helpful=n.guest&&n.guest.id&&_.some(a.review.likes,function(t){return _.isEqual(t,n.guest.id)})},this.$getUserAvatar=function(){var t=n.config.amz.baseUrl+"/"+n.config.amz.bucketName+"/";if(a.review.createdBy&&a.review.createdBy.avatarType)switch(a.review.createdBy.avatarType){case"PORTAL":a.userAvatar=a.review.createdBy.avatar?t+a.review.createdBy.avatar:null;break;case"FACEBOOK":a.userAvatar=a.review.createdBy.facebookImage;break;case"GOOGLE":a.userAvatar=a.review.createdBy.googleImage;break;default:a.userAvatar=a.review.createdBy.avatar?t+a.review.createdBy.avatar:null}a.review.reviewSettings=_.isObjectLike(a.review.reviewSettings)?a.review.reviewSettings:{},a.review.reviewSettings.showRealName=!_.isBoolean(a.review.reviewSettings.showRealName)||a.review.reviewSettings.showRealName},this.$initWatches=function(){t.$watchCollection(function(){return a.review.likes},function(t,e){a.$initLikes(),a.review.thanksNow=!_.isEqual(t,e)&&Boolean(a.review.helpful)})}}t.$inject=["$scope","ReviewsUtils","AppOptions"],angular.module("itaca.components").component("chReview",{transclude:!0,bindings:{review:"<",newLimit:"@?",dateFormat:"@?",hideUser:"<?",hideLikes:"<?",imgBaseUrl:"@?"},controller:t,template:"<div ng-transclude></div>"})}(),function(){"use strict";angular.module("itaca.components").component("chReviewsSummaryDetails",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{progressClass:"@?",size:"@?"},controller:function(){var t=this;this.$onInit=function(){t.progressClass=t.progressClass||"md-primary",t.size=_.includes(["small","big"],_.toLower(t.size))?_.toLower(t.size):"small",t.$initSummary()},this.$initSummary=function(){t.chReviewsSummaryCtrl.summary&&(t.summary=t.chReviewsSummaryCtrl.summary)},this.$onDestroy=function(){}},template:'<div class="flex layout-column layout-padding-sm"><ch-reviews-summary-progress ng-repeat="entry in $ctrl.summary.reviewsScoreMap track by $index" value="entry.key" count="entry.value" size="{{$ctrl.size}}" progress-class="{{$ctrl.progressClass}}"></ch-review-summary-progress></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewsSummaryGar",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{title:"@?",subtitle:"@?",bgClass:"@?"},controller:function(){var t=this;this.$onInit=function(){t.bgClass=t.bgClass||"bg-primary",t.$$hideTitle=_.isBoolean(t.title)&&!t.title,t.$$hideSubtitle=_.isBoolean(t.subtitle)&&!t.subtitle,t.$initSummary()},this.$initSummary=function(){t.chReviewsSummaryCtrl.summary&&(t.summary=t.chReviewsSummaryCtrl.summary)},this.$onDestroy=function(){}},template:'<div ng-if="$ctrl.summary.gar" class="layout-column layout-padding layout-align-center-center no-padding"><div class="border-radius layout-column layout-align-center-center layout-padding {{$ctrl.bgClass}}"><strong class="md-subhead" translate="{{$ctrl.summary.garLabel}}"></strong><span class="md-display-3 no-padding-top">{{$ctrl.summary.gar.toFixed(1)}}</span><small ng-if="!$ctrl.$$hideTitle" class="no-padding-bottom"><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></span><span ng-if="!$ctrl.subtitle" translate="review.score.total"><span></small></div><div ng-if="!$ctrl.$$hideSubtitle"><small><span ng-if="$ctrl.subtitle" ng-bind="$ctrl.subtitle"></span><span ng-if="!$ctrl.subtitle" translate="review.reviews.real" translate-values="{num: $ctrl.summary.totalReviews}"></span></small></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$mdMedia=e,this.$onInit=function(){n.progressClass=n.progressClass||"md-primary",n.size=_.includes(["small","big"],_.toLower(n.size))?_.toLower(n.size):"small","big"==n.size&&(n.$$sizeClass="md-progress-linear-big"),n.$initSummary(),n.$initWatches()},this.$initSummary=function(){n.chReviewsSummaryCtrl.summary&&(n.summary=n.chReviewsSummaryCtrl.summary)},this.$initWatches=function(){t.$watch(function(){return n.count},n.$calculatePercentage)},this.$calculatePercentage=function(){n.$$percentage=Math.round(100*(n.count||0)/(n.summary.totalReviews||1))},this.$onDestroy=function(){}}t.$inject=["$scope","$mdMedia"],angular.module("itaca.components").component("chReviewsSummaryProgress",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{value:"<",count:"<",progressClass:"@?",size:"@?"},controller:t,template:'<div title="{{$ctrl.$$percentage + \'%\'}}" ng-class="$ctrl.$mdMedia(\'gt-sm\')? \'no-padding-bottom\' : \'no-padding-left no-padding-right\'"><small><span ng-switch="$ctrl.value"><span ng-switch-when="4"><span translate="review.score.bad"></span>&nbsp;<em>(4)</em>:</span><span ng-switch-when="5"><span translate="review.score.poor"></span>&nbsp;<em>(5)</em>:</span><span ng-switch-when="6"><span translate="review.score.sufficient"></span>&nbsp;<em>(6)</em>:</span><span ng-switch-when="7"><span translate="review.score.good"></span>&nbsp;<em>(7)</em>:</span><span ng-switch-when="8"><span translate="review.score.very.good"></span>&nbsp;<em>(8)</em>:</span><span ng-switch-when="9"><span translate="review.score.excellent"></span>&nbsp;<em>(9)</em>:</span><span ng-switch-when="10"><span translate="review.score.fabulous"></span>&nbsp;<em>(10)</em>:</span></span></small><div class="layout-row layout-align-start-center"><div flex><md-progress-linear md-mode="determinate" value="{{$ctrl.$$percentage}}" class="{{$ctrl.$$sizeClass}}" ng-class="$ctrl.count > 0 ? $ctrl.progressClass : \'md-accent\'"></md-progress-linear></div><div class="text-right" style="width: 55px"><small>&nbsp;{{$ctrl.$$percentage + \'%\'}}&nbsp;({{$ctrl.count}})</small></div></div></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.$initSummary()},this.$initSummary=function(){if(!e.summary){var n=[];_.forEach(_.rangeRight(4,11),function(t){n.push({key:t,value:0})}),e.summary={totalReviews:0,gar:null,reviewsScoreMap:n}}e.summary.reviewsScoreMap=_.orderBy(e.summary.reviewsScoreMap,["key"],["desc"]),e.summary.garLabel=t.generateScoreLabel(Math.floor(e.summary.gar))},this.$onDestroy=function(){}}t.$inject=["ReviewsUtils"],angular.module("itaca.components").component("chReviewsSummary",{transclude:!0,bindings:{summary:"<"},controller:t,template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.services=_.isArray(e.services)?e.services:e.chRoomCtrl.popularServices}}t.$inject=["$scope"],angular.module("itaca.components").component("chRoomBestServices",{require:{chRoomCtrl:"^chRoom"},bindings:{services:"<?"},controller:t,template:'<div layout layout-wrap layout-align="end start" ng-if="$ctrl.services.length"><span ng-repeat="service in $ctrl.services track by $index"><span><md-icon class="{{service.icon}} layout-padding no-padding-top" ng-class="{\'text-white\': $ctrl.chRoomCtrl.room.gallery.length}"></md-icon><md-tooltip ng-if="service.label || service.labelKey"><span ng-if="service.label" ng-bind="service.label"></span><span ng-if="!service.label" translate="{{service.labelKey}}"></span></md-tooltip></span></span></div>'})}(),function(){"use strict";function t(t){this.$onInit=function(){}}t.$inject=["$scope"],angular.module("itaca.components").component("chRoomContent",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:"<ng-transclude></ng-transclude>",transclude:!0})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.chRoomCtrl.storageUrl||e.get().then(function(t){l.chRoomCtrl.storageUrl=t.url}),n([l.chRoomCtrl.room.roomType.nameKey,"room.category."+l.chRoomCtrl.room.category]).then(function(t){l.title=t[l.chRoomCtrl.room.roomType.nameKey]+" <small>("+t["room.category."+l.chRoomCtrl.room.category].toUpperCase()+")</small>"})},this.openGallery=function(t){n([l.chRoomCtrl.room.roomType.nameKey,"room.category."+l.chRoomCtrl.room.category]).then(function(e){var n=e[l.chRoomCtrl.room.roomType.nameKey]+" <small>("+e["room.category."+l.chRoomCtrl.room.category].toUpperCase()+")</small>";a.showGallery(t,n,_.sortBy(l.chRoomCtrl.room.gallery,[function(t){return Boolean(t.cover)}]),{storageUrl:l.chRoomCtrl.storageUrl})})}}t.$inject=["$scope","AboutStorage","$translate","Dialog","NumberUtils"],angular.module("itaca.components").component("chRoomGallery",{require:{chRoomCtrl:"^chRoom",chRoomHeaderCtrl:"^chRoomHeader"},bindings:{cols:"@",rowspan:"@?",ratio:"@?",maxItems:"<?"},controller:t,template:'<ch-gallery gallery="$ctrl.chRoomCtrl.room.gallery" gallery-title="{{$ctrl.title}}" storage-url="$ctrl.chRoomCtrl.storageUrl" cols="{{$ctrl.cols}}" rowspan="{{$ctrl.rowspan}}" ratio="{{$ctrl.ratio}}" max-items="$ctrl.maxItems"></ch-gallery>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$mdMedia=e,this.$onInit=function(){a.chRoomCtrl.showRoomRates=!1,a.chRoomCtrl.showRoomInfo=!1},this.toggleInfo=function(){a.chRoomCtrl.showRoomInfo=!a.chRoomCtrl.showRoomInfo,a.chRoomCtrl.showRoomRates=!1,a.chRoomCtrl.showRoomInfo||n.scrollToAnchor("av-"+a.chRoomCtrl.$$index)},this.toggleRates=function(){a.chRoomCtrl.showRoomRates=!a.chRoomCtrl.showRoomRates,a.chRoomCtrl.showRoomInfo=!1,a.chRoomCtrl.showRoomRates?n.scrollToAnchor("av-"+a.chRoomCtrl.$$index+"-rates"):n.scrollToAnchor("av-"+a.chRoomCtrl.$$index)}}t.$inject=["$scope","$mdMedia","Navigator"],angular.module("itaca.components").component("chRoomHeader",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:'<div class="ch-room-header-content layout-column"><ng-transclude></ng-transclude><div ng-if="$ctrl.chRoomCtrl.showInfoBtn" class="img-bottom-left-bar layout-row layout-wrap layout-align-center-center"><md-button ng-class="{\'md-icon-button\' : $ctrl.$mdMedia(\'xs\')}" ng-click="$ctrl.toggleInfo()" aria-label="Open room information"><div class="row-mini"><md-icon class="mdi mdi-information-outline md-18 text-white"></md-icon><small class="hide-xs hide-sm" translate="common.information"></small></div></md-button></div><div ng-if="$ctrl.chRoomCtrl.showRateBtn" ng-class="::{\'img-right-bar\': $ctrl.$mdMedia(\'gt-xs\'), \'img-bottom-right-bar\': $ctrl.$mdMedia(\'xs\')}" class="layout-row layout-align-center-center"><md-button ng-click="$ctrl.toggleRates()" aria-label="Open room prices"><div layout class="row-mini text-left layout-padding no-padding"><div layout="column"><small><span class="text-initial" translate="common.from"></span><i ng-if="$ctrl.chRoomCtrl.bestRate.amount.initialAmount > 0 && $ctrl.chRoomCtrl.bestRate.amount.initialAmount > $ctrl.chRoomCtrl.bestRate.amount.finalAmount">&nbsp;<del>{{$ctrl.chRoomCtrl.bestRate.amount.initialAmount|chCurrency}}</del></i></small><span class="md-title"><strong>{{$ctrl.chRoomCtrl.bestRate.amount.finalAmount|chCurrency}}</strong></span><small ng-if="$ctrl.chRoomCtrl.nights > 0" class="text-lowercase"><span translate="common.for"></span>&nbsp;{{$ctrl.chRoomCtrl.nights}}<span ng-show="$ctrl.chRoomCtrl.nights == 1" translate="common.night"></span><span ng-show="$ctrl.chRoomCtrl.nights > 1" translate="common.nights"></span></small></div><div layout="column"><md-icon class="mdi md-48 text-white" ng-class="$ctrl.chRoomCtrl.showRoomRates ? \'mdi-chevron-up\' : \'mdi-chevron-down animated infinite bounce\'"></md-icon></div><md-tooltip hide-xs><span ng-if="!$ctrl.chRoomCtrl.showRoomRates" translate="ratesheet.rates.all.view"></span><span ng-if="$ctrl.chRoomCtrl.showRoomRates" translate="ratesheet.rates.hide"></span></md-tooltip></div></md-button></div></div>',transclude:!0})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.chRoomCtrl.config=i.chRoomCtrl.config||{},i.chRoomCtrl.storageUrl?i.getRoomCover():e.get().then(function(t){i.chRoomCtrl.storageUrl=t.url,i.getRoomCover()})},this.getRoomCover=function(){i.$findRoomCover()},this.openGallery=function(t){n([i.chRoomCtrl.room.roomType.nameKey,"room.category."+i.chRoomCtrl.room.category]).then(function(e){var n=e[i.chRoomCtrl.room.roomType.nameKey]+" <small>("+e["room.category."+i.chRoomCtrl.room.category].toUpperCase()+")</small>";a.showGallery(t,n,_.sortBy(i.chRoomCtrl.room.gallery,[function(t){return Boolean(t.cover)}]),{storageUrl:i.chRoomCtrl.storageUrl})})},this.$findRoomCover=function(){var t="/resources/public/img/no-gallery-image.png";_.forEach(i.chRoomCtrl.room.gallery,function(e,n,a){0==n&&(t=i.chRoomCtrl.storageUrl+e.path),e.cover&&(t=i.chRoomCtrl.storageUrl+e.path)}),i.roomImage=t}}t.$inject=["$scope","AboutStorage","$translate","Dialog"],angular.module("itaca.components").component("chRoomImage",{require:{chRoomCtrl:"^chRoom",chRoomHeaderCtrl:"^chRoomHeader"},bindings:{},controller:t,template:'<div class="flex layout-column layout-align-center-center"><img ng-src="{{$ctrl.roomImage}}" class="full-width display-block img-size" ng-class="{\'clickable\': $ctrl.chRoomCtrl.room.gallery.length}" ng-click="$ctrl.openGallery($event)" alt="Room cover image" lazy-image default-img-url="\'/resources/public/img/no-gallery-image.png\'"><md-tooltip ng-if="$ctrl.chRoomCtrl.room.gallery.length"><span translate="photo.photos.view.all"></span></md-tooltip></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.chRoomCtrl.showInfoBtn=!0,n.getIncludedServices(),n.getBookableServices(),n.getPopularServices()},this.getPopularServices=function(){var t=!1;n.chRoomCtrl.popularServices=[],_.forEach(n.includedServices,function(e){var a={};"service.type.popular.wifi.room"==e.type.nameKey?(a.type="WIFI",a.icon="mdi mdi-wifi md-24"):"service.type.popular.pet.small"==e.type.nameKey||"service.type.popular.pet.medium"==e.type.nameKey||"service.type.popular.pet.large"==e.type.nameKey||"service.type.popular.pet.disabled"==e.type.nameKey?(a.type="PET",a.icon="mdi mdi-paw md-24"):"service.type.popular.breakfast"==e.type.nameKey||"service.type.popular.breakfast.room"==e.type.nameKey||"service.type.popular.breakfast.continental"==e.type.nameKey?(a.type="BREAKFAST",a.icon="mdi mdi-food-variant md-24"):"service.type.popular.smoking.room"==e.type.nameKey&&(a.type="SMOKING",a.icon="mdi mdi-smoking md-24",t=!0),a.labelKey="service.type.inroom."+a.type,n.chRoomCtrl.popularServices.push(a)}),t||n.chRoomCtrl.popularServices.push({type:"NO-SMOKING",icon:"mdi mdi-smoking-off md-24",labelKey:"service.type.inroom.NO-SMOKING"})},this.getIncludedServices=function(){n.includedServices=_.filter(n.chRoomCtrl.room.services,["bookability","INCLUDED"])},this.getBookableServices=function(){n.bookableServices=_.filter(n.chRoomCtrl.room.services,["bookability","BOOKABLE"])},this.toggleInfo=function(){n.chRoomCtrl.showRoomInfo=!n.chRoomCtrl.showRoomInfo,n.chRoomCtrl.showRoomRates=!1,n.chRoomCtrl.showRoomInfo||e.scrollToAnchor("av-"+n.chRoomCtrl.$$index)}}t.$inject=["$scope","Navigator"],angular.module("itaca.components").component("chRoomInfo",{require:{chRoomCtrl:"^chRoom"},bindings:{availability:"<"},controller:t,transclude:!0,templateUrl:"/tpls/room/room-info.tpl"})}(),function(){"use strict";function t(t){this.$onInit=function(){}}t.$inject=["$scope"],angular.module("itaca.components").component("chRoomPromo",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:'<div class="layout-column layout-margin-sm no-margin-left"><div ng-if="$ctrl.chRoomCtrl.onArrival" class="no-margin-left"><div class="layout-column layout-padding no-padding row-mini bg-success md-subhead"><strong><md-icon class="mdi mdi-thumb-up md-18 text-white"></md-icon><span translate="reservation.pay.at.hotel"></span></strong></div></div><div ng-if="$ctrl.chRoomCtrl.bestPromo" class="no-margin-left"><div class="layout-column layout-padding no-padding row-mini md-subhead" ng-class="{\'bg-success\': $ctrl.chRoomCtrl.bestPromo.onArrival || $ctrl.chRoomCtrl.bestPromo.promotionType == \'EARLY_BOOKING\', \'bg-info\' : !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'STANDARD\',  \'bg-primary-light\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'MINIMUM_STAY\', \'bg-primary\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'BOOK_TODAY\', \'bg-blue-sea\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'LAST_MINUTE\', \'bg-warn\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'LAST_SECOND\'}"> <strong ng-if="!$ctrl.chRoomCtrl.bestPromo.onArrival" ng-switch="$ctrl.chRoomCtrl.bestPromo.promotionType"> <md-icon class="mdi mdi-sale md-10 text-white"></md-icon> <span ng-switch-when="STANDARD"><span translate="common.offer.special"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="MINIMUM_STAY"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{$ctrl.chRoomCtrl.bestPromo.minStay}}"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="BOOK_TODAY"><span translate="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="EARLY_BOOKING"><span translate="promotions.early"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_MINUTE"><span translate="promotions.last.minute"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_SECOND"><span translate="promotions.last.second"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span></strong></div></div></div>',transclude:!0})}(),function(){"use strict";function t(t,e){this.$mdMedia=e,this.$onInit=function(){}}t.$inject=["$scope","$mdMedia"],angular.module("itaca.components").component("chRoomRate",{transclude:!0,require:{chRoomCtrl:"^chRoom",chRoomRatesCtrl:"^chRoomRates"},bindings:{rate:"<"},controller:t,templateUrl:"/tpls/room/room-rate.tpl"})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.chRoomCtrl.showRateBtn=!0,a.getLowestRate(),a.isOnArrival(),a.bestPromotion(),a.hasFreeBeds()},this.hasFreeBeds=function(){_.isEmpty(a.availability.roomType.otherBeds)||(a.availability.hasFreeBeds=_.some(a.availability.roomType.otherBeds,function(t){return t.people.adults?t.adultsPrice<=0:t.people.boys?t.boysPrice<=0:t.people.children?t.childrenPrice<=0:!!t.people.kids&&t.kidsPrice<=0}))},this.bestPromotion=function(){var t=[];_.forEach(a.availability.totalRates,function(e){_.isEmpty(e.promotions)||(t=_.concat(t,e.promotions))}),a.chRoomCtrl.bestPromo=e.bestPromotion(t)},this.getLowestRate=function(){a.chRoomCtrl.bestRate=_.minBy(a.availability.totalRates,function(t){return t.amount.finalAmount})},this.isOnArrival=function(){a.chRoomCtrl.onArrival=a.availability.onArrival}}t.$inject=["$scope","ReservationUtils","DateUtils"],angular.module("itaca.components").component("chRoomRates",{require:{chRoomCtrl:"^chRoom"},bindings:{availability:"="},controller:t,template:'<div id="{{$ctrl.chRoomCtrl.$$index + \'-rates\'}}" ng-show="$ctrl.chRoomCtrl.showRoomRates"  ng-class="{\'animated fadeIn\': $ctrl.chRoomCtrl.showRoomRates}" ng-transclude></div>',transclude:!0})}(),function(){"use strict";function t(t,e){var n=this;this.toggleRates=function(){n.chRoomCtrl.showRoomRates=!n.chRoomCtrl.showRoomRates,n.chRoomCtrl.showRoomInfo=!1,n.chRoomCtrl.showRoomRates?e.scrollToAnchor("av-"+n.chRoomCtrl.$$index+"-rates"):e.scrollToAnchor("av-"+n.chRoomCtrl.$$index)},this.$onInit=function(){}}t.$inject=["$scope","Navigator"],angular.module("itaca.components").component("chRoomTitle",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:'<div class="img-title-bar layout-column layout-padding no-padding"><div class="layout-row layout-align-start-center"><div class="flex layout-column clickable" ng-click="$ctrl.toggleRates()" aria-label="show rate"><div class="md-title"><span translate="{{$ctrl.chRoomCtrl.room.roomType.nameKey}}"></span></div><div><small class="text-uppercase" translate="room.category.{{$ctrl.chRoomCtrl.room.category}}"></small></div></div><div class="layout-column no-padding"><div class="layout-row layout-wrap layout-align-end-center"><ch-people-icons people="$ctrl.chRoomCtrl.room.people" max="$ctrl.chRoomCtrl.room.guestsCount.standard" extra-people="$ctrl.chRoomCtrl.room.extraPeople" extra-max="$ctrl.chRoomCtrl.room.guestsCount.extra"></ch-people-icons></div></div></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.$$index=e.uniqueNumber()}}t.$inject=["$scope","NumberUtils"],angular.module("itaca.components").component("chRoom",{transclude:!0,bindings:{room:"<",storageUrl:"<?",nights:"<?"},controller:t,template:'<div id="{{\'av-\'+ $ctrl.$$index}}" class="bg-gray-lighter md-margin no-margin-left no-margin-right relative" ng-transclude></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.element=a.element||null,a.offset=isFinite(parseInt(a.offset))?parseInt(a.offset):500,a.ngDisabled=!!_.isBoolean(a.ngDisabled)&&a.ngDisabled,a.showClass=a.showClass||"zoomIn",_.isBoolean(a.showClass)&&(a.showClass=a.showClass?"zoomIn":""),a.hideClass=a.hideClass||"zoomOut",_.isBoolean(a.hideClass)&&(a.hideClass=a.hideClass?"zoomOut":""),a.$initWatches()},this.$postLink=function(){a.ngDisabled?a.$disableShow():a.$enableShow()},this.$enableShow=function(){angular.element(n).on("scroll",a.$toggle)},this.$disableShow=function(){angular.element(n).off("scroll",a.$toggle)},this.$checkVisible=function(){var t=document.querySelector(a.element);if(!t)return!1;var e=t.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(e.bottom<0||e.top-n>=0)},this.$toggle=function(){if(a.ngDisabled)a.$disableShow();else{var i=e.children(),l=angular.element(i.children());l&&l.addClass("animated"),n.pageYOffset>=a.offset&&!a.$checkVisible()?l&&(l.addClass("visible "+a.showClass),l.removeClass(a.hideClass)):l&&(l.removeClass("visible "+a.showClass),l.addClass(a.hideClass)),t.$apply()}},this.$initWatches=function(){t.$watch(function(){return a.ngDisabled},function(t){(t=!!_.isBoolean(t)&&t)?a.$disableShow():a.$enableShow()})},this.$onDestroy=function(){a.$disableShow()}}t.$inject=["$scope","$element","$window"],angular.module("itaca.components").component("chShowOnScroll",{transclude:!0,bindings:{offset:"@?",element:"@?",ngDisabled:"<?",showClass:"@?",hideClass:"@?"},controller:t,template:'<div class="ch-show-on-scroll" ng-transclude></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){AppOptions.about&&(n.iconSize=n.iconSize||"md-38",n.mediaUrl=n.mediaUrl||"/resources/img/favicon-96x96.png",n.$$mediaUrl=e.parseUrl(n.mediaUrl).href,n.$$url=e.parseUrl(n.url).href)}}t.$inject=["$scope","UrlUtils"],angular.module("itaca.components").component("chSocialShare",{bindings:{iconSize:"<?",title:"@",text:"@",url:"@",tags:"@",mediaUrl:"@",fbAppId:"@"},controller:t,template:'<div class="layout-padding no-padding-top" ng-cloak><div hide-gt-sm class="layout-align-center-center layout-row layout-wrap"><a class="auto-height button-mini md-button" aria-label="whatsapp"socialsharesocialshare-provider="whatsapp"socialshare-url="{{$ctrl.$$url}}"socialshare-text="{{$ctrl.text}}"><md-icon class="mdi mdi-whatsapp {{$ctrl.iconSize}} material-icons text-whatsapp"></md-icon><div class="font-12 row-mini text-initial text-wrap">Whatsapp</div></a><a class="auto-height button-mini md-button" aria-label="sms"socialsharesocialshare-provider="sms"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"><md-icon class="mdi mdi-message-text {{$ctrl.iconSize}} material-icons text-primary"></md-icon><div class="font-12 row-mini text-initial text-wrap">SMS</div></a><a class="auto-height button-mini md-button" aria-label="facebook messenger"socialsharesocialshare-provider="facebook-messenger"socialshare-url="{{$ctrl.$$url}}"><md-icon class="mdi mdi-facebook-messenger {{$ctrl.iconSize}} material-icons text-messenger"></md-icon><div class="font-12 row-mini text-initial text-wrap">Messenger</div></a></div><md-divider hide-gt-sm></md-divider><div class="layout-align-center-center layout-row layout-wrap"><md-button class="auto-height button-mini" aria-label="email"socialsharesocialshare-provider="email"socialshare-media="{{$ctrl.$$mediaUrl}}"socialshare-subject="{{$ctrl.title}}"socialshare-body="{{$ctrl.text}} - {{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"><md-icon class="mdi mdi-email {{$ctrl.iconSize}} material-icons text-primary"></md-icon><div class="font-12 row-mini text-initial text-wrap">E-mail</div></md-button><md-button class="auto-height button-mini" aria-label="facebook"socialsharesocialshare-provider="facebook"socialshare-via="{{$ctrl.fbAppId}}"socialshare-type="feed"socialshare-media="{{$ctrl.$$mediaUrl}}"socialshare-text="{{$ctrl.title}}"socialshare-url="{{$ctrl.$$url}}"socialshare-redirect-uri="{{$ctrl.$$url}}"socialshare-quote="{{$ctrl.title}}"socialshare-hashtags="{{$ctrl.tags}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-facebook {{$ctrl.iconSize}} material-icons text-fb"></md-icon><div class="font-12 row-mini text-initial text-wrap">Facebook</div></md-button><md-button class="auto-height button-mini" aria-label="twitter"socialsharesocialshare-provider="twitter"socialshare-hashtags="{{$ctrl.tags}}"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-twitter text-twitter {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Twitter</div></md-button><md-button class="auto-height button-mini" aria-label="google plus"socialsharesocialshare-provider="google"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-google-plus text-gplus {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Google +</div></md-button><md-button class="auto-height button-mini" aria-label="telegram"socialsharesocialshare-provider="telegram"socialshare-url="{{$ctrl.$$url}}"socialshare-text="{{$ctrl.text}}"socialshare-trigger="click"><md-icon class="mdi mdi-telegram text-telegram {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Telegram</div></md-button><md-button class="auto-height button-mini" aria-label="skype"socialsharesocialshare-provider="skype"socialshare-url="{{$ctrl.$$url}}"socialshare-text="{{$ctrl.text}}"socialshare-popup-height="800"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-skype text-skype {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Skype</div></md-button><md-button class="auto-height button-mini" aria-label="reddit"socialsharesocialshare-provider="reddit"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-reddit text-reddit {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Reddit</div></md-button><md-button class="auto-height button-mini" aria-label="linkedin"socialsharesocialshare-provider="linkedin"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-description="{{$ctrl.text}}"socialshare-source="{{$ctrl.title}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-linkedin text-linkedin {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Linkedin</div></md-button><md-button class="auto-height button-mini" aria-label="pinterest"socialsharesocialshare-media="{{$ctrl.$$mediaUrl}}"socialshare-provider="pinterest"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-pinterest text-pinterest {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Pinterest</div></md-button><md-button class="auto-height button-mini" aria-label="tumblr"socialsharesocialshare-provider="tumblr"socialshare-type="link"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="540"socialshare-trigger="click"><md-icon class="mdi mdi-tumblr text-tumblr {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Tumblr</div></md-button><md-button class="auto-height button-mini" aria-label="vk"socialsharesocialshare-provider="vk"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-vk text-vk {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Vk</div></md-button></div></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){t.$watchGroup([function(){return e.start},function(){return e.end}],e.$calculateDiff)},this.$calculateDiff=function(){var t=e.start?moment(e.start):moment(),n=e.start?moment(e.end):moment();e.$$timeLeft=t.to(n)}}t.$inject=["$scope"],angular.module("itaca.components").component("chTimeLeft",{bindings:{start:"<?",end:"<?"},controller:t,template:'<span ng-bind="$ctrl.$$timeLeft"></span>'})}(),function(){"use strict";function t(t,e,n){t.$mdMedia=n;var a=this;this.$onInit=function(){a.event={date:a.date,title:a.eventTitle,iconBg:a.iconBg,iconClass:a.iconClass,dateFormat:a.dateFormat,animatedClass:a.chTimelineCtrl.animatedClass},a.chTimelineCtrl.addEvent(a.event),a.titleQuote=!_.isBoolean(a.titleQuote)||a.titleQuote,e.addClass("ch-timeline-event flex-xs-100 relative layout-column"),e.addClass("CENTER"==a.event.align?"flex-50":"flex-100"),a.registerWatches()},this.registerWatches=function(){t.$watch(function(){return a.eventTitle},function(t,e){a.event.title=t}),t.$watch(function(){return a.date},function(t,e){a.event.date=t})},this.$onDestroy=function(){a.chTimelineCtrl.removeEvent(a.event)}}t.$inject=["$scope","$element","$mdMedia"],angular.module("itaca.components").component("chTimelineEvent",{require:{chTimelineCtrl:"^chTimeline"},transclude:!0,bindings:{date:"<",eventTitle:"@",titleQuote:"<?",iconBg:"@",iconClass:"@",dateFormat:"@",isNew:"=?",ngDisabled:"=?"},controller:t,template:'<div class="md-padding relative" ch-animated="{{$ctrl.event.animatedClass}}" ch-animated-delay="{{$ctrl.event.animatedDelay}}"><div class="ch-timeline-event-icon {{$ctrl.event.iconBg}}"><md-icon ng-if="$ctrl.event.iconClass" class="material-icons {{$ctrl.event.iconClass}}"></md-icon><div ng-if="!$ctrl.event.iconClass" class="md-subhead ng-scope row-mini"><div class="text-bold">{{$ctrl.event.date|utcDate:\'d\'}}</div><div class="text-small">{{$ctrl.event.date|utcDate:\'MMM\'}}</div></div></div><div class="ch-timeline-event-content layout-padding no-padding bg-white text-left md-whiteframe-1dp"  ng-class="{\'locked\': $ctrl.ngDisabled}"><div ng-if="$ctrl.event.title || $ctrl.event.dateFormat" class="layout-row layout-wrap layout-padding layout-align-start-center"><div class="md-subhead text-left" ng-class="!$mdMedia(\'gt-sm\') ? \'flex-100\': \'flex\'"><span ng-if="$ctrl.isNew"><md-icon class="mdi mdi-new-box text-info material-icons"></md-icon></span><strong ng-if="$ctrl.event.title"><em><span ng-if="$ctrl.titleQuote">&ldquo;</span><span>{{$ctrl.event.title}}</span><span ng-if="$ctrl.titleQuote">&bdquo;</span></em></strong></div><div class="text-gray-light text-small">{{$ctrl.event.date|utcDate:$ctrl.event.dateFormat}}</div></div><div class="no-padding" ng-transclude></div></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.events=[],this.bgArray=["bg-success text-white","bg-info text-white","bg-warn text-white","bg-danger text-white","bg-primary text-white","bg-primary-light text-white","bg-blue-sea text-white","bg-gray-light text-white","bg-gray-lighter only-border text-gray-light"],this.$onInit=function(){a.hideIcon=!!_.isBoolean(a.hideIcon)&&a.hideIcon,a.randomBg=!_.isBoolean(a.randomBg)||a.randomBg,a.manageAlign(),a.registerWatches()},this.manageAlign=function(){a.align=_.includes(["LEFT","CENTER","RIGHT"],a.align)?a.align:"CENTER",a.align=e("gt-xs")?a.align:"RIGHT",a.alignClass="ch-timeline-"+a.align.toLowerCase(),a.animatedClass="RIGHT"==a.align?"slideInRight":"LEFT"==a.align?"slideInLeft":"slideInUp"},this.manageIconBgColor=function(t){_.isNil(t.iconBg)&&a.randomBg&&(a.bgArrayLeft=_.isEmpty(a.bgArrayLeft)?angular.copy(a.bgArray):a.bgArrayLeft,t.iconBg=_.sample(a.bgArrayLeft),_.pull(a.bgArrayLeft,t.iconBg),a.lastIconBg||a.lastIconBg==t.iconBg?a.manageIconBgColor(t):a.lastIconBg=t.iconBg)},this.addEvent=function(t){t.align=a.align,a.manageIconBgColor(t),t.index=a.events.push(t)-1,t.animatedDelay=t.index>=0&&t.index<=10?100*t.index:1e3,a.barClass=n.isOdd(a.events.length)?"ch-timeline-odd":"ch-timeline-even"},this.removeEvent=function(t){_.pull(a.events,t),a.barClass=n.isOdd(a.events.length)?"ch-timeline-odd":"ch-timeline-even"},this.registerWatches=function(){t.$watch(function(){return a.hideIcon},function(t,e){a.hideIcon=!!_.isBoolean(t)&&t}),t.$watch(function(){return a.align},function(t,e){a.manageAlign(),_.forEach(a.events,function(e){e.align=t})})}}t.$inject=["$scope","$mdMedia","NumberUtils"],angular.module("itaca.components").component("chTimeline",{transclude:!0,bindings:{align:"@",randomBg:"<?",hideIcon:"<?"},controller:t,template:'<div class="ch-timeline {{$ctrl.alignClass}} {{$ctrl.barClass}} {{$ctrl.hideIcon ? \'no-icon\' : null}}"><div class="layout-row layout-wrap" ng-transclude></div><bar></bar></div>'})}(),function(){"use strict";function t(t,e){var n=this;n.$onInit=function(){t.$watchGroup([function(){return n.text},function(){return n.maxLength}],n.$truncate)},n.$truncate=function(){n.$$showTooltip=!n.hideTooltip&&n.text.length>n.maxLength,n.$$truncated=e(n.text,n.maxLength,n.suffix)}}t.$inject=["$scope","truncateFilter"],angular.module("itaca.components").component("chTruncate",{bindings:{text:"@",maxLength:"<?",suffix:"@",hideTooltip:"<?"},controller:t,template:'<span><span>{{$ctrl.$$truncated}}</span><md-tooltip ng-if="$ctrl.$$showTooltip">{{$ctrl.text}}</md-tooltip></span>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.$initWatches()},this.$prepareText=function(){e.$$textArr=_.split(e.text,"")},this.$initWatches=function(){t.$watch(function(){return e.text},ctr.$prepareText)}}t.$inject=["$scope"],angular.module("itaca.components").component("chVerticalText",{bindings:{text:"<"},controller:t,template:'<div><p ng-repeat="char in $ctrl.$$textArr">{{char}}</p></div>'})}(),function(){"use strict";angular.module("itaca.components").factory("WeatherUtils",function(){var t={};return t.getInfo=function(t){if(!t)return null;var e,n="mdi-minus",a="n"==t.slice(-1);switch(t){case"01d":e="sunny",n="sunny";break;case"01n":e="starry",n="starry";break;case"02d":case"02n":e="partly.cloudy",n="cloudy";break;case"03d":case"03n":case"04d":case"04n":e="cloudy",n="cloudy";break;case"09d":case"09n":e="drizzle",n="rainy";break;case"010d":case"010n":e="rain",n="rainy";break;case"011d":case"011n":e="thunderstorm",n="stormy";break;case"013d":case"013n":e="snowy",n="snowy";break;case"050d":case"050n":default:e="variable",n="material-icons md-160 mdi mdi-$$weather-windy text-white"}return{icon:n,label:e,isNight:a}},t.getLabel=function(t){if(!t)return null;var e="";switch(t){case"01d":e="sunny";break;case"01n":e="starry";break;case"02d":case"02n":e="partly.cloudy";break;case"03d":case"03n":case"04d":case"04n":e="cloudy";break;case"09d":case"09n":e="drizzle";break;case"010d":case"010n":e="rain";break;case"011d":case"011n":e="thunderstorm";break;case"013d":case"013n":e="snowy";break;case"050d":case"050n":default:e="variable"}return e},t.getIconClass=function(t){if(!t)return null;var e="mdi-minus";switch(t){case"01d":e="sunny";break;case"01n":e="starry";break;case"02d":case"02n":e="cloudy";break;case"03d":case"03n":case"04d":case"04n":e="cloudy";break;case"09d":case"09n":e="rainy";break;case"010d":case"010n":e="rainy";break;case"011d":case"011n":e="stormy";break;case"013d":case"013n":e="snowy";break;case"050d":case"050n":default:e="material-icons md-160 mdi mdi-$$weather-windy text-white"}return e},t.isNight=function(t){return t?"n"==t.slice(-1):null},t})}(),function(){"use strict";function t(t,e,n,a,i,l){var s=this;this.$onInit=function(){s.$reset(),s.$getWeather()},this.$reset=function(){s.$$weather={icon:"mdi mdi-minus material-icons md-164",temp:"-"}},this.$getWeather=function(){a.get(s.city,s.country).then(function(t){_.isNil(t.data)?e.error("Error getting weather"):(s.$$weather.temp=l.fixedDecimals(t.data.main.temp,1),s.$getIcon(t.data.weather[0].icon))},function(t){e.error(t),s.$reset()})},this.$getInfo=function(t){_.assign(s.$$weather,i.getInfo(t))}}t.$inject=["$scope","$log","$http","Weather","WeatherUtils","NumberUtils"],angular.module("itaca.components").component("chWeather",{bindings:{city:"@",country:"@"},controller:t,template:'<div><div class="relative overflow-hidden weather-container"><i ng-if="$ctrl.$$weather.label == "partly.cloudy"" ng-class="$ctrl.$$weather.isNight ? "starry" : "sunny"" class="cloud"></i><i class="{{$ctrl.$$weather.icon}}"></i></div><div class="text-white"><span ng-if="$$weather.label" translate="weather.{{$ctrl.$$weather.label}}"></span></div><div class="md-headline text-bold text-white"><span>{{::$ctrl.city}}</span></div><div class="md-body-2 text-white text-uppercase"><span>{{::$ctrl.country}}</span></div><div><span class="md-headline text-bold text-white">{{$$weather.temp}}</span><mdi-icon class="mdi mdi-temperature-celsius material-icons text-white"></md-icon></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$$appId=n,this.API=t("https://api.openweathermap.org/data/2.5/$$weather"),this.get=function(t,n){var i=e.defer();if(!t)return i.reject("City cannot be null"),i.promise;var l={appId:a.appId,q:t+","+n,mode:"json",units:"metric"};return a.API.get(l,function(t){i.resolve(t.data)},function(e){i.reject(e.data&&e.data.message?e.data.message:"Error getting weather for "+t+", "+n)}),i.promise}}angular.module("itaca.components").provider("Weather",function(){var e="";this.setAppId=function(t){e=t},this.$get=["$resource","$q",function(e,n){return new t(e,n,appId)}]})}(),angular.module("itaca.components").run(["$templateCache",function(t){"use strict";t.put("/tpls/room/room-info.tpl",'<div id="{{\'ch-room-\' + $ctrl.chRoomCtrl.$$index + \'-info\'}}" ng-show="$ctrl.chRoomCtrl.$$showInfo" ng-class="{\'animated fadeIn\': $ctrl.chRoomCtrl.$$showInfo}"><div class="md-padding no-padding-bottom text-gray-light"><div ng-show="$ctrl.chRoomCtrl.room.maxOtherBeds > 0" class="md-padding no-padding-bottom text-blue-sea text-center"><md-icon class="mdi mdi-hotel animated tada infinite text-blue-sea md-24"></md-icon>&nbsp; <span translate="reservation.room.extra.beds.bookable"></span> <span ng-if="$ctrl.chRoomCtrl.$$hasFreeBeds" class="text-uppercase" translate="common.for.free"></span> <span ng-if="!$ctrl.chRoomCtrl.$$hasFreeBeds" class="text-lowercase" translate="common.for.fee"></span></div><div class="layout layout-wrap"><div class="layout-column flex"><div layout layout-wrap class="bg-white layout-padding layout-row layout-wrap layout-align-space-around md-whiteframe-1dp"><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><ch-people-icons people="$ctrl.chRoomCtrl.room.people" max="$ctrl.chRoomCtrl.room.guestsCount.standard" extra-people="$ctrl.chRoomCtrl.room.extraPeople" extra-max="$ctrl.chRoomCtrl.room.guestsCount.extra" hidetooltip="!$ctrl.$mdMedia(\'gt-sm\')" size="big" theme="dark" hide-extra-people="true"></ch-people-icons></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div><md-icon class="mdi mdi-hotel md-48"></md-icon></div><div class="text-small"><span>{{::$ctrl.chRoomCtrl.room.beds.length}}</span> <span ng-if="$ctrl.chRoomCtrl.room.beds.length == 1"><span translate="bed.{{::$ctrl.chRoomCtrl.room.beds[0].type}}"></span> </span><span ng-if="$ctrl.chRoomCtrl.room.beds.length != 1" translate="bed.beds.principal"></span></div></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div style="height: 48px; line-height: 58px"><span class="md-title">{{::$ctrl.chRoomCtrl.room.metres}} m</span></div><div class="text-small"><span translate="room.size"></span></div></div></div><div ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra > 0" layout layout-wrap class="bg-white layout-padding layout-row layout-wrap layout-align-space-around md-whiteframe-1dp" style="margin-top: 10px"><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><ch-people-icons people="$ctrl.chRoomCtrl.room.people" max="$ctrl.chRoomCtrl.room.guestsCount.standard" extra-people="$ctrl.chRoomCtrl.room.extraPeople" extra-max="$ctrl.chRoomCtrl.room.guestsCount.extra" hidetooltip="!$ctrl.$mdMedia(\'gt-sm\')" size="big" theme="dark" hide-people="true"></ch-people-icons></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div><md-icon class="mdi mdi-hotel md-48"></md-icon></div><div class="text-small"><span>{{::$ctrl.chRoomCtrl.room.maxOtherBeds}}</span> <span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds == 1" translate="bed.otherbed"></span> <span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds != 1" translate="bed.otherbeds"></span></div></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div style="height: 48px;line-height: 58px"><span class="md-title">{{::$ctrl.chRoomCtrl.room.bathMetres}} m</span></div><div class="text-small"><span translate="room.bath.size"></span></div></div></div></div></div><h4 class="md-subhead no-margin-bottom"><strong translate="room.description"></strong></h4><div class="layout layout-wrap"><div flex><span ng-if="$ctrl.chRoomCtrl.room.description[$ctrl.chRoomCtrl.currentLang]"><span hm-read-more hm-text="{{$ctrl.chRoomCtrl.room.description[$ctrl.chRoomCtrl.currentLang]}}" hm-limit="50" hm-more-text="{{\'common.read.more\'|translate}}" hm-less-text="{{\'common.read.less\'|translate}}" hm-link-class="clickable text-primary"></span> </span><span ng-if="!$ctrl.chRoomCtrl.room.description[$ctrl.chRoomCtrl.currentLang]"><span translate="{{::$ctrl.chRoomCtrl.room.roomType.descriptionKey}}"></span></span></div></div><div layout="column" ng-if="$ctrl.chRoomCtrl.room.metres"><h4 class="md-subhead no-margin-bottom"><strong translate="room.size"></strong></h4><div layout><strong translate="room.room"></strong>:&nbsp; <span>{{::$ctrl.chRoomCtrl.room.metres}} mq</span>&nbsp; <span>({{::($ctrl.chRoomCtrl.room.metres * 10.764 | number:2)}} sq ft.)</span></div><div layout><strong translate="service.type.BATHROOM"></strong>:&nbsp; <span>{{::$ctrl.chRoomCtrl.room.bathMetres}} mq</span>&nbsp; <span>({{::($ctrl.chRoomCtrl.room.bathMetres * 10.764 | number:2)}} sq ft.)</span></div></div><div layout="column"><strong ng-if="$ctrl.chRoomCtrl.room.bathIncluded" class="md-subhead no-margin-bottom"><span translate="room.bath.included"></span></strong> <strong ng-if="!$ctrl.chRoomCtrl.room.bathIncluded" class="md-subhead no-margin-bottom"><span translate="room.bath.not.included"></span></strong></div><div layout="column" ng-if="$ctrl.chRoomCtrl.room.beds && $ctrl.chRoomCtrl.room.beds.length > 0"><h4 class="md-subhead no-margin-bottom"><strong ng-if="$ctrl.chRoomCtrl.room.beds.length == 1" translate="bed.bed.principal"></strong> <strong ng-if="$ctrl.chRoomCtrl.room.beds.length != 1" translate="bed.beds.principal"></strong></h4><span ng-repeat="bed in $ctrl.chRoomCtrl.room.beds track by $index"><span>{{::bed.count}}&nbsp;x&nbsp;</span><span ng-if="bed.type" translate="bed.{{::bed.type}}"></span><span ng-if="!$last">,&nbsp;</span></span></div><div layout="column" ng-if="$ctrl.chRoomCtrl.room.otherBeds && $ctrl.chRoomCtrl.room.otherBeds.length > 0"><h4 class="md-subhead no-margin-bottom"><strong translate="bed.otherbeds"></strong></h4><div class="text-small"><span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds > 1"><span class="layout-padding no-padding-left" translate="reservation.info.max.otherBeds" translate-value-count="{{::$ctrl.chRoomCtrl.room.maxOtherBeds}}"></span> </span><span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds == 1"><span class="layout-padding no-padding-left" translate="reservation.info.max.otherBed"></span> </span><span class="text-lowercase" translate="common.choice.between"></span>:</div><md-list class="no-padding-bottom"><md-list-item ng-repeat="otherBed in $ctrl.chRoomCtrl.room.otherBeds track by $index"><div class="layout flex layout-padding no-padding"><div class="layout-column flex layout-padding-sm no-padding layout-align-center-start"><div class="no-padding-left"><span>{{otherBed.count}}&nbsp;x&nbsp;</span> <strong translate="bed.{{otherBed.type}}"></strong>&nbsp; <span class="text-lowercase"><span translate="bed.max.person"></span>&nbsp; <span>{{otherBed.maxPerson}}</span>&nbsp; <span ng-if="otherBed.maxPerson > 1" translate="people.people"></span> <span ng-if="otherBed.maxPerson <= 1" translate="people.person"></span> <span translate="bed.per.bed"></span></span></div><div class="no-padding text-gray-light text-lowercase"><small ng-if="otherBed.people.adults"><span><span translate="people.adults"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.adults}}):</span> <span ng-if="otherBed.adultsPrice">{{otherBed.adultsPrice|currency:\'\'}}</span> <span ng-if="!otherBed.adultsPrice" translate="common.free"></span> </small><small ng-if="otherBed.people.boys"><span ng-if="otherBed.people.adults">&nbsp;-</span> <span><span translate="people.boys"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.boys}}):</span> <span ng-if="otherBed.boysPrice">{{otherBed.boysPrice|currency:\'\'}}</span> <span ng-if="!otherBed.boysPrice" translate="common.free"></span> </small><small ng-if="otherBed.people.children"><span ng-if="otherBed.people.adults || otherBed.people.boys">&nbsp;-</span> <span><span translate="people.children"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.children}}):</span> <span ng-if="otherBed.childrenPrice">{{otherBed.childrenPrice|currency:\'\'}}</span> <span ng-if="!otherBed.childrenPrice" translate="common.free"></span> </small><small ng-if="otherBed.people.kids"><span ng-if="otherBed.people.adults || otherBed.people.boys || otherBed.people.children">&nbsp;-</span> <span><span translate="people.kids"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.kids}}):</span> <span ng-if="otherBed.kidsPrice">{{otherBed.kidsPrice|currency:\'\'}}</span> <span ng-if="!otherBed.kidsPrice" translate="common.free"></span></small></div><div class="no-padding-top no-padding-left text-gray-light text-italic" ng-switch="otherBed.frequency"><small translate="common.price.is.intend"></small> <small class="text-lowercase" ng-switch-when="DAILY|NIGHTLY" ng-switch-when-separator="|">&nbsp;<span translate="service.type.payment.NIGHTLY"></span></small> <small class="text-lowercase" ng-switch-when="LUMP_SUM">&nbsp;<span translate="service.type.payment.LUMP_SUM"></span></small></div></div></div></md-list-item></md-list></div><div layout="column"><h4 class="md-subhead no-margin-bottom"><strong translate="reservation.guest.info"></strong></h4><div class="md-padding no-padding-left"><div class="md-padding no-padding-left no-padding-top"><span translate="room.people.host"></span></div><ul><li><strong>{{$ctrl.chRoomCtrl.room.guestsCount.standard}}&nbsp;</strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.standard == 1" translate="people.person.beds"></strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.standard != 1" translate="people.people.beds"></strong> <span class="text-lowercase">&nbsp;(<span ng-if="$ctrl.chRoomCtrl.room.people.boys || $ctrl.chRoomCtrl.room.people.children || $ctrl.chRoomCtrl.room.people.kids"><span translate="common.choice.between"></span>&nbsp;</span><ch-people-summary class="text-lowercase" people="$ctrl.chRoomCtrl.room.people"></ch-people-summary>)</span></li></ul><ul ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra"><li><strong>{{$ctrl.chRoomCtrl.room.guestsCount.extra}}&nbsp;</strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra == 1" translate="people.person.extra.beds"></strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra != 1" translate="people.people.extra.beds"></strong> <span class="text-lowercase">&nbsp;(<span ng-if="$ctrl.chRoomCtrl.room.extraPeople.boys || $ctrl.chRoomCtrl.room.extraPeople.children || $ctrl.chRoomCtrl.room.extraPeople.kids"><span translate="common.choice.between"></span>&nbsp;</span><ch-people-summary class="text-lowercase" people="$ctrl.chRoomCtrl.room.extraPeople"></ch-people-summary>)</span></li></ul><div ng-if="$ctrl.chRoomCtrl.room.people.boys || $ctrl.chRoomCtrl.room.people.children || $ctrl.chRoomCtrl.room.people.kids || $ctrl.chRoomCtrl.room.extraPeople.boys || $ctrl.chRoomCtrl.room.extraPeople.children || $ctrl.chRoomCtrl.room.extraPeople.kids" class="md-padding no-padding-left no-padding-bottom"><em translate="error.room.guest.not.selected"></em></div></div><div><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left no-margin-top text-gray-light"><strong translate="people.adults"></strong></h5><div><i translate="people.adults.policy" translate-value-age="{{::(18)}}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <span>{{::$ctrl.chRoomCtrl.room.people.adults}}</span></div></div><div ng-switch="$ctrl.chRoomCtrl.room.people.boys"><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left text-gray-light"><strong translate="people.boys"></strong></h5><div><i translate="people.boys.policy" translate-values="{min: 13, max: 17}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <i ng-switch-when="0" translate="common.none.male"></i> <span ng-switch-default>{{::$ctrl.chRoomCtrl.room.people.boys}}</span></div></div><div ng-switch="$ctrl.chRoomCtrl.room.people.children"><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left text-gray-light"><strong translate="people.children"></strong></h5><div><i translate="people.children.policy" translate-values="{min: 3, max: 12}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <i ng-switch-when="0" translate="common.none.male"></i> <span ng-switch-default>{{::$ctrl.chRoomCtrl.room.people.children}}</span></div></div><div ng-switch="$ctrl.chRoomCtrl.room.people.kids"><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left text-gray-light"><strong translate="people.kids"></strong></h5><div><i translate="people.kids.policy" translate-values="{min: 0, max: 2}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <i ng-switch-when="0" translate="common.none.male"></i> <span ng-switch-default>{{::$ctrl.chRoomCtrl.room.people.kids}}</span></div></div></div><div layout="column" ng-if="::($ctrl.chRoomCtrl.$$includedServices && $ctrl.chRoomCtrl.$$includedServices.length > 0)"><h4 class="md-subhead no-margin-bottom"><strong translate="room.facilities"></strong></h4><div layout layout-wrap><div class="flex-gt-sm-50 flex-100" ng-repeat="service in ::$ctrl.chRoomCtrl.$$includedServices track by service.id" ng-switch="service.type.nameKey"><md-icon class="mdi mdi-check md-18 text-success"></md-icon><span translate="{{::service.type.nameKey}}"></span></div></div></div><div layout="column" ng-if="::($ctrl.chRoomCtrl.$$bookableServices && $ctrl.chRoomCtrl.$$bookableServices.length > 0)"><h4 class="md-subhead no-margin-bottom"><strong translate="common.service.on.demand"></strong></h4><div layout layout-wrap><div class="flex-gt-sm-50 flex-100" ng-repeat="service in ::$ctrl.chRoomCtrl.$$bookableServices track by service.id" ng-switch="service.paymentType"><md-icon class="mdi mdi-check md-18 text-success"></md-icon><span translate="{{::service.type.nameKey}}"></span> <span ng-switch-when="FREE">(<span translate="payment.free"></span>)</span> <span ng-switch-default class="text-lowercase"><small ng-repeat="paymentOpt in ::service.paymentOptions track by $index"><span ng-if="paymentOpt.size == \'PER_ADULT\' || paymentOpt.size == \'SINGLE\'">(<span>{{paymentOpt.amount.finalAmount|chCurrency}}</span> <span ng-if="service.frequency == \'DAILY\'">/<span translate="date.day"></span></span> <span ng-if="service.frequency == \'MONTHLY\'">/<span translate="date.month"></span></span> <span ng-if="service.frequency == \'YEARLY\'">/<span translate="date.year"></span></span> <span ng-if="paymentOpt.size == \'PER_ADULT\'">/<span translate="people.person"></span></span>)</span></small></span></div></div></div><div layout layout-xs="column" layout-padding layout-align="center center" class="no-padding-bottom"><md-button class="row-mini button-mini auto-height text-initial" ng-click="$ctrl.$toggleRates(true)" aria-label="Open room rates"><strong class="text-center text-success" ng-clas="{\'no-padding\': !$ctrl.$mdMedia(\'gt-sm\')}"><span><span translate="reservation.dont.miss.room"></span>.&nbsp;</span> <span translate="reservation.book.now.holiday"></span></strong></md-button></div></div><div class="text-center"><md-button class="row-mini button-mini auto-height text-gray-light text-initial" ng-click="$ctrl.$toggleInfo(false)" aria-label="Close room info"><md-icon class="mdi mdi-chevron-up text-gray-light md-18 material-icon"></md-icon><span translate="common.hide"></span></md-button></div></div>'),t.put("/tpls/room/room-rate.tpl",'<div ng-switch="$ctrl.rate.type"><md-list-item class="no-padding secondary-button-padding"><div class="md-list-item-text no-padding" layout-xs="column" layout-sm="column" layout-gt-sm="row" layout-padding flex><div flex layout layout-wrap layout-align="center center" ng-class="{\'no-padding-bottom\': !$ctrl.$mdMedia(\'gt-sm\')}"><md-button class="md-fab md-micro hide show-gt-sm" ng-click="$ctrl.$toggleInfo()" aria-label="Show rate info"><md-icon class="mdi md-18 text-white" ng-class="{\'mdi-chevron-down\': !$ctrl.$$showInfo, \'mdi-chevron-up\': $ctrl.$$showInfo}"></md-icon></md-button><div class="clickable flex layout" layout-xs="column" ng-class="::{\'layout-padding\': $ctrl.$mdMedia(\'gt-xs\')}" ng-click="$ctrl.$toggleInfo()" aria-label="Rate info"><div layout="column" layout-align="center center"><div ng-class="{\'text-warn\': $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \'text-success\': $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \n\t\t\t\t\t\t\t\'text-blue-sea\': $ctrl.rate.type == \'NOT_REFUNDABLE\'}" class="layout-align-start-center layout-column row-mini layout-padding"><small class="no-padding" ng-if="$ctrl.$$nights != 1"><span translate="reservation.price.for.nights" translate-values="::{count: $ctrl.$$nights}"></span></small> <small class="no-padding" ng-if="$ctrl.$$nights == 1"><span translate="reservation.price.for.one.night"></span></small> <small class="no-padding" ng-if="$ctrl.rate.amount.initialAmount > 0 && $ctrl.rate.amount.initialAmount > $ctrl.rate.amount.finalAmount"><span class="text-initial" translate="common.from"></span> <i><del>{{$ctrl.rate.amount.initialAmount|chCurrency}}</del></i> </small><span class="no-padding md-title" ng-switch-when="STANDARD"><strong>{{$ctrl.rate.amount.finalAmount|chCurrency}}</strong></span> <span class="no-padding md-title" ng-switch-when="NOT_REFUNDABLE"><strong>{{$ctrl.rate.amount.finalAmount|chCurrency}}</strong></span></div></div><div layout="column" layout-align="center" class="row-mini g"><div layout layout-align="center center" layout-align-gt-sm="start end"><span ng-switch-when="STANDARD" layout><span ng-if="$ctrl.rate.cancellationPolicy.flexible" class="row-mini text-warn" translate="reservation.rate.flexible"></span> <span ng-if="!$ctrl.rate.cancellationPolicy.flexible" class="row-mini text-success" translate="reservation.cancellation.free"></span> </span><span ng-switch-when="NOT_REFUNDABLE" class="row-mini text-blue-sea" translate="ratesheet.rate.type.notRefundable.abbr"></span> <span><md-icon class="mdi mdi-information-outline md-14 material-icons" ng-class="{\'text-warn\': $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \n\t\t\t\t\t\t\t\t\'text-success\': $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \'text-blue-sea\': $ctrl.rate.type == \'NOT_REFUNDABLE\'}" aria-hidden="true"></md-icon></span></div><div layout layout-align="center center" layout-align-gt-sm="start end" class="text-gray-light"><small ng-switch-when="STANDARD" layout><span ng-if="$ctrl.rate.cancellationPolicy.flexible"><span translate="reservation.rate.flexible.info.label"></span> </span><span ng-if="!$ctrl.rate.cancellationPolicy.flexible"><span translate="reservation.rate.free.info.label"></span> </span></small><small ng-switch-when="NOT_REFUNDABLE"><span translate="reservation.rate.not.refundable.info.label"></span></small></div><div ng-if="$ctrl.$$promotion" ng-switch="$ctrl.$$promotion.promotionType" class="layout-gt-sm-row layout-wrap" ng-class="{\'text-center\': !$ctrl.$mdMedia(\'gt-sm\')}"><span ng-switch-when="STANDARD" class="label flex-xs flex-sm label-inline-block text-wrap bg-info"><ch-truncate text="{{$ctrl.$$promotion.name[$ctrl.chRoomCtrl.localeIso]}}" max-length="20" suffix="..."></ch-truncate>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="MINIMUM_STAY" class="label flex-xs flex-sm label-inline-block text-wrap bg-primary-light"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{$ctrl.$$promotion.minStay}}"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="BOOK_TODAY" class="label flex-xs flex-sm label-inline-block text-wrap bg-primary"><span translate="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="EARLY_BOOKING" class="label flex-xs flex-sm label-inline-block text-wrap bg-success"><span translate="promotions.early"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_MINUTE" class="label flex-xs flex-sm label-inline-block text-wrap bg-blue-sea"><span translate="promotions.last.minute"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_SECOND" class="label flex-xs flex-sm label-inline-block text-wrap bg-warn"><span translate="promotions.last.second"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span></div><div ng-if="$ctrl.rate.type == \'STANDARD\' && ($ctrl.$$promotion.onArrival || !$ctrl.rate.cancellationPolicy.flexible)" class="md-margin no-margin-left no-margin-top" ng-class="{\'text-center\': !$ctrl.$mdMedia(\'gt-sm\')}"><span class="label label-sm bg-success"><span translate="reservation.no.advance.payment"></span></span></div></div></div></div><div layout layout-align="end center" ng-class="{\'no-padding-top\': !$ctrl.$mdMedia(\'gt-sm\')}"><div ng-if="!$ctrl.rate.count || $ctrl.rate.count <= 0" class="layout-column flex"><md-button class="border-radius only-border" ng-class="{\'border-warn text-warn\': $ctrl.$$totalCounter.actual > 0 && $ctrl.$$counter.actual > 0 && $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \'border-success text-success\': $ctrl.$$totalCounter.actual > 0 && $ctrl.$$counter.actual > 0 && $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \n\t\t\t\t\t\t\t\'border-blue-sea text-blue-sea\': $ctrl.$$totalCounter.actual > 0 && $ctrl.$$counter.actual > 0 && $ctrl.rate.type == \'NOT_REFUNDABLE\', \'text-gray-medium\': $ctrl.$$totalCounter.actual <= 0 || $ctrl.$$counter.actual <= 0}" aria-label="Add room" ng-disabled="$ctrl.$$totalCounter.actual <= 0 || $ctrl.$$counter.actual <= 0" ng-click="$ctrl.$selectRate()"><span translate="common.select"></span></md-button></div><div ng-if="$ctrl.rate.count && $ctrl.rate.count > 0" flex><div class="layout-align-center-center layout-align-gt-sm-end-center layout-row"><small class="text-bold text-gray-light" ng-if="$ctrl.$$totalCounter.actual > 0 && $ctrl.$$counter.actual > 0" translate="room.add.other.one"></small> <small class="text-bold text-success text-center" ng-class="{\'text-warn\': $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \'text-success\': $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \n\t\t\t  \t\t\t\t\'text-blue-sea\': $ctrl.rate.type == \'NOT_REFUNDABLE\'}" ng-if="$ctrl.$$totalCounter.actual <= 0 || $ctrl.$$counter.actual <= 0" translate="room.last.rate.selected"></small></div><div class="layout-align-center-center layout-align-gt-sm-end-center layout-row"><ch-counter ng-model="$ctrl.rate.count" min="0" btn-class="md-icon-button only-border" btn-active-class="{{$ctrl.rate.type == \'STANDARD\' ? $ctrl.rate.cancellationPolicy.flexible ? \'border-warn\' : \'border-success\' : \'border-blue-sea\'}}" icon-active-class="{{$ctrl.rate.type == \'STANDARD\' ? $ctrl.rate.cancellationPolicy.flexible ? \'text-warn\' : \'text-success\' : \'text-blue-sea\'}}" plus-disabled="$ctrl.$$totalCounter.actual <= 0 || $ctrl.$$counter.actual <= 0" on-plus="$ctrl.$addRate()" on-minus="$ctrl.$removeRate()"></ch-counter></div></div></div></div></md-list-item><div class="layout-row layout-wrap layout-padding-sm text-center"><span ng-if="$ctrl.isBestRate" class="text-success md-subhead"><md-icon class="mdi mdi-check-all text-success animated infinite tada"></md-icon><strong>&nbsp;<span translate="reservation.bestHotelRate.description"></span></strong> </span><span ng-if="!$ctrl.isBestRate && $ctrl.$$promotion" ng-switch="$ctrl.$$promotion.promotionType" class="layout-row layout-wrap"><span ng-switch-when="STANDARD|EARLY_BOOKING|MINIMUM_STAY" ng-switch-when-separator="|" class="text-wrap" ng-class="{\'text-info\': $ctrl.$$promotion.promotionType == \'STANDARD\', \'text-primary-light\': $ctrl.$$promotion.promotionType == \'EARLY_BOOKING\',  \'text-success\': $ctrl.$$promotion.promotionType == \'MINIMUM_STAY\'}"><md-icon class="mdi mdi-alarm-check animated infinite tada" ng-class="{\'text-info\': $ctrl.$$promotion.promotionType == \'STANDARD\', \'text-primary-light\': $ctrl.$$promotion.promotionType == \'EARLY_BOOKING\',  \'text-success\': $ctrl.$$promotion.promotionType == \'MINIMUM_STAY\'}"></md-icon><span>&nbsp;<span translate="reservation.promotion.STANDARD.description"></span></span> </span><span ng-switch-when="BOOK_TODAY" class="text-wrap text-primary"><md-icon class="mdi mdi-alarm-check text-primary animated infinite tada"></md-icon><span>&nbsp;<span translate="reservation.promotion.BOOK_TODAY.description"></span></span> </span><span ng-switch-when="LAST_MINUTE" class="text-wrap text-blue-sea"><md-icon class="mdi mdi-alarm-check text-blue-sea animated infinite tada"></md-icon><span>&nbsp;<span translate="reservation.promotion.LAST_MINUTE.description"></span></span> </span><span ng-switch-when="LAST_SECOND" class="text-wrap text-warn"><md-icon class="mdi mdi-alarm-check text-warn animated infinite tada"></md-icon><span>&nbsp;<span translate="reservation.promotion.LAST_SECOND.description"></span></span> </span></span><span ng-if="!$ctrl.isBestRate && !$ctrl.$$promotion && $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible" class="text-success"><md-icon class="mdi mdi-heart-pulse text-success animated infinite tada"></md-icon><span>&nbsp;<span translate="reservation.rate.free.text.description"></span></span> </span><span ng-if="!$ctrl.isBestRate && !$ctrl.$$promotion && $ctrl.rate.type == \'NOT_REFUNDABLE\' && $ctrl.rate.savingAmount.finalAmount" class="text-blue-sea"><md-icon class="mdi mdi-auto-fix text-blue-sea animated infinite tada"></md-icon><span>&nbsp;<span translate="reservation.rate.not.refundable.text.description" translate-value-price="{{$ctrl.rate.savingAmount.finalAmount|chCurrency}}"></span></span></span></div><div id="{{\'ch-room-\' + $ctrl.chRoomCtrl.$$index + \'-rates-\' + $ctrl.$$index}}" ng-show="$ctrl.$$showInfo" layout="column" layout-padding ng-class="{\'animated fadeIn\': $ctrl.$$showInfo}" class="text-gray-light text-small"><div><h4 class="md-body-1 no-margin-bottom"><strong translate="common.payment"></strong></h4><div th:replace="public/partials/hotel/common/policy/rate-payment-policy"></div><div layout="column"><span><span ng-if="$ctrl.$$nights == 1" translate="reservation.rates.info.night"></span> <span ng-if="$ctrl.$$nights > 1" translate="reservation.rates.info.nights" translate-value-count="{{$ctrl.$$nights}}"></span> </span><span ng-if="$ctrl.$$vatTax"><strong><span translate="common.included"></span>:</strong>&nbsp;{{$ctrl.$$vatTax}}%&nbsp;<span translate="billing.vat.tax"></span> </span><span ng-if="$ctrl.$$cityTax"><strong><span translate="common.included.not"></span>:</strong>&nbsp;{{$ctrl.$$cityTax|chCurrency}}&nbsp;<span translate="reservation.cityTax.description"></span></span></div><div ng-if="$ctrl.rate.type == \'STANDARD\' && $ctrl.$$promotion.paymentMethod[0].onArrival" class="bg-success text-white layout-margin"><md-icon class="mdi mdi-hospital-building md-18 text-white"></md-icon><span translate="reservation.policy.payment.onArrival"></span></div><div ng-if="hotel.paymentSettings" layout="column" class="md-padding no-padding-left"><strong><span translate="payment.methods.accepted"></span>:</strong> <span ng-if="$ctrl.$$promotion.paymentMethod.length" ng-repeat="paymentMethod in $ctrl.$$promotion.paymentMethod track by $index" ng-switch="paymentMethod.type" class="layout-margin ng-scope layout-wrap layout-row layout-align-start-center"><span ng-switch-when="PAYPAL" ng-if="hotel.paymentSettings.paypal" class="no-margin-left"><md-icon class="pf pf-paypal md-18"></md-icon><md-tooltip><span translate="payment.type.PAYPAL"></span></md-tooltip></span><span ng-switch-when="CREDIT_CARD" ng-if="hotel.paymentSettings.creditCards.length"><span ng-repeat="type in hotel.paymentSettings.creditCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA"></span></md-tooltip></span><span ng-switch-when="MASTERCARD" class="layout-margin no-margin-left"><md-icon class="pf pf-mastercard md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MASTERCARD"></span></md-tooltip></span><span ng-switch-when="AMEX" class="layout-margin no-margin-left"><md-icon class="pf pf-american-express md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.AMEX"></span></md-tooltip></span><span ng-switch-when="BIT_COIN" class="layout-margin no-margin-left"><md-icon class="pf pf-bitcoin md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BIT_COIN"></span></md-tooltip></span><span ng-switch-when="CARTA_SI" class="layout-margin no-margin-left"><md-icon class="pf pf-carta-si md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CARTA_SI"></span></md-tooltip></span><span ng-switch-when="DINERS_CLUB" class="layout-margin no-margin-left"><md-icon class="pf pf-diners md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DINERS_CLUB"></span></md-tooltip></span><span ng-switch-when="DISCOVER" class="layout-margin no-margin-left"><md-icon class="pf pf-discover md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DISCOVER"></span></md-tooltip></span><span ng-switch-when="JCB" class="layout-margin no-margin-left"><md-icon class="pf pf-jcb md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.JCB"></span></md-tooltip></span><span ng-switch-when="UNION_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-unionpay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.UNION_PAY"></span></md-tooltip></span></span></span><span ng-switch-when="OTHER_CARD" ng-if="hotel.paymentSettings.otherCards.length"><span ng-repeat="type in hotel.paymentSettings.otherCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA_ELECTRON" class="layout-margin no-margin-left"><md-icon class="pf pf-visa-electron md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA_ELECTRON"></span></md-tooltip></span><span ng-switch-when="V_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.V_PAY"></span></md-tooltip></span><span ng-switch-when="MAESTRO" class="layout-margin no-margin-left"><md-icon class="pf pf-maestro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MAESTRO"></span></md-tooltip></span><span ng-switch-when="CIRRUS" class="layout-margin no-margin-left"><md-icon class="pf pf-cirrus md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CIRRUS"></span></md-tooltip></span><span ng-switch-when="POSTEPAY" class="layout-margin no-margin-left"><md-icon class="pf pf-postepay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.POSTEPAY"></span></md-tooltip></span><span ng-switch-when="APPLE_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-apple-pay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.APPLE_PAY"></span></md-tooltip></span><span ng-switch-when="PAGSEGURO" class="layout-margin no-margin-left"><md-icon class="pf pf-pagseguro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.PAGSEGURO"></span></md-tooltip></span><span ng-switch-when="BANCONTACT" class="layout-margin no-margin-left"><md-icon class="pf pf-bancontact-mister-cash md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCONTACT"></span></md-tooltip></span><span ng-switch-when="BANCOMAT" class="layout-margin no-margin-left"><md-icon class="pf pf-card md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCOMAT"></span></md-tooltip></span></span></span></span><span ng-if="!$ctrl.$$promotion.paymentMethod" class="layout-margin ng-scope layout-wrap layout-row layout-align-start-center"><span ng-if="hotel.paymentSettings.paypal" class="layout-margin no-margin-left"><md-icon class="pf pf-paypal md-18"></md-icon><md-tooltip><span translate="payment.type.PAYPAL"></span></md-tooltip></span><span ng-if="hotel.paymentSettings.creditCards.length" class="no-margin"><span ng-repeat="type in hotel.paymentSettings.creditCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA"></span></md-tooltip></span><span ng-switch-when="MASTERCARD" class="layout-margin no-margin-left"><md-icon class="pf pf-mastercard md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MASTERCARD"></span></md-tooltip></span><span ng-switch-when="AMEX" class="layout-margin no-margin-left"><md-icon class="pf pf-american-express md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.AMEX"></span></md-tooltip></span><span ng-switch-when="BIT_COIN" class="layout-margin no-margin-left"><md-icon class="pf pf-bitcoin md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BIT_COIN"></span></md-tooltip></span><span ng-switch-when="CARTA_SI" class="layout-margin no-margin-left"><md-icon class="pf pf-carta-si md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CARTA_SI"></span></md-tooltip></span><span ng-switch-when="DINERS_CLUB" class="layout-margin no-margin-left"><md-icon class="pf pf-diners md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DINERS_CLUB"></span></md-tooltip></span><span ng-switch-when="DISCOVER" class="layout-margin no-margin-left"><md-icon class="pf pf-discover md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DISCOVER"></span></md-tooltip></span><span ng-switch-when="JCB" class="layout-margin no-margin-left"><md-icon class="pf pf-jcb md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.JCB"></span></md-tooltip></span><span ng-switch-when="UNION_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-unionpay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.UNION_PAY"></span></md-tooltip></span></span></span><span ng-if="hotel.paymentSettings.otherCards.length" class="no-margin"><span ng-repeat="type in hotel.paymentSettings.otherCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA_ELECTRON" class="layout-margin no-margin-left"><md-icon class="pf pf-visa-electron md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA_ELECTRON"></span></md-tooltip></span><span ng-switch-when="V_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.V_PAY"></span></md-tooltip></span><span ng-switch-when="MAESTRO" class="layout-margin no-margin-left"><md-icon class="pf pf-maestro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MAESTRO"></span></md-tooltip></span><span ng-switch-when="CIRRUS" class="layout-margin no-margin-left"><md-icon class="pf pf-cirrus md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CIRRUS"></span></md-tooltip></span><span ng-switch-when="POSTEPAY" class="layout-margin no-margin-left"><md-icon class="pf pf-postepay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.POSTEPAY"></span></md-tooltip></span><span ng-switch-when="APPLE_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-apple-pay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.APPLE_PAY"></span></md-tooltip></span><span ng-switch-when="PAGSEGURO" class="layout-margin no-margin-left"><md-icon class="pf pf-pagseguro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.PAGSEGURO"></span></md-tooltip></span><span ng-switch-when="BANCONTACT" class="layout-margin no-margin-left"><md-icon class="pf pf-bancontact-mister-cash md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCONTACT"></span></md-tooltip></span><span ng-switch-when="BANCOMAT" class="layout-margin no-margin-left"><md-icon class="pf pf-card md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCOMAT"></span></md-tooltip></span></span></span></span></div></div><div><h4 class="md-body-1 no-margin-bottom no-margin-top"><strong translate="reservation.rates.daily.details"></strong></h4><div layout layout-wrap layout-padding-sm><div ng-repeat="dailyRate in $ctrl.rate.dailyRates track by $index" layout="column" layout-padding-sm layout-align="start center"><strong class="no-padding-bottom">{{dailyRate.date|date:"shortDate"}}</strong><div class="no-padding-bottom row-mini" layout="column" layout-align="center center"><div ng-if="dailyRate.promotion" ng-switch="dailyRate.promotion.promotionType"><span ng-switch-when="STANDARD" class="label label-xs bg-info"><ch-truncate text="{{dailyRate.promotion.name[$ctrl.chRoomCtrl.localeIso]}}" max-length="20" suffix="..."></ch-truncate>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="MINIMUM_STAY" class="label label-xs bg-primary-light"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{promotion.minStay}}"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="BOOK_TODAY" class="label label-xs bg-primary"><span translate="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="EARLY_BOOKING" class="label label-xs bg-success"><span translate="promotions.early"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_MINUTE" class="label label-xs bg-blue-sea"><span translate="promotions.last.minute"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_SECOND" class="label label-xs bg-warn"><span translate="promotions.last.second"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span></div><small class="text-gray-light" ng-if="dailyRate.amount.initialAmount > 0 && dailyRate.amount.initialAmount > dailyRate.amount.finalAmount"><i><del>{{dailyRate.amount.initialAmount|chCurrency}}</del></i></small></div><div class="no-padding-top">{{dailyRate.amount.finalAmount|chCurrency}}</div></div></div></div><div class="no-padding"><h4 class="layout-padding md-body-1 no-margin no-padding-bottom no-padding-left"><strong translate="common.cancellation"></strong></h4><div th:replace="public/partials/hotel/common/policy/rate-policy"></div></div><md-button class="text-gray-light auto-height row-mini" ng-click="$ctrl.$toggleInfo(false)" aria-label="Hide info"><md-icon class="mdi mdi-chevron-up text-gray-light md-18"></md-icon><small translate="common.hide"></small></md-button></div><md-divider ng-if="!$last"></md-divider></div>')}]);
=======
!function(){"use strict";angular.module("itaca.components",["itaca.components-templates","ngMaterial","itaca.services","itaca.utils","pascalprecht.translate","tmh.dynamicLocale"]),angular.module("itaca.components").config(["$windowProvider","$translateProvider","tmhDynamicLocaleProvider",function(t,e,n){var a=(t.$get().navigator.language||t.$get().navigator.userLanguage).split("-")[0].toLowerCase();e.useLoader("i18nLoader"),e.preferredLanguage(a),e.useCookieStorage(),e.useMissingTranslationHandlerLog(),$translateSanitizationProvider.addStrategy("sce","sceStrategy"),e.useSanitizeValueStrategy("sce"),n.localeLocationPattern("/resources/public/js/i18n/angular-locale_{{locale}}.js"),n.useCookieStorage(),n.defaultLocale(a)}])}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){if(l.ngModel.$originalValue=l.ngModel.$originalValue||angular.copy(l.ngModel),l.hideInitialValue=!!_.isBoolean(l.hideInitialValue)&&l.hideInitialValue,l.$$pattern=_.isBoolean(l.allowNegative)&&l.allowNegative?e.priceNoStrict:e.price,l.$$currentLang=i.current(),l.cssClass=l.cssClass||"font-18 no-margin minimal-input max-width-130px ",l.iconClass=l.iconClass||"mdi mdi-pencil md-18 text-primary material-icons",l.originalValueClass=l.originalValueClass||"md-caption text-gray-light",l.refreshIconClass=l.refreshIconClass||"mdi mdi-refresh md-18 material-icons",l.originalValueLabel||n("common.amount.original").then(function(t){l.originalValueLabel=t},_.stubFalse()),l.hideIcon=!!_.isBoolean(l.hideIcon)&&l.hideIcon,l.readOnlyView=!!_.isBoolean(l.readOnlyView)&&l.readOnlyView,l.showOriginalValue=!!_.isBoolean(l.showOriginalValue)&&l.showOriginalValue,l.ngModel.initialAmount&&l.ngModel.initialAmount!=l.ngModel.finalAmount||(l.ngModel.initialAmount=0!==l.ngModel.initialAmount?l.ngModel.finalAmount:l.ngModel.initialAmount),l.disabledLimit)l.max=!1;else if(l.max=l.ngModel.initialAmount,l.promotion&&l.promotion.discount&&l.promotion.discount.finalAmount){var t=0;t="PERCENTAGE"==l.promotion.discount.type?a.calculateDiscount(l.ngModel.initialAmount,l.promotion.discount.finalAmount,"PERCENTAGE"):l.promotion.discount.finalAmount,l.max=l.max-t}l.$initWatches()},this.$refreshPrice=function(){l.ngModel&&l.ngModel.$originalValue&&(l.ngModel.finalAmount=angular.copy(l.ngModel.$originalValue.finalAmount),l.ngModel.initialAmount=angular.copy(l.ngModel.$originalValue.initialAmount),angular.isFunction(l.onUpdate)&&l.onUpdate({value:l.ngModel}))},this.$adeguateAmount=function(){if(l.ngModel.$originalValue&&l.ngModel.finalAmount!=l.ngModel.$originalValue.finalAmount){if(!_.isNil(l.promotion)&&l.promotion.discount&&l.promotion.discount.finalAmount){var t=0;t="PERCENTAGE"==l.promotion.discount.type?100*l.ngModel.finalAmount/(100-l.promotion.discount.finalAmount):l.ngModel.finalAmount+l.promotion.discount.finalAmount,l.ngModel.initialAmount=t}else l.ngModel.initialAmount<l.ngModel.finalAmount&&(l.ngModel.initialAmount=l.ngModel.finalAmount);angular.isFunction(l.onUpdate)&&l.onUpdate({value:l.ngModel})}},this.$initWatches=function(){t.$watch(function(){return l.ngModel.finalAmount},function(t,e){l.$adeguateAmount()})}}t.$inject=["$scope","REGEXP","$translate","NumberUtils","Locale"],angular.module("itaca.components").component("chAmountInput",{require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",ngMin:"<?",inputName:"@",promotion:"<?",errorMessages:"@",cssClass:"@",hideIcon:"@",iconClass:"@",readOnlyView:"<?",hideInitialValue:"<?",showOriginalValue:"<?",originalValueClass:"<?",originalValueLabel:"<?",ngDisabled:"<?",disabledLimit:"<?",hideRefreshIcon:"<?",refreshIconClass:"@",allowNegative:"<?",onUpdate:"&?"},controller:t,template:'<ng-form name="chAmountInputForm" ng-class="{"text-gray-light cursor-disabled": $ctrl.ngDisabled}"><div class="no-padding-bottom no-padding-top row-mini layout-column layout-align-center-center"><span ng-if="$ctrl.promotion" ng-switch="$ctrl.promotion.promotionType"><span ng-switch-when="STANDARD" class="label label-xs bg-info"><ch-truncate text="{{$ctrl.promotion.name[$ctrl.$$currentLang.iso]}}" max-length="20"  suffix="..."></ch-truncate>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="MINIMUM_STAY" class="label label-xs bg-primary-light"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{$ctrl.promotion.days}}"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="BOOK_TODAY" class="label label-xs bg-danger"><span translate-once="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="EARLY_BOOKING" class="label label-xs bg-warn"><span translate-once="promotions.early"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_MINUTE" class="label label-xs bg-primary"><span translate-once="promotions.last.minute"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_SECOND" class="label label-xs bg-success"><span translate-once="promotions.last.second"></span>&nbsp;<span ng-if="$ctrl.promotion.discount.type=="PERCENTAGE"">-{{$ctrl.promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.promotion.discount.type=="PRICE"">-{{$ctrl.promotion.discount.finalAmount|chCurrency}}</span></span></span><small class="text-gray-light" ng-if="!$ctrl.hideInitialValue"><span ng-if="$ctrl.ngModel.initialAmount > 0 && $ctrl.ngModel.initialAmount > $ctrl.ngModel.finalAmount"><i><del>{{($ctrl.ngModel.initialAmount|chCurrency)}}</del></i></span><span ng-if="!($ctrl.ngModel.initialAmount > 0 && $ctrl.ngModel.initialAmount > $ctrl.ngModel.finalAmount)"></span></small></div><div class="no-padding-top"><div ng-if="$ctrl.readOnlyView" class="text-center">{{$ctrl.ngModel.finalAmount|chCurrency}}</div><div ng-if="!$ctrl.readOnlyView"><div class="text-right" ng-if="$ctrl.showOriginalValue"><ch-original-value ng-model="$ctrl.ngModel.finalAmount" refer-to="$ctrl.ngModel.$originalValue.finalAmount" filter="chCurrency" label="{{$ctrl.originalValueLabel}}" css-class="{{$ctrl.originalValueClass}}"></ch-original-value></div><div class="layout-align-end-center layout-row row-mini"><md-input-container class="{{$ctrl.cssClass}}" ng-class="{"md-icon-right": !$ctrl.hideRefreshIcon && $ctrl.ngModel.finalAmount != $ctrl.ngModel.$originalValue.finalAmount}"><md-icon ng-if="!$ctrl.hideIcon && !$ctrl.ngDisabled" class="{{$ctrl.iconClass}}"></md-icon><input type="number" name="{{$ctrl.inputName}}" ng-model="$ctrl.ngModel.finalAmount" ng-min="$ctrl.ngMin" step="0.01" ng-max="$ctrl.max" ng-pattern="$ctrl.$$pattern" required ng-disabled="$ctrl.ngDisabled" aria-label="Edit amount" class="text-center"><md-icon ng-if="!$ctrl.hideRefreshIcon && !$ctrl.ngDisabled && $ctrl.ngModel.finalAmount != $ctrl.ngModel.$originalValue.finalAmount" class="{{$ctrl.refreshIconClass}} clickable" ng-click="$ctrl.$refreshPrice()" aria-label="reset price"><md-tooltip><span translate-once="common.restore"></span></md-tooltip></md-icon><div ng-messages="chAmountInputForm[$ctrl.inputName].$error"><span ng-message="required"><span translate-once="error.required"></span></span><span ng-message="min"><span translate="error.amount.min" translate-values="{num: ($ctrl.ngMin | chCurrency)}"></span></span><span ng-message="max"><span translate="error.amount.max" translate-values="{num: ($ctrl.max | chCurrency)}"></span></span><span ng-message="$$pattern"><span translate-once="error.field.generic.invalid"></span></span><span ng-if="errorMessages" ng-repeat="error in $ctrl.errorMessages" ng-message="error.key"><span translate="error.label"></span></span></div></md-input-container></div></div></div></ng-form>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.buttonClass=e.buttonClass||(e.iconClass&&!e.label?"md-icon-button":""),e.selectedClass=e.selectedClass||"md-primary",e.option={value:e.ngValue,selected:!1},e.chArrayInputCtrl.$addOption(e.option)},this.$toggle=function(){e.chArrayInputCtrl.$toggleOption(e.option)}}t.$inject=["$scope"],angular.module("itaca.components").component("chArrayInputOption",{require:{chArrayInputCtrl:"^chArrayInput"},bindings:{ngValue:"<",buttonClass:"@",iconClass:"@",label:"@",labelClass:"@",selectedClass:"@"},controller:t,template:'<md-button class="{{$ctrl.buttonClass}}" ng-class="$ctrl.option.selected ? $ctrl.selectedClass : \'\'" ng-click="$ctrl.$toggle()" aria-label="Toggle option"><md-icon ng-if="$ctrl.iconClass" class="material-icons {{$ctrl.iconClass}}"></md-icon><div ng-if="$ctrl.labelClass" class="{{$ctrl.labelClass}}" ng-bind-html="$ctrl.label"></div></md-button>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.ngModelCtrl.$modelValue=angular.isArray(e.ngModelCtrl.$modelValue)?e.ngModelCtrl.$modelValue:[],e.options=angular.isArray(e.options)?e.options:[],e.ngRequired&&e.$watchCollection(function(){return e.ngModelCtrl.$modelValue},function(t,n){e.ngRequired&&e.ngModelCtrl.$setValidity("required",!_.isEmpty(e.ngModelCtrl.$modelValue))})},this.$addOption=function(t){e.options.push(t)},this.$toggleOption=function(t){t.selected?_.pull(e.ngModelCtrl.$modelValue,t.value):e.ngModelCtrl.$modelValue.push(t.value),t.selected=!t.selected}}t.$inject=["$scope"],angular.module("itaca.components").component("chArrayInput",{require:{ngModelCtrl:"ngModel"},transclude:!0,bindings:{ngModel:"=",ngRequired:"<?",options:"<?"},controller:t,template:'<div class="layout-padding"><div class="layout-row layout-wrap" ng-transclude></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.reservation=a.reservation||{},a.step=_.isNil(a.step)?1:parseInt(a.step),a.$initWatches()},this.$next=function(){a.onNext&&a.onNext()},this.$checkMinEndDate=function(){if(a.reservation.checkin){var t=n.absoluteMoment(a.reservation.checkin),e=n.absoluteMoment(t).add(1,"days");a.$$minEndDate=e.toDate();var i=n.absoluteMoment(t).add(a.maxRange,"days");a.$$maxEndDate=i.toDate(),!a.reservation.checkout||n.absoluteMoment(a.reservation.checkout).isBefore(e,"day")?a.reservation.checkout=angular.copy(a.$$minEndDate):a.reservation.checkout&&n.absoluteMoment(a.reservation.checkout).isAfter(i,"day")&&(a.reservation.checkout=angular.copy(a.$$maxEndDate))}},this.$calculateNights=function(){a.reservation.nights=n.absoluteMoment(a.reservation.checkout).diff(n.absoluteMoment(a.reservation.checkin),"days")},this.$search=function(){a.onSearch&&a.onSearch({checkin:a.reservation.checkin,checkout:a.reservation.checkout,nights:a.reservation.nights,people:a.reservation.people})},this.$initWatches=function(){t.$watchGroup([function(){return a.reservation.checkin},function(){return a.reservation.checkout}],function(t,e){a.$checkMinEndDate(),a.$calculateNights(),n.absoluteMoment(t[0]).isSame(n.absoluteMoment(e[0]),"day")&&n.absoluteMoment(t[1]).isSame(n.absoluteMoment(e[1]),"day")||a.onDateChanged&&a.onDateChanged({checkin:a.reservation.checkin,checkout:a.reservation.checkout,nights:a.reservation.nights})})}}t.$inject=["$scope","$timeout","DateUtils"],angular.module("itaca.components").component("chBookingForm",{bindings:{reservation:"<",minDate:"<?",maxRange:"<?",step:"<?",onDateChanged:"&?",onSearch:"&?",onNext:"&?"},controller:t,template:'<ng-form name="bookingForm" novalidate layout="column" layout-padding><div class="md-subhead no-padding-top no-padding-bottom text-gray-light text-center"><strong ng-if="$ctrl.reservation.nights && $ctrl.reservation.rooms.length"><span translate="reservation.summary.your"></span></strong><strong ng-if="$ctrl.reservation.nights && !$ctrl.reservation.rooms.length"><span translate="reservation.summary.search"></span></strong><strong ng-if="!$ctrl.reservation.nights" ><span translate="reservation.search.your.room"></span></strong></div><div ng-if="!$ctrl.step || $ctrl.step <= 1" class="no-padding-top no-padding-bottom"><div flex layout="column"><ch-date-range-picker label="{{\'reservation.when.question\'|translate}}"start-label="{{\'date.checkin.select.alt\'|translate}}"start="$ctrl.reservation.checkin"start-min-date="$ctrl.minDate"start-error-messages="{mindate: (\'error.date.before.today\'|translate)}"end-label="{{\'date.checkout.select.alt\'|translate}}"end="$ctrl.reservation.checkout"end-min-date="$ctrl.$$minEndDate" end-max-date="$ctrl.$$maxEndDate"end-error-messages="{mindate: (\'error.date.end.before.start\'|translate), maxdate: (\'error.reservation.search.maxdate\'|translate)}"max-range="$ctrl.maxRange"diff-label-singular="{{\'common.night\'|translate}}"diff-label-plural="{{\'common.nights\'|translate}}"use-utc="true" disable-body-scroll="true"></ch-date-range-picker></div><div><md-divider></md-divider></div><div flex layout="column"><ch-people-picker label="{{\'reservation.people.question\'|translate}}"people="$ctrl.reservation.requestPeople"ng-required="true"has-confirm="false"disable-body-scroll="true"></ch-people-picker></div></div><div ng-if="$ctrl.step > 1" class="no-padding-top no-padding-bottom"><div flex layout="column"><div layout="column" layout-padding class="text-center"><div class="text-gray-light text-small no-padding-bottom"><span>{{\'reservation.when.question\'|translate}}</span></div><div class="layout layout-wrap layout-align-center-center row-mini text-lowercase no-padding-bottom"><span><span translate="date.from.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.reservation.checkin|utcDate:"shortDate"}}</strong></span>&nbsp;</span><span><span translate="date.to.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.reservation.checkout|utcDate:"shortDate"}}</strong></span></span><span ng-if="$ctrl.reservation.nights" class="text-gray-light text-small no-padding no-margin text-lowercase">(<span>&nbsp;{{$ctrl.reservation.nights}}&nbsp;</span><span ng-show="$ctrl.reservation.nights == 1">{{\'common.night\'|translate}})</span> <span ng-show="$ctrl.reservation.nights > 1">{{\'common.nights\'|translate}})</span></span></div></div></div><div><md-divider></md-divider></div><div flex layout="column"><div layout="column" layout-padding class="text-center"><div class="text-gray-light text-small no-padding-bottom"><span translate="reservation.people.question"></span></div><div ng-if="$ctrl.reservation.people" class="md-subhead text-wrap row-mini no-padding-bottom"><strong><ch-people-summary people="$ctrl.reservation.people"></ch-people-summary></strong></div><div ng-if="$ctrl.step == 2 && ($ctrl.reservation.remainingPeople.adults > 0 || $ctrl.reservation.remainingPeople.boys > 0 || $ctrl.reservation.remainingPeople.children > 0 || $ctrl.reservation.remainingPeople.kids > 0)"class="text-lowercase text-small text-warn"><md-icon class="mdi mdi-alert md-14 text-warn"></md-icon><span translate="reservation.people.unsatisfied"></span>:&nbsp;<strong><ch-people-summary people="$ctrl.reservation.remainingPeople"></ch-people-summary></strong>&nbsp;<span translate="reservation.people.unsatisfied.to.arrange"></span>.<span class="text-initial" translate="reservation.people.unsatisfied.add.beds.or.rooms"></span>.</div></div></div></div><div class="no-padding-top"><md-divider></md-divider></div><div id="booking-summary" class="no-margin-top no-margin-bottom no-padding-top no-padding-bottom" ng-show="$ctrl.reservation.totalAmount.finalAmount && $ctrl.reservation.totalAmount.finalAmount > 0"><div class="text-gray-light text-small text-center"><span translate="reservation.rooms.details"></span>:</div><ul><li ng-repeat="room in $ctrl.reservation.rooms" class="padding-left layout-row layout-wrap "><small class="flex"><strong>1&nbsp;<span translate="{{room.type.roomType.nameKey}}"></span>&nbsp;</strong><span ng-if="$ctrl.reservation.nights > 1">(<span>{{room.totalRate.dailyRates[0].amount.finalAmount|chCurrency}}</span><span>&nbsp;x&nbsp;{{$ctrl.reservation.nights}}<span translate="date.days.abbr"></span></span>)</span></small><div class="text-right"><div class="text-gray-light" ng-if="room.totalRate.amount.initialAmount != room.totalRate.amount.finalAmount"><small><del><em>{{room.totalRate.amount.initialAmount|chCurrency}}</em></del></small></div><div><span>{{room.totalRate.amount.finalAmount|chCurrency}}</span></div></div><ul class="flex-100 no-padding no-margin"><li ng-if="!serviceSold.included" ng-repeat="serviceSold in room.services" class="padding-left layout-row layout-wrap" ng-class="{\'text-danger\': serviceSold.toRemove}"><small class="flex"><span><span ng-if="serviceSold.count > 1">{{serviceSold.count}}&nbsp;x&nbsp;</span><span ng-if="serviceSold.count <= 1">1&nbsp;</span><span translate="{{serviceSold.service.type.nameKey}}"></span>&nbsp;</span><span ng-if="serviceSold.service.paymentType == \'PER_PERSON\' && ! serviceSold.toRemove"><ch-people-summary people="serviceSold.people" no-details="true"></ch-people-summary>&nbsp;</span><span ng-if="$ctrl.reservation.nights > 1 && serviceSold.service.frequency == \'DAILY\'">(x&nbsp;{{$ctrl.reservation.nights}}<span translate="date.days.abbr"></span>)</span></small><span class="text-right"><span ng-if="serviceSold.amount.finalAmount > 0">{{serviceSold.amount.finalAmount|chCurrency}}</span><i ng-if="serviceSold.amount.finalAmount <= 0" translate="common.free"></i></span></li></ul><ul class="flex-100 no-padding no-margin"><li ng-repeat="bed in room.otherBeds" class="padding-left layout-row layout-wrap"><small class="flex"><span>1&nbsp;<span class="text-lowercase" translate="bed.bed"></span>&nbsp;<span translate="{{\'bed.\' + bed.bed.type}}"></span>&nbsp;</span><span ng-if="$ctrl.reservation.nights > 1">(x&nbsp;{{$ctrl.reservation.nights}}<span translate="date.days.abbr"></span>)</span></small><span class="text-right"><span>{{bed.amount.finalAmount|chCurrency}}</span></span></li></ul></li></ul><md-divider></md-divider><div class="layout-row layout-wrap layout-padding no-padding-left no-padding-right" ng-if="$ctrl.reservation.totalAmount.finalAmount"><div class="flex no-padding" style="min-width: 125px"><div class="md-headline"><span translate="common.total"></span>:</div><div style="margin-top:-6px;" ng-if="appOptions.currentCurrency != hotel.currency"><small>(<span translate="currency.your.currency"></span>)</small></div></div><div class="text-right no-padding md-headline"><span>{{$ctrl.reservation.totalAmount.finalAmount|chCurrency}}</span><span ng-if="appOptions.currentCurrency != hotel.currency">*</span></div></div><div class="layout-row layout-padding no-padding-left no-padding-right no-padding-top" ng-if="$ctrl.reservation.totalAmount.finalAmount && appOptions.currentCurrency != hotel.currency"><div class="flex no-padding"><div class="md-subhead"><span translate="common.total"></span>:</div><div style="margin-top:-6px;"><small>(<span translate="currency.hotel.currency"></span>)</small></div></div><div class="md-subhead text-right no-padding"><span>{{$ctrl.reservation.totalAmount.finalAmount | chCurrency:hotel.currency }}</span></div></div><div class="text-gray-light layout-row no-padding" ng-if="$ctrl.reservation.totalAmount.finalAmount && appOptions.currentCurrency != hotel.currency"><small class="layout-column layout-margin no-margin"><span class="no-margin"><span translate="currency.info.payment" translate-values="{name: hotel.name}"></span><span>:&nbsp;{{ 1 | chCurrency:hotel.currency}} = {{ 1 | chCurrency}}</span></span><span class="no-margin-left no-margin-bottom no-margin-right"><span translate="currency.info.payment2"></span></span></small></div></div><div layout="column" class="no-padding" ng-switch="$ctrl.step"><div ng-switch-default layout="column"><md-button class="md-raised md-primary row-1" ng-disabled="bookingForm.$invalid" ch-click="$ctrl.$search()" aria-label="Check availability"><div layout="column" layout-padding><span translate="reservation.availability.check"></span></div></md-button></div><div ng-switch-when="1" layout="column"><md-button class="md-raised md-primary row-1" ng-disabled="$ctrl.reservation.rooms.length <= 0" ng-click="$ctrl.$next()" aria-label="Book now"><div layout="column" layout-padding><span ng-if="$ctrl.reservation.rooms.length"><span translate="reservation.instant"></span><md-icon class="mdi mdi-chevron-down" ng-class="{\'animated infinite bounce\':$ctrl.reservation.rooms.length}"></md-icon></span><span ng-if="!$ctrl.reservation.rooms.length"><span translate="reservation.rooms.select"></span></span></div></md-button></div><div ng-switch-when="2|3|4" ng-switch-when-separator="|" layout="column"><md-button class="md-raised row-1" ng-class="{\'md-primary\': $ctrl.step == 2, \'bg-success\': $ctrl.step == 3}" ng-click="$ctrl.$next()" aria-label="Book now" ng-switch="$ctrl.step"><div ng-switch-when="2" layout="column" layout-padding><span><span translate="common.last.step"></span><md-icon class="mdi mdi-chevron-down animated infinite bounce"></md-icon></span></div><div ng-switch-when="3" layout="column" layout-padding><div class="text-initial no-padding"><small translate="reservation.text.alright"></small></div><div class="text-uppercase no-padding"><strong translate="reservation.book.now" style="margin-left: 24px;"></strong><md-icon class="mdi mdi-chevron-down text-white animated infinite bounce"></md-icon></div><small ng-if="$ctrl.reservation.guest.email" class="ng-binding ng-scope no-padding text-initial text-wrap"><span><span translate="reservation.email.confirm.to"></span>:</span><span>{{$ctrl.reservation.guest.email}}</span></small></div></md-button></div></div><div class="layout-column layout-padding no-padding text-center" ng-if="$ctrl.step == 1 && $ctrl.reservation.rooms.length > 0"><span class="no-padding-bottom"><md-icon class="mdi mdi-checkbox-marked-circle-outline text-success md-18"></md-icon><span class="text-success" translate="common.only.two.min"></span></span></div><div layout="column" class="text-gray-light" ng-if="$ctrl.reservation.nights"><small><span ng-if="$ctrl.reservation.nights == 1" translate="reservation.rates.info.night"></span><span ng-if="$ctrl.reservation.nights > 1" translate="reservation.rates.info.nights" translate-value-count="{{$ctrl.reservation.nights}}"></span></small><small ng-if="hotel.vatTax"><strong><span translate="common.included"></span>:</strong>&nbsp;{{::hotel.vatTax.finalAmount}}%&nbsp;<span translate="billing.vat.tax"></span></small><small ng-if="hotel.cityTax || $ctrl.reservation.checkinDetails"><strong><span translate="common.included.not"></span>:</strong>&nbsp;<span ng-if="hotel.cityTax && hotel.cityTax.finalAmount">{{::(hotel.cityTax.finalAmount|chCurrency:hotel.currency)}}&nbsp;<span translate="reservation.cityTax.description"></span></span><span ng-if="$ctrl.reservation.checkinDetails && $ctrl.reservation.checkinDetails.amount.finalAmount"><span ng-if="hotel.cityTax.finalAmount">,&nbsp;</span>{{::($ctrl.reservation.checkinDetails.amount.finalAmount|chCurrency:hotel.currency)}}&nbsp;<span translate="reservation.checkinDetails.description"></span></span></small></div></ng-form>'})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){if(!l.creationDate)throw new Error("chCancellationBar: creationDate cannot be null");if(!l.checkinDate)throw new Error("chCancellationBar: checkinDate cannot be null");l.$$startDate=moment(l.creationDate).toDate(),l.$$endDate=i.absoluteDate(l.checkinDate),l.$$freeCancelDate=moment(l.limitDate||l.$$endDate).toDate();var t=moment(l.$$startDate),s=moment(l.$$endDate),o=l.$$freeCancelDate?moment(l.$$freeCancelDate):null;l.$$inPenalty=!1,o&&o.isAfter(s,"days")&&(l.$$endDate=o.toDate(),s=moment(l.$$endDate)),t.isAfter(s,"days")&&(n.warn("chCancellationBar: creationDate is after checkinDate. Will be adjusted to checkinDate."),l.$$startDate=s.toDate(),t=moment(l.$$startDate),l.$$inPenalty=!0),o&&o.isSame(s,"days")&&(l.$$endDate=o.toDate(),s=moment(l.$$endDate));var r=moment();r.isAfter(s,"days")?l.$$hideToday=!0:l.$$now=r.toDate(),s.endOf("day");var c=s.diff(t,"days")||1,d=moment.duration(s.diff(r)).asDays();if(l.$$todayPosition=a.fixedDecimals(100-d/c*100),l.$$todayPosition=l.$$todayPosition>100?100:l.$$todayPosition<0?0:l.$$todayPosition,l.limitDate){l.finalLimitDate=o.utcOffset(l.offsetSeconds?l.offsetSeconds/60:0).toDate(),l.daysToLimit=moment.duration(moment(l.finalLimitDate).diff(r)).asDays();var m=moment.duration(s.diff(moment(l.finalLimitDate))).asDays();l.$$limitRate=m>=0?a.fixedDecimals(100-100*m/c):0,l.$$limitRate=l.$$limitRate>100?100:l.$$limitRate<0?0:l.$$limitRate,l.$$inPenalty=l.daysToLimit<=0}else l.$$inPenalty=!_.isNil(l.feeAmount)&&l.feeAmount>0,l.$$inPenalty?(l.$$limitRate=0,l.finalLimitDate=t.utcOffset(l.offsetSeconds?l.offsetSeconds/60:0).toDate()):l.$$limitRate=100;var p=angular.element(e[0].querySelector(".limit-label"));100==l.$$limitRate?(p.addClass("limit-label-full"),p.removeClass("limit-label-empty")):0==l.$$limitRate&&(p.addClass("limit-label-empty"),p.removeClass("limit-label-full"))}}t.$inject=["$scope","$element","$log","NumberUtils","DateUtils"],angular.module("itaca.components").component("chCancellationBar",{bindings:{creationDate:"<",checkinDate:"<",limitDate:"<?",feeAmount:"<?",offsetSeconds:"<?",startLabel:"@",endLabel:"@",penaltyCancelLabel:"@",freeCancelLabel:"@",limitCancelLabel:"@"},controller:t,template:'<div class="ch-cancellation-bar-container"><div class="summary-label"><strong ng-if="!$ctrl.$$inPenalty" class="text-success"><span ng-if="$ctrl.finalLimitDate"><span>{{$ctrl.limitCancelLabel}}</span>&nbsp;<span ng-if="$ctrl.daysToLimit">{{$ctrl.daysToLimit|amDurationFormat : "days"}}</span>&nbsp;<span ng-if="!$ctrl.daysToLimit" class="text-lowercase" translate="date.today"></span><span class="text-gray-light text-normal">&nbsp;({{$ctrl.finalLimitDate|offsetDate:"shortDate":$ctrl.offsetSeconds}}&nbsp;<span class="text-lowercase" translate="date.time.to"></span>&nbsp;{{$ctrl.finalLimitDate|offsetDate:"shortTime":$ctrl.offsetSeconds}})</span></span><span ng-if="!$ctrl.finalLimitDate"><span>{{$ctrl.freeCancelLabel}}</span></span></strong><strong ng-if="$ctrl.$$inPenalty" class="text-danger">{{$ctrl.penaltyCancelLabel}}</span></strong></div><div layout layout-padding-sm><div layout="column" layout-align="center center" class="no-padding-top no-padding-bottom cursor-help"><md-icon class="mdi mdi-book-plus md-18"></md-icon><small class="text-gray-light">{{$ctrl.$$startDate|utcDate:"dd/MM"}}</small><md-tooltip><span ng-if="!$ctrl.startLabel" translate="reservation.insert.date"></span><span ng-if="$ctrl.startLabel">{{$ctrl.startLabel}}</span></md-tooltip></div><div flex class="progress-bar"><span ng-if="$ctrl.finalLimitDate" class="limit-label cursor-help" style="left:{{$ctrl.$$limitRate}}%"><span>{{$ctrl.finalLimitDate|offsetDate:"d MMMM":$ctrl.offsetSeconds}}</span><md-tooltip>{{$ctrl.limitCancelLabel}}&nbsp;{{$ctrl.finalLimitDate|offsetDate:"shortDate":$ctrl.offsetSeconds}}&nbsp;<span class="text-lowercase" translate="date.time.to"></span>&nbsp;{{$ctrl.finalLimitDate|offsetDate:"shortTime":$ctrl.offsetSeconds}}</md-tooltip></span><span ng-if="!$$hideToday" class="today-label cursor-help" style="left:{{$ctrl.$$todayPosition}}%"><span translate="date.today"></span><md-tooltip><span translate="date.today"></span>&nbsp;{{$ctrl.$$now|date:"short"}}</md-tooltip></span><div class="bar bg-success" style="width:{{$ctrl.$$limitRate}}%;"></div><div class="bar bg-danger" style="left:{{$ctrl.$$limitRate}}%; width:{{100 - $ctrl.$$limitRate}}%;"></div></div><div layout="column" layout-align="center center" class="no-padding-top no-padding-bottom cursor-help"><md-icon class="mdi mdi-debug-step-into md-18"></md-icon><small class="text-gray-light">{{$ctrl.$$endDate|utcDate:"dd/MM"}}</small><md-tooltip><span ng-if="!$ctrl.endLabel" translate="date.checkin"></span><span ng-if="$ctrl.endLabel">{{$ctrl.endLabel}}</span></md-tooltip></div></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.$$bgStyle=n.bgUrl?{background:"url('"+n.bgUrl+"') center center no-repeat","background-size":"cover"}:null,n.colorClass=n.colorClass||"layout-column layout-align-center-center bg-gray-lighter md-padding",n.titleClass=n.titleClass||"md-subhead text-bold",n.iconLabelPosition=_.includes(["left","right","top","bottom"],n.iconLabelPosition)?n.iconLabelPosition:"left",n.menuItems=n.menuItems&&angular.isArray(n.menuItems)?n.menuItems:null,n.menuClass=n.menuClass||null,n.showAvatar=!!_.isBoolean(n.showAvatar)&&n.showAvatar,n.$initWatches()},this.$goTo=function(){n.ngDisabled||(angular.isFunction(n.onClick)?n.onClick():_.isNil(n.state)?_.isNil(n.url)||e.go(n.url):e.goToState(n.state,n.stateParams))},this.$menuClick=function(t){!_.isNil(t.fn)&&angular.isFunction(t.fn)?t.fn.apply(this,t.fnParams):_.isNil(t.state)?_.isNil(t.url)||(location.href=t.url):e.goToState(t.state,t.stateParams)},this.$initWatches=function(){t.$watch(function(){return n.imgUrl},function(t,e){n.imgUrl=t})}}t.$inject=["$scope","Navigation"],angular.module("itaca.components").component("chCard",{transclude:!0,bindings:{bgUrl:"@",bgClass:"@",imgUrl:"@",imgClass:"@",imgContClass:"@",showAvatar:"=?",iconClass:"@",iconLabel:"<?",iconLabelClass:"@",iconLabelPosition:"@",iconSecondaryLabel:"<?",iconSecondaryLabelClass:"@",iconSecondaryLabelPosition:"@",otherIconClass:"@",title:"@",titleClass:"@",subtitle:"@",colorClass:"@",ngDisabled:"=?",disabledLabel:"@",disabledClass:"@",disabledBarClass:"@",url:"@",state:"@",stateParams:"<?",onClick:"&?",menuItems:"<?",disabledMenuItems:"<?",menuClass:"@",noHover:"<?"},controller:t,template:'<div class="md-whiteframe-1dp bg-white flex layout-column" ng-click="$ctrl.$goTo()"ng-class="{"clickable": !$ctrl.ngDisabled && ($ctrl.url || $ctrl.state || $ctrl.onClick), "cursor-disabled": $ctrl.ngDisabled}"><div class="relative"><div ng-if="$ctrl.ngDisabled" class="disabled-box {{$ctrl.disabledClass}}"><span ng-if="$ctrl.disabledLabel" class="disabled-box-bar {{$ctrl.disabledBarClass}}">{{$ctrl.disabledLabel}}</span></div><div class="layout-padding no-padding-right absolute position-right position-top" style="z-index:2"><md-menu class="md-secondary" ng-if="$ctrl.menuItems && !$ctrl.ngDisabled"><md-button aria-label="Open user interactions menu" class="md-icon-button {{$ctrl.menuClass}}" ng-click="$mdMenu.open($event)"><md-icon class="mdi mdi-dots-vertical text-white"></md-icon></md-button><md-menu-content width="4"><md-menu-item ng-repeat="item in $ctrl.menuItems" ng-if="!item.hide"><md-button ng-click="$ctrl.$menuClick(item)" aria-label="{{item.label | translate}}" class="{{item.labelClass}}" ng-disabled="item.disabled"><md-icon class="{{item.icon}} material-icons"></md-icon>&nbsp;<span translate-once="{{item.label}}"></span></md-button></md-menu-item></md-menu-content></md-menu><md-menu class="md-secondary" ng-if="$ctrl.disabledMenuItems && $ctrl.ngDisabled"><md-button aria-label="Open user interactions menu" class="md-icon-button {{$ctrl.menuClass}}" ng-click="$mdMenu.open($event)"><md-icon class="mdi mdi-dots-vertical text-white"></md-icon></md-button><md-menu-content width="4"><md-menu-item ng-repeat="item in $ctrl.disabledMenuItems" ng-if="!item.hide"><md-button ng-click="$ctrl.$menuClick(item)" aria-label="{{item.label | translate}}" class="{{item.labelClass}}" ng-disabled="item.disabled"><md-icon class="{{item.icon}} material-icons"></md-icon>&nbsp;<span translate-once="{{item.label}}"></span></md-button></md-menu-item></md-menu-content></md-menu></div><div class="flex layout-column layout-align-center-center text-center overflow-hidden card-image" ng-class="{"md-hover-icon": !$ctrl.noHover}" ng-style="$ctrl.$$bgStyle"><div ng-if="$ctrl.imgUrl" class="{{$ctrl.imgContClass}}"><img ng-if="$ctrl.imgUrl" ng-src="{{$ctrl.imgUrl}}" class="{{$ctrl.imgClass}}" lazy-image loaded-class="animated fadeIn"></div><div ng-if="!$ctrl.imgUrl && ($ctrl.iconClass || $ctrl.iconSecondaryClass)"><div class="layout-column layout-padding-sm layout-align-center-center"><div ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "top"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</div><div ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "top"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</div><div><span ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "left"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</span><span ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "left"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</span><md-icon class="{{$ctrl.iconClass}} material-icons"></md-icon><md-icon ng-if="$ctrl.otherIconClass" class="{{$ctrl.otherIconClass}} material-icons"></md-icon><span ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "right"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</span><span ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "right"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</span></div><div ng-if="$ctrl.iconLabel && $ctrl.iconLabelPosition == "bottom"" class="{{$ctrl.iconLabelClass}}">{{$ctrl.iconLabel}}</div><div ng-if="$ctrl.iconSecondaryLabel && $ctrl.iconSecondaryLabelPosition == "bottom"" class="{{$ctrl.iconSecondaryLabelClass}}">{{$ctrl.iconSecondaryLabel}}</div></div></div><div ng-if="$ctrl.showAvatar && !$ctrl.imgUrl && !$ctrl.iconClass && !i$ctrl.conSecondaryClass && ($ctrl.title || $ctrl.description)" class="layout-row layout-align-center-center {{$ctrl.imgContClass}}"><span class="md-display-3 text-uppercase"><span ng-if="$ctrl.title">{{$ctrl.title.charAt(0)}}</span><span ng-if="!$ctrl.title">{{$ctrl.description.charAt(0)}}</span></span></div></div></div><md-divider></md-divider><div class="md-padding layout-column layout-padding-sm flex {{$ctrl.colorClass}}"><div class="layout-column layout-align-center-center"><div class="{{$ctrl.titleClass}} row-mini text-center"><span>{{$ctrl.title}}</span></div><small class="text-center" ng-if="subtitle">{{$ctrl.subtitle}}</small></div><div ng-transclude class="flex layout-column layout-align-center-center card-footer"></div></div></div>'})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.$$timezone=a.secondsToOffsetString(l.offsetSeconds),l.showDate=!_.isBoolean(l.showDate)||l.showDate,l.showTime=!_.isBoolean(l.showTime)||l.showTime,l.dateFormat=l.dateFormat||"mediumDate",l.timeFormat=l.timeFormat||"shortTime",l.$$stop=i(function(){l.$updateDate()},1e3)},this.$onDestroy=function(){i.cancel(l.$$stop)},this.$updateDate=function(){l.$$date=new Date}}t.$inject=["$scope","$element","$attrs","DateUtils","$interval"],angular.module("itaca.components").component("chClock",{bindings:{offsetSeconds:"<",showDate:"<",showTime:"<",dateFormat:"@",timeFormat:"@"},controller:t,template:"<div><div ng-if='$ctrl.showDate'><small>{{$ctrl.$$date|date:$ctrl.dateFormat:$ctrl.$$timezone}}</small></div><div ng-if='$ctrl.showTime'><strong>{{$ctrl.$$date|date:$ctrl.timeFormat:$ctrl.$$timezone}}</strong></div></div>"})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){n.addEventListener("offline",a.$showDialog)},this.$showDialog=function(){function t(t,e){var n=function(){t.hide()};this.$onInit=function(){e.addEventListener("online",n)},this.$onDestroy=function(){e.removeEventListener("online",n)}}t.$inject=["$mdDialog","$window"],e.show({controller:t,escapeToClose:!1,template:'<md-dialog flex="70" aria-label="offline dialog"><md-dialog-content class="md-padding text-center"><div><md-icon class="mdi mdi-close-network md-160"></md-icon></div><h1 class="md-display-1 no-margin"><span translate="alerts.offline.title"></span></h1><h4 class="md-subhead no-margin-top"><span translate="alerts.offline.text"></span></h4></md-dialog-content></md-dialog>'})},this.$onDestroy=function(){n.removeEventListener("offline",a.$showDialog)}}t.$inject=["$scope","$mdDialog","$window"],angular.module("itaca.components").component("chConnectionCheck",{bindings:{},controller:t,template:"<span></span>"})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.btnClass=a.btnClass||"md-fab md-mini",a.btnActiveClass=a.btnActiveClass||"md-primary",a.labelClass=a.labelClass||"text-gray-light text-small",a.count=angular.isNumber(a.count)?a.count:0,a.step=angular.isNumber(a.step)?a.step:1,a.$initWatches()},this.$observeFlexible=function(){a.flexible=_.isBoolean(a.flexible)?a.flexible:n.hasOwnProperty("flexible")&&(void 0===a.flexible||_.isEmpty(a.flexible)||a.flexible),a.flexible&&e.addClass("flex")},this.$observeLabelDirection=function(){a.labelDirection=_.includes(["top","right","bottom","left"],a.labelDirection)?a.labelDirection:"top",a.labelContClass=_.includes(["right","left"],a.labelDirection)?"layout-row":"layout-column"},this.$observeMin=function(){a.min=angular.isNumber(a.min)&&angular.isNumber(a.max)&&a.min>a.max?a.max-a.step:a.min,angular.isNumber(a.min)&&a.count<a.min&&(a.count=a.min)},this.$observeMax=function(){a.max=angular.isNumber(a.max)&&angular.isNumber(a.min)&&a.max<a.min?a.min+a.step:a.max,angular.isNumber(a.max)&&a.count>a.max&&(a.count=a.max)},this.$decrease=function(){a.$isDecreaseDisabled()||(a.count=(a.count||0)-a.step,a.$updateModel(),a.onMinus&&a.onMinus())},this.$increase=function(){a.$isIncreaseDisabled()||(a.count=(a.count||0)+a.step,a.$updateModel(),a.onPlus&&a.onPlus())},this.$isDecreaseDisabled=function(){return a.ngDisabled?a.ngDisabled:a.minusDisabled?a.minusDisabled:angular.isNumber(a.min)&&a.count<=a.min},this.$isIncreaseDisabled=function(){return a.ngDisabled?a.ngDisabled:a.plusDisabled?a.plusDisabled:angular.isNumber(a.max)&&a.count>=a.max},this.$updateModel=function(){a.ngModelCtrl.$setViewValue(a.count)},this.$initWatches=function(){$scope.$watch("flexible",a.$observeFlexible),$scope.$watch("labelDirection",a.$observeLabelDirection),$scope.$watch("min",a.$observeMin),$scope.$watch("max",a.$observeMax)}}t.$inject=["$ctrl","$element","$attrs"],angular.module("itaca.components").component("chCounter",{transclude:!0,require:{ngModelCtrl:"ngModel"},bindings:{flexible:"<?",wrapperClass:"@",btnClass:"@",btnActiveClass:"@",iconClass:"@",iconActiveClass:"@",label:"@",labelClass:"@",labelDirection:"@",count:"=ngModel",countClass:"@",fieldName:"@",min:"<?",max:"<?",step:"<?",ngDisabled:"<?",minusDisabled:"<?",plusDisabled:"<?",onMinus:"&?",onPlus:"&?"},controller:t,template:'<div class="layout-column {{$ctrl.wrapperClass}}" ng-class="{"flex": $ctrl.flexible}" ng-style="{"display": $ctrl.flexible ? "inherit" : "inline-block"}" style="min-width: 150px;"><div class="{{$ctrl.labelContClass}} layout-padding no-padding"><div ng-if="$ctrl.label && ($ctrl.labelDirection == "left" || $ctrl.labelDirection == "top")" class="layout-row layout-align-center-center {{$ctrl.labelClass}}"><span ng-bind-html="$ctrl.label"></span></div><div class="layout-row layout-align-center-center flex"><md-button class="{{$ctrl.btnClass}} no-margin" ng-class="!$ctrl.$isDecreaseDisabled() ? $ctrl.btnActiveClass : """ aria-label="Minus" ng-disabled="$ctrl.$isDecreaseDisabled()" ng-click="$ctrl.$decrease()"><md-icon class="material-icons mdi mdi-minus md-18 {{$ctrl.iconClass}}" ng-class="!$ctrl.$isDecreaseDisabled() ? $ctrl.iconActiveClass : """></md-icon></md-button><div class="layout-column layout-padding layout-align-center-center" ng-class="{"flex": $ctrl.flexible}"><span class="{{$ctrl.countClass}} border-gray-lighter border-radius">{{$ctrl.count || 0}}</span></div><md-button class="{{$ctrl.btnClass}} no-margin" ng-class="!$ctrl.$isIncreaseDisabled() ? $ctrl.btnActiveClass : """ aria-label="Plus" ng-disabled="$ctrl.$isIncreaseDisabled()" ng-click="$ctrl.$increase()"><md-icon class="material-icons mdi mdi-plus md-18 {{$ctrl.iconClass}}" ng-class="!$ctrl.$isIncreaseDisabled() ? $ctrl.iconActiveClass : """></md-icon></md-button></div><div ng-if="$ctrl.label && ($ctrl.labelDirection == "right" || $ctrl.labelDirection == "bottom")" class="layout-row layout-align-center-center {{$ctrl.labelClass}}"><span ng-bind-html="$ctrl.label"></span></div></div><div class="no-padding"><md-input-container md-no-float class="md-block minimal-input no-margin no-padding"><input ng-if="$ctrl.fieldName" type="hidden" name="{{$ctrl.fieldName}}"><small ng-transclude class="no-padding text-center"></small></md-input-container></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.$initWatches()},this.$calculateDiff=function(){var t=a.start?moment(a.start):moment(),e=a.start?moment(a.end):moment();a.$$dateLeft=t.to(e)},this.$initWatches=function(){$scope.$watchGroup([function(){return a.start},function(){return a.end}],a.$calculateDiff)}}t.$inject=["scope","ReservationUtils","$translate"],angular.module("itaca.components").component("chDateLeft",{bindings:{start:"<?",end:"<?"},controller:t,template:"<span>{{$ctrl.$$dateLeft}}</span>"})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.wrapperClass=l.wrapperClass||"md-padding",l.buttonClass=l.buttonClass||"no-padding no-margin layout-padding",l.hasBackdrop=!_.isNil(l.hasBackdrop)&&l.hasBackdrop,l.timezone=_.isBoolean(l.useUtc)&&l.useUtc?"UTC":"";var t=e[0].querySelector(".ch-date-picker-button"),i=n.newPanelPosition().relativeTo(angular.element(t)).addPanelPosition(n.xPosition.CENTER,n.yPosition.BELOW);l.$$config={attachTo:angular.element(document.body),controller:"dateRangeCtrl",controllerAs:"ctrl",templateUrl:"/tpls/date.part",position:i,clickOutsideToClose:!0,disableParentScroll:l.disableParentScroll,hasBackdrop:!a("gt-xs")||l.hasBackdrop,fullscreen:!a("gt-xs"),panelClass:"bg-white md-whiteframe-15dp",trapFocus:!0,onCloseSuccess:function(t,e){_.isBoolean(e)&&e&&(l.updateOriginal(),l.onClose&&l.onClose(l.$$data)),(l.hasBackdrop||l.disableBodyScroll)&&l.$$toggleBodyScroll(!1)},onOpenComplete:function(){(l.hasBackdrop||l.disableBodyScroll)&&l.$$toggleBodyScroll(!0)}}},this.$$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){l.$$data={current:l.ngModel,min:l.minDate,max:l.maxDate};var e={hasConfirm:!_.isBoolean(l.hasConfirm)||l.hasConfirm,showDiff:!_.isBoolean(l.showDiffInCalendar)||l.showDiffInCalendar,diffLabelSingular:l.diffLabelSingular,diffLabelPlural:l.diffLabelPlural,useUtc:!!_.isBoolean(l.useUtc)&&l.useUtc,currentView:"end",data:l.$$data};l.$$config.openFrom=t,l.$$config.hasBackdrop=!a("gt-xs")||l.hasBackdrop,l.$$config.fullscreen=!a("gt-xs"),l.$$config.locals=e,n.open(l.$$config)},this.$updateOriginal=function(){l.$$data&&(l.ngModel=l.$getDate(l.$$data.current),l.minDate=l.$getDate(l.$$data.min),l.maxDate=l.$getDate(l.$$data.max))},this.$getDate=function(t){var e=l.$getMoment(t);return e?e.toDate():null},this.$getMoment=function(t){return t?_.isBoolean(l.useUtc)&&l.useUtc?i.absoluteMoment(t):moment(t):null}}t.$inject=["$scope","$element","$mdPanel","$mdMedia","DateUtils"],angular.module("itaca.components").component("chDatePicker",{require:{ngModelCtrl:"ngModel"},bindings:{buttonClass:"@",wrapperClass:"@",label:"@",ngModel:"=",minDate:"<?",maxDate:"<?",errorMessages:"<?",useUtc:"<?",showDiff:"<?",hasBackdrop:"<?",hasConfirm:"<?",disableParentScroll:"<?",disableBodyScroll:"<?",onClose:"&?",ngDisabled:"<?"},controller:t,template:'<ng-form name="chDateRangeForm" class="flex no-padding layout-column"><md-button class="ch-date-picker-button flex minimal-button text-lowercase text-center {{$ctrl.buttonClass}}" ng-click="$ctrl.$openPanel($event)" aria-label="Change date" ng-disabled="$ctrl.ngDisabled"><div class="{{$ctrl.wrapperClass}}"><div class="no-padding row-mini"><small class="row-mini text-initial" ng-bind-html="$ctrl.label"></small></div><div class="layout-align-center-center layout-row no-padding"><span><md-icon class="mdi mdi-calendar md-32"></md-icon></span><span class="md-display-1 layout-padding">{{$ctrl.ngModel|date:"dd"}}</span><span class="layout-column row-mini"><span class="text-lowercase">{{$ctrl.ngModel|date:"MMM"}}</span><span>{{$ctrl.ngModel|date:"yyyy"}}</span></span></div></div></md-button></ng-form>'})}(),function(){"use strict";function t(t,e,n,a,i){this.$onInit=function(){ctrl.startInputName=ctrl.startInputName||"start",ctrl.endInputName=ctrl.endInputName||"end",ctrl.wrapperClass=ctrl.wrapperClass||"md-padding",ctrl.buttonClass=ctrl.buttonClass||"no-padding no-margin layout-padding",ctrl.hasBackdrop=!_.isNil(ctrl.hasBackdrop)&&ctrl.hasBackdrop,ctrl.$$timezone=_.isBoolean(ctrl.useUtc)&&ctrl.useUtc?"UTC":"",ctrl.labelClass=ctrl.labelClass||"text-gray-light",ctrl.largeTemplate=ctrl.largeTemplate||!1;var t=e[0].querySelector(".ch-date-range-button"),i=n.newPanelPosition().relativeTo(angular.element(t)).addPanelPosition(n.xPosition.CENTER,n.yPosition.BELOW);ctrl.$$config={attachTo:angular.element(document.body),controller:"dateRangeCtrl",controllerAs:"ctrl",templateUrl:"/tpls/date-range.part",position:i,clickOutsideToClose:!0,disableParentScroll:ctrl.disableParentScroll,hasBackdrop:!a("gt-xs")||ctrl.hasBackdrop,fullscreen:!a("gt-xs"),panelClass:"bg-white md-whiteframe-15dp",trapFocus:!0,onCloseSuccess:function(t,e){_.isBoolean(e)&&e&&(ctrl.$updateOriginal(),ctrl.onClose&&ctrl.onClose(ctrl.$$data)),(ctrl.hasBackdrop||ctrl.disableBodyScroll)&&ctrl.$$toggleBodyScroll(!1)},onOpenComplete:function(){(ctrl.hasBackdrop||ctrl.disableBodyScroll)&&ctrl.$$toggleBodyScroll(!0)}},ctrl.calculateDiff()},this.$$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){ctrl.$$data={start:ctrl.start,startMinDate:ctrl.startMinDate,startMaxDate:ctrl.startMaxDate,end:ctrl.end,endMinDate:ctrl.endMinDate,endMaxDate:ctrl.endMaxDate,maxRange:ctrl.maxRange};var e={showDiff:!_.isBoolean(ctrl.showDiffInCalendar)||ctrl.showDiffInCalendar,diffLabelSingular:ctrl.$$diffLabelSingular,diffLabelPlural:ctrl.$$diffLabelPlural,useUtc:!!_.isBoolean(ctrl.useUtc)&&ctrl.useUtc,startTitle:ctrl.startLabel,endTitle:ctrl.endLabel,data:ctrl.$$data};ctrl.$$config.openFrom=t,ctrl.$$config.hasBackdrop=!a("gt-xs")||ctrl.hasBackdrop,ctrl.$$config.fullscreen=!a("gt-xs"),ctrl.$$config.locals=e,n.open(ctrl.$$config)},this.$updateOriginal=function(){ctrl.$$data&&(ctrl.start=ctrl.$getDate(ctrl.$$data.start),ctrl.startMinDate=ctrl.$getDate(ctrl.$$data.startMinDate),ctrl.startMaxDate=ctrl.$getDate(ctrl.$$data.startMaxDate),ctrl.end=ctrl.$getDate(ctrl.$$data.end),ctrl.endMinDate=ctrl.$getDate(ctrl.$$data.endMinDate),ctrl.endMaxDate=ctrl.$getDate(ctrl.$$data.endMaxDate),ctrl.calculateDiff())},this.$getDate=function(t){var e=ctrl.$getMoment(t);return e?e.toDate():null},this.$getMoment=function(t){return t?_.isBoolean(ctrl.useUtc)&&ctrl.useUtc?i.absoluteMoment(t):moment(t):null},this.calculateDiff=function(){(!_.isBoolean(ctrl.showDiff)||ctrl.showDiff)&&ctrl.end&&ctrl.start?ctrl.$$diff=ctrl.$getMoment(ctrl.end).diff(ctrl.$getMoment(ctrl.start),"days"):ctrl.$$diff=null}}t.$inject=["$scope","$element","$mdPanel","$mdMedia","DateUtils"],angular.module("itaca.components").component("chDateRangePicker",{bindings:{buttonClass:"@",wrapperClass:"@",placeholder:"@",label:"@",labelClass:"@",startLabel:"@",startInputName:"@",start:"=",startMinDate:"<?",startMaxDate:"<?",startErrorMessages:"<?",endLabel:"@",endInputName:"@",end:"=",endMinDate:"<?",endMaxDate:"<?",endErrorMessages:"<?",maxRange:"<?",useUtc:"<?",showDiff:"<?",showDiffInCalendar:"<?",diffLabelSingular:"@",diffLabelPlural:"@",hasBackdrop:"<?",largeTemplate:"<?",disableParentScroll:"<?",disableBodyScroll:"<?",onClose:"&?",ngDisabled:"<?"},controller:t,template:'<ng-form name="chDateRangeForm" class="flex no-padding layout-column"><md-button class="ch-date-range-button flex minimal-button text-lowercase text-center {{$ctrl.buttonClass}}" ng-click="$ctrl.$openPanel($event)" aria-label="Change period" ng-disabled="$ctrl.ngDisabled"><div class="{{$ctrl.wrapperClass}}"><div ng-if="$ctrl.label || $ctrl.placeholder" class="md-padding"><div class="{{$ctrl.labelClass}} text-initial text-wrap row-1" ng-class="{"text-small": $ctrl.start || $ctrl.end}"><span ng-if="$ctrl.placeholder && !$ctrl.start && !$ctrl.end" ng-bind-html="$ctrl.placeholder"></span><span ng-if="$ctrl.label && (($ctrl.start || $ctrl.end) || !$ctrl.placeholder)" ng-bind-html="$ctrl.label"></span></div></div><div ng-if="!$ctrl.largeTemplate"><div ng-show="$ctrl.start || $ctrl.end" class="layout layout-wrap layout-align-center-center row-mini"><span><span translate="date.from.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.start|date:"shortDate":$ctrl.$$timezone}}</strong></span>&nbsp;</span><span><span translate="date.to.abbr"></span>&nbsp;<span class="md-subhead"><strong>{{$ctrl.end|date:"shortDate":$ctrl.$$timezone}}</strong></span></span><span ng-if="$ctrl.$$diff" class="{{$ctrl.labelClass}} text-small no-padding no-margin text-lowercase">&nbsp;(<span ng-bind="$ctrl.$$diff">&nbsp;</span><span ng-show="$ctrl.$$diff == 1"><span ng-if="!$ctrl.$$diffLabelSingular" translate="date.day"></span><span ng-if="$ctrl.$$diffLabelSingular" ng-bind="$ctrl.$$diffLabelSingular"></span>)</span><span ng-show="$ctrl.$$diff > 1"><span ng-if="!$ctrl.$$diffLabelPlural" translate="date.days"></span><span ng-if="$ctrl.$$diffLabelPlural" ng-bind="$ctrl.$$diffLabelPlural"></span>)</span></span></div></div><div ng-if="$ctrl.largeTemplate" class="layout-row layout-wrap layout-align-center-center "><div class="layout-column flex-45 row-1"><small class="row-1 text-initial" translate="date.checkin"></small><div class="layout-align-center-center layout-row"><span><md-icon class="mdi mdi-calendar md-32"></md-icon></span><span class="md-display-1 layout-padding">{{$ctrl.start|date:"dd":$ctrl.$$timezone}}</span><span class="layout-column row-mini"><span>{{$ctrl.start|date:"MMM":$ctrl.$$timezone}}</span><span>{{$ctrl.start|date:"yyyy":$ctrl.$$timezone}}</span></span></div></div><div class="layout-column flex text-bold">-</div><div class="layout-column flex-45 row-1"><small class="row-mini text-initial" translate="date.checkout"></small><div class="layout-align-center-center layout-row"><span><md-icon class="mdi mdi-calendar md-32"></md-icon></span><span class="md-display-1 layout-padding">{{$ctrl.end|date:"dd":$ctrl.$$timezone}}</span><span class="layout-column row-mini"><span>{{$ctrl.end|date:"MMM":$ctrl.$$timezone}}</span><span>{{$ctrl.end|date:"yyyy":$ctrl.$$timezone}}</span></span></div></div><div class="layout-column flex-100 row-1"><span ng-if="$ctrl.$$diff" class="{{$ctrl.labelClass}} text-small no-padding no-margin text-lowercase">&nbsp;(<span ng-bind="$ctrl.$$diff">&nbsp;</span><span ng-show="$ctrl.$$diff == 1"><span ng-if="!$ctrl.$$diffLabelSingular" translate="date.day"></span><span ng-if="$ctrl.$$diffLabelSingular" ng-bind="$ctrl.$$diffLabelSingular"></span>)</span><span ng-show="$ctrl.$$diff > 1"><span ng-if="!$ctrl.$$diffLabelPlural" translate="date.days"></span><span ng-if="$ctrl.$$diffLabelPlural" ng-bind="$ctrl.$$diffLabelPlural"></span>)</span></span></div></div></div></md-button><input type="hidden" name="{{$ctrl.startInputName}}" ng-model="start" required><input type="hidden" name="{{$ctrl.endInputName}}" ng-model="end" required><div ng-messages="chDateRangeForm[$ctrl.startInputName].$error" class="font-12 text-center text-danger" ng-show="chDateRangeForm[$ctrl.startInputName].$dirty || chDateRangeForm.$submitted"><span ng-message="required"><span translate-once="error.required"></span></span><span ng-if="$ctrl.startErrorMessages" ng-repeat="error in $ctrl.startErrorMessages" ng-message="error.key"><span translate="error.label"></span></span></div><div ng-messages="chDateRangeForm[$ctrl.endInputName].$error" class="font-12 text-center text-danger" ng-show="!chDateRangeForm[$ctrl.startInputName].$invalid && (chDateRangeForm[$ctrl.endInputName].$dirty || chDateRangeForm.$submitted)"><span ng-message="required"><span translate-once="error.required"></span></span><span ng-if="$ctrl.endErrorMessages" ng-repeat="error in $ctrl.endErrorMessages" ng-message="error.key"><span translate="error.label"></span></span></div></ng-form>'})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.btnClass=l.btnClass||"md-raised md-primary",l.downloadingClass=l.downloadingClass||"md-accent md-hue-2",l.maxRetry=l.maxRetry||1,l.retryDelay=l.retryDelay||5e3},this.$download=function(t){l.$$attempt=1,l.$doDownload(t)},this.$doDownload=function(t){l.$$downloading=!0;var n=function(){l.$$attempt++};e.get(l.url).then(function(e){if(e.data.file){if(bowser.ios){var n={file:e.data.file,filename:e.data.filename,contentType:e.data.contentType,title:l.downloadReadyLabel,downloadLabel:l.downloadLabel};i.downloadFile(t,n)}else{var a=l.$getLinkEl();if(a.href="data:"+(e.data.contentType||"application/octet-stream")+";base64,"+encodeURI(e.data.file),a.setAttribute("download",e.data.filename),document.createEvent){var s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});a.dispatchEvent(s)}else a.fireEvent("click")}l.$$downloading=!1}else l.$manageRetry(!0)},function(t){412!=t.status&&l.$manageRetry(507==t.status)||(a.error((t.data,t.data.message?t.data.message:"")),l.onError&&l.onError({response:t}),l.$$downloading=!1)}).finally(n,n)},this.$manageRetry=function(t){return l.$$attempt<l.maxRetry&&(n(l.$doDownload,t?l.retryDelay:1e3),!0)},this.$getLinkEl=function(){var t=element[0].querySelector(".ch-download-button-link");return null==t&&((t=document.createElement("a")).setAttribute("target","_blank"),t.className="ch-download-button-link",element[0].appendChild(t)),t}}t.$inject=["$scope","$http","$timeout","$log","Dialog"],angular.module("itaca.components").component("chDownloadButton",{bindings:{url:"<",btnClass:"@",label:"@",labelClass:"@",iconClass:"@",downloadingLabel:"@",downloadingClass:"@",downloadReadyLabel:"@",downloadLabel:"@",maxRetry:"<?",retryDelay:"<?",onError:"&?"},controller:t,template:'<span class="no-padding no-margin"><md-button class="{{$ctrl.btnClass}}" ng-click="$ctrl.$download($event)" aria-label="{{$ctrl.label}}" ng-disabled="$ctrl.$$downloading"><span ng-if="!$ctrl.$$downloading" class="layout-row layout-align-center-center"><md-icon ng-show="$ctrl.iconClass" class="material-icons {{$ctrl.iconClass}}"></md-icon><span style="margin-left: 5px" class="{{$ctrl.labelClass}}">{{$ctrl.label}}</span></span><span ng-if="$ctrl.$$downloading" class="layout-row layout-align-center-center"><md-progress-circular class="{{$ctrl.downloadingClass}}" md-mode="indeterminate" md-diameter="20"></md-progress-circular><span style="margin-left: 5px" class="{{$ctrl.labelClass}}">{{$ctrl.downloadingLabel || $ctrl.label}}</span></span></md-button><a class="ch-download-button-link" download target="_blank"></a></span>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.ngDisabled=!!_.isBoolean(a.ngDisabled)&&a.ngDisabled,a.bgClass=a.bgClass||"bg-primary",a.easingClass=a.easingClass||"text-white",a.easingClassLimit=isFinite(parseInt(a.easingClassLimit))?parseInt(a.easingClassLimit):.5,a.easingClassLimit=a.easingClassLimit<=1?a.easingClassLimit:1,a.opacityLimit=isFinite(parseInt(a.opacityLimit))?parseInt(a.opacityLimit):450,a.$$contStyle={position:"fixed",width:"100%",top:"0",left:"0","z-index":"25"},a.$$transStyle={"z-index":"1"},a.$$baseBgStyle="position: absolute; z-index: -1; height: 100%; width: 100%; top: 0; left: 0;",a.$initWatches()},this.$postLink=function(){a.ngDisabled?a.$disableEasing():a.$enableEasing()},this.$enableEasing=function(){a.$$transClass=a.easingClass,angular.element(n).on("scroll",a.$ease)},this.$disableEasing=function(){angular.element(n).off("scroll",a.$ease),a.$$bgStyle=a.$$baseBgStyle+"opacity: 1 !important;",a.$$transClass="",t.$broadcast("easing-bg",{opacity:1})},this.$ease=function(){if(a.ngDisabled)a.$disableEasing();else{var i=angular.element(document.querySelectorAll(".md-select-backdrop, .md-menu-backdrop")),l=0+n.pageYOffset/(a.opacityLimit-e[0].childNodes[0].offsetHeight),s=l>=1?1:l;i.length>0&&(s=1),a.$$bgStyle=a.$$baseBgStyle+"opacity: "+s+"!important;",s<=a.easingClassLimit?a.$$transClass=a.easingClass:a.$$transClass="",t.$broadcast("easing-bg",{opacity:s}),t.$apply()}},this.$initWatches=function(){t.$watch(function(){return a.ngDisabled},function(t){(t=!!_.isBoolean(t)&&t)?a.$disableEasing():a.$enableEasing()})},this.$onDestroy=function(){a.$disableEasing()}}t.$inject=["$scope","$element","$window"],angular.module("itaca.components").component("chEasingBg",{transclude:!0,bindings:{bgClass:"@?",easingClass:"@?",easingClassLimit:"<",opacityLimit:"<",ngDisabled:"<"},controller:t,template:'<div class="ch-easing-bg" ng-style="$ctrl.$$contStyle"><div class="{{$ctrl.bgClass}}" ng-attr-style="{{$ctrl.$$bgStyle}}"></div><div ng-transclude class="{{$ctrl.$$transClass}}" ng-style="$ctrl.$$transStyle"></div></div>'})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.storageUrl?i.initGridList():e.get().then(function(t){i.storageUrl=t.url,i.initGridList()})},this.openGallery=function(t,e){n.showGallery(t,i.galleryTitle,i.gallery,{storageUrl:i.storageUrl,initialSlide:e||0})},this.initGridList=function(){if(!_.isEmpty(i.gallery)){i.ratio=i.ratio||"4:3",i.maxCols=i.gallery.length,i.cols&&(i.colsArray=[],i.totalCols=0,_.forEach(i.cols.split(":"),function(t){var e=Math.abs(parseInt(t));i.totalCols+=e,i.colsArray.push(e)}),i.maxCols=a.lcmArray(i.colsArray),i.maxCols=i.gallery.length<i.colsArray[0]?i.gallery.length:i.maxCols),i.previewGallery=[],i.more=!1;var t=_.size(i.gallery);if(!(t<=0)){if(t>=i.totalCols){var e=i.maxItems?t-i.maxItems:t-i.totalCols;i.previewGallery=_.dropRight(i.gallery,e),i.more=t>i.totalCols}else i.previewGallery=i.gallery;if(i.rowspan&&(i.rowspanArray=[],_.forEach(i.rowspan.split(":"),function(t){i.rowspanArray.push(Math.abs(parseInt(t)))})),i.tilesConfig=[],_.forEach(i.previewGallery,function(t,e){_.isEmpty(i.colsArray)?i.tilesConfig.push({colspan:1}):_.forEach(i.colsArray,function(t,n,a){if(e<(0==n?t:t+a[n-1])||n+1==a.length)return i.tilesConfig.push({colspan:i.maxCols/t}),!1})}),_.size(i.tilesConfig)>1){var n=0;_.forEach(i.tilesConfig,function(t,e){_.isEmpty(i.rowspanArray)?t.rowspan=1:(n+=t.colspan,t.rowspan=i.rowspanArray[Math.ceil(n/i.maxCols)-1]||1)})}else i.tilesConfig[0].rowspan=1}}}}t.$inject=["$scope","AboutStorage","Dialog","NumberUtils"],angular.module("itaca.components").component("chGallery",{require:{},bindings:{gallery:"<?",storageUrl:"<?",galleryTitle:"@",cols:"@",rowspan:"@?",ratio:"@?",maxItems:"<?"},controller:t,template:'<div ng-if="$ctrl.gallery.length"><md-grid-list md-cols="{{$ctrl.maxCols}}" md-row-height="{{$ctrl.ratio}}" md-gutter="6px" md-gutter-gt-sm="4px"><md-grid-tile class="bg-black-light clickable" ng-repeat="photo in $ctrl.previewGallery track by $index" ng-click="$ctrl.openGallery($event, $index)" aria-lable="open gallery" md-colspan="{{$ctrl.tilesConfig[$index].colspan}}" md-rowspan="{{$ctrl.tilesConfig[$index].rowspan}}" style="overflow: hidden;"><span ng-class="{\'locked layout-row layout-align-start-center\': $last && $ctrl.more}"><strong ng-if="$last && $ctrl.more" class="locked-string locked-string-initial bg-opaque-7 text-uppercase"><span ng-if="($ctrl.gallery.length - $ctrl.previewGallery.length) == 1" translate="photo.photo.other.count"></span><span ng-if="($ctrl.gallery.length - $ctrl.previewGallery.length) != 1" translate="photo.photos.other.count" translate-value-count="{{$ctrl.gallery.length - $ctrl.previewGallery.length}}"></span></strong><img ng-src="{{$ctrl.storageUrl + photo.path}}" alt="{{photo.tags[0]}}" lazy-image default-img-url="\'/resources/public/img/no-gallery-image.png\'"></span></md-grid-tile></md-grid-list></div><div ng-if="!$ctrl.gallery.length"><img src="/resources/public/img/no-gallery-image.png" class="full-width"></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){},this.$hotelClick=function(t){e.onHotelClick&&e.onHotelClick({$event:t,hotel:e.hotel})}}t.$inject=["$scope"],angular.module("itaca.components").component("chHotelMapInfoWindow",{require:{chHotelMapCtrl:"^chHotelMap",ngMapCtrl:"ngMap"},bindings:{hotel:"<",showGallery:"<?",markerType:"@",onHotelClick:"&?"},controller:t,template:'<info-window id="hotel-iw"><div ng-non-bindable style="max-width: 300px;"><div ng-if="$ctrl.showGallery" style="width: 100; max-height: 200px" ng-init="config.noTop = true"><div flex ng-controller="slideGalleryCtrl" ng-init="bindGallery($ctrl.hotel.gallery); overrideConfig({autoplay: 0});"><div class="relative"><div class="img-top-bar"><div class="img-top-left-cont layout-row"><div class="md-subhead row-mini" ng-if="$ctrl.hotel.recommended"><small class="label gradient-yellow"><md-icon class="mdi mdi-thumb-up md-14 text-white"></md-icon>&nbsp;<span translate="common.recommended"></span></small></div><div flex></div><span ng-if="$ctrl.hotel" ng-controller="favoriteCtrl" ng-init="init($ctrl.hotel)"><md-button class="md-icon-button bg-opaque-5" ng-click="setFavorite()" aria-label="Like hotel"><md-icon ng-show="!$ctrl.hotel.favorite" class="mdi mdi-heart-outline text-white md-24"></md-icon><md-icon ng-show="$ctrl.hotel.favorite" class="mdi mdi-heart text-danger md-24" ng-class="{\'animated rubberBand\': $ctrl.hotel.favorite}"></md-icon><md-tooltip><span translate="common.favorite.set"></span></md-tooltip></md-button></span></div></div><div ng-show="loading" flex layout layout-align="center center"><md-progress-circular class="md-primary ch-progress" md-mode="indeterminate" md-diameter="40"></md-progress-circular></div><img ng-if="!gallery.length && !loading" class="main-image" ng-attr-alt="{{$ctrl.hotel.name}}" src="/resources/public/img/header.jpg"><ks-swiper-container class="button-mini" ng-if="gallery.length && galleryConfig.storageUrl && !loading"override-parameters="{grabCursor: galleryConfig.navButtons,keyboardControl: galleryConfig.keyboardControl,onSlideChangeStart: loadImageTags,centeredSlides: galleryConfig.centered,autoplayDisableOnInteraction: galleryConfig.autoplayDisableOnInteraction,preloadImages: !galleryConfig.lazyLoading,lazyLoading: galleryConfig.lazyLoading,lazyLoadingInPrevNext: galleryConfig.lazyLoading,pagination: false,watchSlidesVisibility: galleryConfig.lazyLoading && (galleryConfig.slidesPerView == \'auto\' || galleryConfig.slidesPerView > 1)}"container-cls="index-0 bg-gray-base"wrapper-cls="layout-row layout-align-start-center"pagination-cls="swiper-pagination-white"slides-per-view="galleryConfig.slidesPerView"slides-per-column="galleryConfig.slidesPerColumn"centered="galleryConfig.centered"autoplay="galleryConfig.autoplay"direction="{{galleryConfig.direction}}"show-nav-buttons="galleryConfig.navButtons"pagination-is-active="galleryConfig.pagination"pagination-clickable="galleryConfig.paginationClickable"initial-slide="galleryConfig.initialSlide"space-between="galleryConfig.spaceBetween"loop="galleryConfig.loop"><ks-swiper-slide slider-cls="no-bg" ng-class="{\'text-center\': galleryConfig.centered}" ng-repeat="image in gallery track by $index"><div ng-if="!galleryConfig.lazyLoading" class="main-image" ng-style="{\'background-image\': \'url(\'+galleryConfig.storageUrl + image.path+\')\'}"></div><div ng-if="galleryConfig.lazyLoading" ng-attr-data-background="{{galleryConfig.storageUrl}}{{image.path}}" class="main-image swiper-lazy"><div class="swiper-lazy-preloader swiper-lazy-preloader-white"></div></div></ks-swiper-slide></ks-swiper-container></div></div></div><div layout="column" class="md-padding no-padding-left no-padding-right no-padding-bottom text-left"><div layout><div flex><div md-truncate><span class="md-subhead">{{$ctrl.hotel.name}}</span></div><div layout><div flex><div><small class="label label-inline-block gradient-gray text-white text-wrap"><span translate="hotel.type.{{$ctrl.hotel.type}}"></span></small></div><div class="md-body-1 text-gray-light"><span>{{$ctrl.hotel.addressInfo.district}}</span>,&nbsp;<strong>{{$ctrl.hotel.addressInfo.city}}</strong></div><div class="md-body-1 text-gray-light"><md-icon class="mdi mdi-map-marker md-14"></md-icon>&nbsp;<small><em>{{$ctrl.hotel.addressInfo.address}},&nbsp;{{$ctrl.hotel.addressInfo.zipcode}}</em></small></div></div><div ng-if="$ctrl.markerType == \'price\'"><md-button ng-if="$ctrl.hotel.price" class="only-border border-success text-success no-margin-top no-margin-right"><div class="row-mini text-left"><div layout="column"><small><span class="text-initial" translate="common.from"></span><i ng-if="$ctrl.hotel.price.amount.initialAmount > 0 && $ctrl.hotel.price.amount.initialAmount > $ctrl.hotel.price.amount.finalAmount">&nbsp;<del>{{$ctrl.hotel.price.amount.initialAmount|chCurrency}}</del></i></small><span class="md-subhead row-mini"><strong>{{($ctrl.hotel.price.amount.finalAmount|chCurrency)}}</strong></span><small ng-if="$ctrl.hotel.nights > 0" class="text-lowercase"><span translate="common.for"></span>&nbsp;{{$ctrl.hotel.nights}}&nbsp;<span ng-show="$ctrl.hotel.nights == 1" translate="common.night"></span><span ng-show="$ctrl.hotel.nights > 1" translate="common.nights"></span></small></div></div></md-button><div ng-if="!$ctrl.hotel.price" layout="column" class="text-warn"><md-icon class="mdi mdi-emoticon-sad md-32 text-warn"></md-icon><strong translate="reservation.availability.missed"></strong></div></div></div></div></div><div ng-if="$ctrl.markerType == \'price\'"><div layout layout-padding layout-wrap class="no-padding-right no-padding-left no-padding-bottom" ng-if="$ctrl.hotel.price && $ctrl.hotel.roomsCounter.actual >= 1"><div flex-xs="100" flex-gt-xs layout layout-align="start center" class="text-success no-padding-left"><strong><em translate="reservation.availability.ok.simple"></em></strong></div><div flex-xs="100" flex layout="column" class="no-padding"><md-button class="bg-success no-margin-left no-margin-right" ng-click="$ctrl.$hotelClick()" aria-label="Book now"><span translate="common.book"></span></md-button></div></div><div layout layout-padding layout-wrap class="no-padding-right no-padding-left no-padding-bottom" ng-if="!$ctrl.hotel.price || $ctrl.hotel.roomsCounter.actual <= 0"><div flex-xs="100" flex-gt-xs layout layout-align="start center" class="text-warn no-padding-left"><strong><em translate="reservation.availability.missed.full"></em></strong></div><div flex-xs="100" flex layout="column" class="no-padding"><md-button class="bg-warn no-margin-left no-margin-right" ng-click="$ctrl.$hotelClick()" aria-label="Search other dates"><span translate="reservation.view.other.period"></span></md-button></div></div></div></div></div></info-window>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.$$markerIcon="/resources/public/img/map-marker.01.png",e.$getMarkerPosition()},this.$getMarkerPosition=function(){if(e.hotel){var t=e.hotel.addressInfo.address+", "+e.hotel.addressInfo.city+", "+e.hotel.addressInfo.zipcode;e.chHotelMapCtrl.$$geocoder.geocode({address:t},function(n,a){a==google.maps.GeocoderStatus.OK?e.$$position=n[0].geometry.location:console.error("Error geocoding hotel '"+e.hotel.name+"' (address: "+t+"): "+a)})}},this.$setSelected=function(t,e){t&&(t.selectEffect=!1,t.selected=!_.isBoolean(e)||e)},this.$showDetails=function(t,n){e.chHotelMapCtrl.$$currHotel&&e.chHotelMapCtrl.$$currHotel.id==t.id||(e.$hideDetails(ev,e.chHotelMapCtrl.$$currHotel),e.setSelected(t,!0),e.chHotelMapCtrl.$$currHotel=t),e.chHotelMapCtrl.map.showInfoWindow("hotel-iw",n?"cmk_"+t.id:"mk_"+t.id)},this.$hideDetails=function(t){e.$setSelected(t,!1),e.chHotelMapCtrl.map.hideInfoWindow("hotel-iw")}}t.$inject=["$scope"],angular.module("itaca.components").component("chHotelMapMarker",{require:{chHotelMapCtrl:"^chHotelMap"},bindings:{hotel:"<",markerType:"@"},controller:t,template:'<div ng-if="$ctrl.hotel" ng-switch="$ctrl.markerType"><div ng-switch-when="pointer"><marker class="clickable" id="mk_{{$ctrl.hotel.id}}" ng-if="$ctrl.$$position" position="[{{$ctrl.$$position.lat()}}, {{$ctrl.$$position.lng()}}]" icon="{{$ctrl.$$markerIcon}}" on-mouseover="$ctrl.$showDetails($ctrl.hotel);"></marker></div><div ng-switch-default><custom-marker id="cmk_{{$ctrl.hotel.id}}" ng-if="$ctrl.$$position" position="[{{$ctrl.$$position.lat()}}, {{$ctrl.$$position.lng()}}]"on-click="$ctrl.$showDetails($ctrl.hotel, true)" on-mouseover="$ctrl.$setSelected($ctrl.hotel, true)" on-mouseout="$ctrl.$setSelected($ctrl.hotel, false)"><div class="clickable" ng-class="{\'animated bounce\': $ctrl.hotel.selected && $ctrl.hotel.selectEffect}"><div class="ch-marker-inner md-caption" ng-class="{\'bg-primary\': $ctrl.markerType == \'name\' || $ctrl.hotel.selected,\'bg-primary-light\': $ctrl.markerType == \'price\' && !$ctrl.hotel.selected && $ctrl.hotel.price ,\'bg-gray-light\': $ctrl.markerType == \'price\' && !$ctrl.hotel.selected && !$ctrl.hotel.price}" ng-switch="$ctrl.markerType"><span ng-switch-when="price"><div ng-if="$ctrl.hotel.price"><span>{{($ctrl.hotel.price.amount.finalAmount|chCurrency)}}</span></div><div ng-if="!$ctrl.hotel.price"><md-icon class="mdi mdi-emoticon-sad md-18 text-white"></md-icon></div></span><strong ng-switch-default>{{$ctrl.hotel.name}}</strong></div><div class="arrow-down arrow-sm" ng-class="{\'border-primary\': $ctrl.markerType == \'name\' || $ctrl.hotel.selected,'+"'border-primary-light': $ctrl.markerType == 'price' && !$ctrl.hotel.selected && $ctrl.hotel.price ,'border-gray-light': $ctrl.markerType == 'price' && !$ctrl.hotel.selected && !$ctrl.hotel.price}\"></div></div></custom-marker></div></div>"})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.contClass=e.contClass||"layout-row",e.optionClass=e.optionClass||"flex md-raised",e.$select(),e.$initWatches()},this.$select=function(t){var n=Math.floor(_.isNil(t)?e.ngModel:t),a=_.find(e.options,{value:n});return e.$$colorClass=a?a.colorClass:null,_.forEach(e.options,function(t){t.selected=t.value==n}),!0},this.$preview=function(t){_.isEqual(e.$$previewOpt,t)||(e.$$previewOpt=angular.copy(t))},this.$cancelPreview=function(){e.$$previewOpt=null},this.$updateModel=function(t){e.ngModel=t.value,e.$cancelPreview()},this.$initWatches=function(){t.$watchCollection(function(){return e.$$previewOpt},function(t,n){t?n&&t.value==n.value||e.$select(t.value):e.$select()})}}t.$inject=["$scope"],angular.module("itaca.components").component("chIconSelect",{transclude:!0,require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",options:"<",ngDisabled:"<?",contClass:"@?",optionClass:"@?"},controller:t,template:'<div class="ch-icon-select {{$ctrl.contClass}}"><md-button ng-repeat="option in $ctrl.options" class="ch-icon-select-option no-margin no-padding minimal-button text-wrap text-initial {{$ctrl.optionClass}}" ng-class="{\'md-hover-icon\': !option.selected}"ng-click="$ctrl.$updateModel(option)" aria-label="{{option.label || (option.labelKey|translate)}}" ng-disabled="$ctrl.ngDisabled"><div ng-if="option.iconClass" class="no-padding" layout layout-align="center center"><span><md-icon class="layout-padding material-icons {{option.iconClass}} {{option.colorClass}}"  ng-mouseover="$ctrl.$preview(option)" ng-mouseout="$ctrl.$cancelPreview()"></md-icon></span></div><div ng-if="option.label || option.labelKey" class="text-small no-padding row-1 md-icon-text {{option.colorClass}}"><span ng-if="option.label" ng-bind="option.label"></span><span ng-show="!option.label && option.labelKey"><span translate="{{option.labelkey}}"></span></span></div ></md-button></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.progressDiameter=e.progressDiameter||80}}t.$inject=["$scope"],angular.module("itaca.components").component("chLoadingModal",{bindings:{message:"<",messageKey:"<",progressDiameter:"@",contClass:"@"},controller:t,template:'<div flex layout="column" layout-padding layout-align="center center" class="ch-loading-modal {{$ctrl.contClass}}"><div><md-progress-circular class="md-primary ch-progress" md-mode="indeterminate" md-diameter="{{$ctrl.progressDiameter}}"></md-progress-circular></div><div ng-if="$ctrl.message || $ctrl.messageKey" class="text-center"><span ng-if="$ctrl.message" ng-bind="$ctrl.message"></span><span ng-if="!$ctrl.message && $ctrl.messageKey" translate="{{$ctrl.messageKey}}"></span></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$postLink=function(){n.$hideSiblings(n.hideSiblings)},this.$onInit=function(){n.contClass=n.contClass||"bg-primary text-white md-title",n.progressDiameter=n.progressDiameter||150,n.$initWatches()},this.$onDestroy=function(){n.$hideSiblings(!1)},this.$hideSiblings=function(t){var n=e.parent().children();t?n.addClass("ng-hide"):n.removeClass("ng-hide"),e.removeClass("ng-hide")},this.$initWatches=function(){t.$watch(function(){return n.hideElement},function(t,e){n.$toggleEl(e,!0),n.$toggleEl(t)})}}t.$inject=["$scope","$element"],angular.module("itaca.components").component("chLoadingProgress",{bindings:{message:"<",messageKey:"<",errorMessage:"<",errorMessageKey:"<",progressDiameter:"@",contClass:"@",hideSiblings:"<"},controller:t,template:'<div flex="100" layout="column" layout-align="center center" class="{{$ctrl.contClass}}"><div ng-if="!$ctrl.errorMessage && !$ctrl.errorMessageKey" flex layout="column" layout-padding layout-align="center center"><div><md-progress-circular class="ch-progress-white" md-mode="indeterminate" md-diameter="{{$ctrl.progressDiameter}}"></md-progress-circular></div><div ng-if="$ctrl.message || $ctrl.messageKey" class="text-center"><span ng-if="$ctrl.message" ng-bind="$ctrl.message"></span><span ng-if="!$ctrl.message && $ctrl.messageKey" translate="{{$ctrl.messageKey}}"></span></div></div><div ng-if="$ctrl.errorMessage || $ctrl.errorMessageKey" flex layout="column" layout-padding layout-align="center center"><div><md-icon class="mdi mdi-alert-circle-outline md-70 text-white"></md-icon></div><div class="md-display-2">Oops...</div><div><span ng-if="$ctrl.errorMessage" ng-bind="$ctrl.errorMessage"></span><span ng-if="!$ctrl.errorMessage && $ctrl.errorMessageKey" translate="{{$ctrl.errorMessageKey}}"></span></div></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;a.$onInit=function(){a.$$originalValue=a.referTo||angular.copy(a.ngModel),a.cssClass=a.cssClass||"label bg-blue-sea"}}t.$inject=["$scope","$element","$attrs"],angular.module("itaca.components").component("chOriginalValue",{require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",referTo:"=?",label:"@",filter:"@",cssClass:"@"},controller:t,template:'<span class="{{$ctrl.cssClass}}" ng-if="$ctrl.$$originalValue != $ctrl.ngModel"><span>{{$ctrl.label}}:&nbsp;</span><span ng-if="$ctrl.filter">{{::($ctrl.$$originalValue|useFilter:$ctrl.filter)}}</span><span ng-if="!$ctrl.filter">{{::$ctrl.$$originalValue}}</span></span>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.theme=_.includes(["dark","light"],n.theme)?n.theme:"light",n.iconClass=n.iconClass||"dark"!=n.theme?"text-white":"",n.size=_.includes(["big","small"],_.toLower(n.size))?n.size:"small",n.people=n.people||{},n.max=n.max||n.people.adults,n.$$maxUnderages=_.max([n.people.boys,n.people.children,n.people.kids]),n.$$maxUnderages=n.$$maxUnderages>n.max?n.max:n.$$maxUnderages,n.$$peopleDetails={adults:n.people.adults},n.extraMax=n.extraMax||(n.extraPeople?_.max([n.extraPeople.adults,n.extraPeople.boys,n.extraPeople.children,n.extraPeople.kids]):0),n.$$extra$$maxUnderages=n.extraPeople?_.max([n.extraPeople.boys,n.extraPeople.children,n.extraPeople.kids]):0,n.$$extra$$maxUnderages=n.$$extra$$maxUnderages>n.extraMax?n.extraMax:n.$$extra$$maxUnderages,n.$$extraPeopleDetails=n.extraPeople&&n.extraPeople.adults?{adults:n.extraPeople.adults}:n.extraPeople},this.$openDetails=function(t){_.isBoolean(n.hideDetails)&&n.hideDetails||e.paxDetails(t,{people:n.people,extraPeople:n.extraPeople,max:n.max,extraMax:n.extraMax})}}t.$inject=["$scope","Dialog"],angular.module("itaca.components").component.directive("chPeopleIcons",{bindings:{people:"<",max:"<?",extraPeople:"<?",extraMax:"<?",hideDetails:"<?",hideInfoIcon:"<?",hideTooltip:"<?",hidePeople:"<?",hideExtraPeople:"<?",size:"@",theme:"@",iconClass:"@"},controller:t,template:'<div flex layout="column"><md-button class="minimal-button no-margin" ng-class="{"layout-padding-sm": $ctrl.size == "big"}" ng-click="$ctrl.$openDetails($event)" aria-label="Show pax details"><span layout layout-wrap layout-align="center center"><small ng-if="!$ctrl.hidePeople && $ctrl.people.adults"><span ng-if="$ctrl.size == "small"">{{$ctrl.people.adults}}</span><md-icon class="material-icons mdi {{$ctrl.iconClass}}" ng-class="{"mdi-account-multiple" : $ctrl.people.adults > 1, "mdi-account": $ctrl.people.adults == 1, "md-18": $ctrl.size == "small", "md-48": $ctrl.size == "big"}"></md-icon><span ng-if="$ctrl.size == "big" && !$ctrl.hideDetails && !$ctrl.hideInfoIcon">&nbsp;<md-icon class="material-icons mdi mdi-information-outline md-14 {{$ctrl.iconClass}}"></md-icon></span><div ng-if="$ctrl.size == "big"" class="row-1 text-wrap"><ch-people-summary class="text-lowercase" people="$ctrl.$$peopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.beds.principal.into"></span></div></small><small ng-if="!$ctrl.hideExtraPeople && ($ctrl.extraPeople.adults || $ctrl.extraPeople.boys || $ctrl.extraPeople.children || $ctrl.extraPeople.kids)"><span ng-if="!$ctrl.hidePeople">&nbsp;+&nbsp;</span><span ng-if="$ctrl.size == "small""><span ng-if="$ctrl.extraPeople.adults">{{$ctrl.extraPeople.adults}}</span><span ng-if="!$ctrl.extraPeople.adults && $$extra$$maxUnderages">{{$ctrl.$$extra$$maxUnderages}}</span></span><md-icon ng-if="$ctrl.extraPeople.adults" class="material-icons mdi {{$ctrl.iconClass}}" ng-class="{"mdi-account-multiple" : $ctrl.extraPeople.adults > 1, "mdi-account": $ctrl.extraPeople.adults == 1, "md-18": $ctrl.size == "small", "md-48": $ctrl.size == "big"}"></md-icon><md-icon ng-if="!$ctrl.extraPeople.adults && $ctrl.$$extra$$maxUnderages" class="material-icons mdi mdi-human-child {{$ctrl.iconClass}}" ng-class="{"md-14": $ctrl.size == "small", "md-36": $ctrl.size == "big"}"></md-icon><span ng-if="$ctrl.size == "big" && !$ctrl.hideDetails && !$ctrl.hideInfoIcon">&nbsp;<md-icon class="material-icons mdi mdi-information-outline md-14 {{$ctrl.iconClass}}"></md-icon></span><div ng-if="$ctrl.size == "big"" class="row-1 text-wrap"><ch-people-summary class="text-lowercase" people="$ctrl.$$extraPeopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.otherbeds.into"></span></div></small><span ng-if="$ctrl.size == "small" && !$ctrl.hideDetails && !$ctrl.hideInfoIcon">&nbsp;<md-icon class="material-icons mdi mdi-information-outline md-14 {{$ctrl.iconClass}}"></md-icon></span><md-tooltip ng-if="!$ctrl.hideTooltip" class="auto-height text-wrap row-mini"><div class="text-wrap"><span ng-if="!$ctrl.hidePeople && $ctrl.people.adults"><ch-people-summary class="text-lowercase" people="$ctrl.$$peopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.beds.principal.into"></span></span><span ng-if="!$ctrl.hideExtraPeople && ($ctrl.extraPeople.adults || $ctrl.extraPeople.boys || $ctrl.extraPeople.children || $ctrl.extraPeople.kids)"><span ng-if="!$ctrl.hidePeople">&nbsp;+&nbsp;</span><ch-people-summary class="text-lowercase" people="$ctrl.$$extraPeopleDetails"></ch-people-summary>&nbsp;<span class="text-lowercase" translate="bed.otherbeds.into"></span></span><span ng-if="$ctrl.$$maxUnderages || $ctrl.$$extra$$maxUnderages" class="text-lowercase">&nbsp;+&nbsp;<span translate="common.options.more.available"></span></span><div ng-if="!$ctrl.hideDetails"><em translate="common.information.further.click"></em></div></div></md-tooltip></span></md-button></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.containerClass=n.containerClass||"md-block",n.people=n.people||{},n.inputName=n.inputName||"people",n.mdNoAsterisk=!_.isNil(n.mdNoAsterisk)&&n.mdNoAsterisk,n.$$data={people:n.people},n.$initWhatches()},this.$observeOriginal=function(){n.$$data=n.$$data||{},n.$$data.people=n.people},this.$observeWorking=function(){_.assign(n.people,n.$$data.people),e.peopleSummary(n.$$data.people).then(function(t){n.$$peopleSummary=t})},this.$initWhatches=function(){t.$watchCollection(function(){return n.people},n.$observeOriginal),t.$watchCollection(function(){return n.$$data.people},n.$observeWorking)}}t.$inject=["$scope","ReservationUtils"],angular.module("itaca.components").component("chPeopleInput",{bindings:{containerClass:"@",inputLabel:"@",inputName:"@",people:"=",ngRequired:"<?",mdNoAsterisk:"<?",hasClose:"<?"},controller:t,template:'<ng-form name="chPeopleInputForm"><md-input-container class="{{$ctrl.containerClass}}"><label><span ng-if="!$ctrl.inputLabel" translate="people.people"></span><span ng-if="$ctrl.inputLabel" ng-bind="$ctrl.inputLabel"></span></label><input type="area" name="{{$ctrl.inputName}}" ng-model="$ctrl.$$peopleSummary" class="clickable" on-click-panel=""/tpls/pax-counters.part"" has-backdrop="false"disable-parent-scroll="true" data="$ctrl.$$data" readonly ng-required="$ctrl.ngRequired" md-no-asterisk="mdNoAsterisk" has-close="$ctrl.hasClose"><div ng-messages="chPeopleInputForm[$ctrl.inputName].$error"><span ng-message="required"><span translate="error.required"></span></span></div></md-input-container></ng-form>'})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.fieldName=i.fieldName||"people",i.clickOutsideToClose=i.clickOutsideToClose||!0,i.hasBackdrop=!_.isNil(i.hasBackdrop)&&i.hasBackdrop,i.buttonClass=i.buttonClass||"no-margin",i.labelClass=i.labelClass||"text-gray-light",i.$$xPosition="CENTER",i.$$yPosition="BELOW",i.$$panelClass="bg-white md-whiteframe-15dp";var t=n.newPanelPosition().relativeTo(e).addPanelPosition(n.xPosition[i.$$xPosition],n.yPosition[i.$$yPosition]);i.$$panelConfig={attachTo:angular.element(document.body),controller:"basePeopleCountPanelCtrl",controllerAs:"ctrl",templateUrl:"/tpls/pax-counters.part",position:t,clickOutsideToClose:i.clickOutsideToClose,disableParentScroll:i.disableParentScroll,hasBackdrop:i.hasBackdrop,fullscreen:!!_.isBoolean(i.fullscreen)&&i.fullscreen,panelClass:i.$$panelClass,locals:{data:i.$$workingData,maxCount:i.maxCount,hasConfirm:i.hasConfirm,hasClose:i.hasClose},onCloseSuccess:function(t,e){(!(!!_.isBoolean(i.hasConfirm)&&i.hasConfirm)||_.isBoolean(e)&&e)&&(_.assign(i.people,i.$$workingData.people),i.onClose&&i.onClose({people:i.people})),(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!1)},onOpenComplete:function(){(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!0)}},i.zIndex&&(i.$$panelConfig.zIndex=i.zIndex),i.$initWatches()},this.$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){i.people=i.people||{},i.$$workingData={people:angular.copy(i.people)},i.$$panelConfig.openFrom=t,i.$$panelConfig.locals={hasConfirm:i.hasConfirm,hasClose:i.hasClose},i.$$panelConfig.locals.data=i.$$workingData,i.$$panelConfig.locals.maxCount=i.maxCount,n.open(i.$$panelConfig)},this.$checkPeople=function(){i.$$hasPeople=i.people&&(i.people.adults||i.people.boys||i.people.children||i.people.kids);var t=i.chPeoplePickerForm[i.fieldName];if(t&&(i.$$hasPeople&&t.$setDirty(),i.minCount)){var e=a.guestsCount(i.people);e&&e.standard<i.minCount?t.$setValidity("min",!1):t.$setValidity("min",!0)}},this.$initWatches=function(){t.$watchCollection(function(){return i.people},function(t,e){i.$checkPeople()}),t.$watchCollection(function(){return i.minCount},function(t,e){i.$checkPeople()})}}t.$inject=["$scope","$element","$mdPanel","ReservationUtils"],angular.module("itaca.components").component("chPeoplePicker",{bindings:{buttonClass:"@",wrapperClass:"@",label:"@",labelClass:"@",people:"=",fieldName:"@",ngRequired:"<?",ngDisabled:"<?",hasBackdrop:"<?",hasConfirm:"<?",hasClose:"<?",disableParentScroll:"<?",disableBodyScroll:"<?",clickOutsideToClose:"<?",onClose:"&?",zIndex:"@",fullscreen:"<?",maxCount:"<?",minCount:"<?",errorMessages:"<?",showErrorIcon:"<?"},controller:t,template:'<ng-form name="chPeoplePickerForm" class="flex no-padding layout-column"><md-button class="ch-people-counter-button flex layout-padding no-padding minimal-button text-lowercase text-center {{$ctrl.buttonClass}}" aria-label="Change people" ng-disabled="$ctrl.ngDisabled" ng-click="$ctrl.$openPanel($event)"><div class="{{$ctrl.wrapperClass}}"><div ng-if="$ctrl.label" class="md-padding"><div class="{{$ctrl.labelClass}} text-initial text-wrap row-1" ng-class="{"text-small": $ctrl.$$hasPeople}"><span ng-bind-html="$ctrl.label"></span></div></div><div ng-show="$ctrl.$$hasPeople" class="md-subhead text-wrap row-mini"><strong><ch-people-summary people="$ctrl.people"></ch-people-summary></strong></div></div><input type="hidden" name="{{$ctrl.fieldName}}" ng-model="$ctrl.people" ng-required="$ctrl.ngRequired"><div ng-messages="chPeoplePickerForm[$ctrl.fieldName].$error" ng-show="chPeoplePickerForm[$ctrl.fieldName].$dirty" class="text-danger text-small text-center row-1 no-padding layout-column layout-padding-sm"><div ng-message="required"><md-icon ng-if="$ctrl.showErrorIcon" class="mdi mdi-alert-outline material-icons md-18 text-danger"></md-icon><span class="text-wrap" translate="error.required"></span></div><div ng-message="min"><md-icon ng-if="$ctrl.showErrorIcon" class="mdi mdi-alert-outline material-icons md-18 text-danger"></md-icon><span class="text-wrap" ng-if="$ctrl.errorMessages.min" ng-bind="$ctrl.errorMessages.min"></span><span class="text-wrap" ng-if="!$ctrl.errorMessages.min" translate="error.field.min" translate-value-num="{{$ctrl.minCount}}"></span></div></div></md-button></ng-form>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.$initWatches()},this.$updateSummary=function(){if(a.noDetails){var t=e.guestsCount(a.people,a.extraPeople);!t&&t.total<=0?n("people.none").then(function(t){a.$$peopleSummary=t}):n("people.pax").then(function(e){a.$$peopleSummary=t.total+" "+e})}else e.peopleSummary(a.people,a.extraPeople).then(function(t){a.$$peopleSummary=t})},this.$initWatches=function(){t.$watchCollection(function(){return a.people},a.$updateSummary),t.$watchCollection(function(){return a.extraPeople},a.$updateSummary),t.$watchCollection(function(){return a.noDetails},a.$updateSummary)}}t.$inject=["$scope","ReservationUtils","$translate"],angular.module("itaca.components").component("chPeopleSummary",{bindings:{people:"<",extraPeople:"<?",noDetails:"<?"},controller:t,template:"<span>{{$ctrl.$$peopleSummary}}</span>"})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.noAsterisk=!!_.isBoolean(i.noAsterisk)&&i.noAsterisk,i.inputName=i.inputName||"phone",i.ngPattern=i.ngPattern||n.phone,i.$$phone={},i.$$searchTerm={value:""},i.$decompilePhone(),i.$loadPrefixes(),i.$initWatches()},this.$loadPrefixes=function(){a.all().then(function(t){_.forEach(t.content,function(t){t.code=t.code.toLowerCase()}),i.prefixes=t.content},function(t){e.error(t)})},this.$decompilePhone=function(){i.$$phone=i.$$phone||{},i.ngModel&&a.decompile(i.ngModel).then(function(t){_.assign(i.$$phone,t),_.isObject(t.prefix)||(i.$$phone.prefix={dial_code:t.prefix})},function(t){_.assign(i.$$phone,a.decompileSimple(i.ngModel)),i.$$phone.prefix={dial_code:i.$$phone.prefix}})},this.$clearSearchTerm=function(){i.$$searchTerm.value=""},this.$updateModel=function(){i.ngModel=i.$$phone&&i.$$phone.prefix&&i.$$phone.prefix.dial_code?a.compile(i.$$phone.prefix.dial_code,i.$$phone.number):i.ngModel},this.$initWatches=function(){t.$watchCollection(function(){return i.$$phone},function(t,e){i.$updateModel()})}}t.$inject=["$scope","$log","REGEXP","PhoneList"],angular.module("itaca.components").component("chPhoneInput",{require:{ngModelCtrl:"ngModel"},bindings:{ngModel:"=",inputName:"@",label:"@",placeholder:"@",prefixLabel:"@",prefixPlaceholder:"@",searchPlaceholder:"@",ngPattern:"<",ngRequired:"=?",ngDisabled:"=?",errorMessages:"<",prefixErrorMessages:"<",noAsterisk:"<"},controller:t,template:'<ng-form name="chPhoneInputForm" ng-class="{\'text-gray-light cursor-disabled\': $ctrl.ngDisabled}" layout><div><md-input-container class="md-block"><label ng-show="$ctrl.prefixLabel">{{$ctrl.prefixLabel}}</label><md-select name="prefix" placeholder="{{$ctrl.prefixPlaceholder}}" ng-model="phone.prefix" ng-required="$ctrl.ngRequired" ng-disabled="$ctrl.ngDisabled" ng-attr-md-no-asterisk="$ctrl.noAsterisk" md-container-class="selectHeader" aria-label="prefix" md-on-close="$ctrl.$clearSearchTerm()"><md-subheader class="no-padding"><md-select-header class="select-header bg-white"><input ng-model="$ctrl.$$searchTerm.value" type="search" ng-keydown="$event.stopPropagation()" placeholder="{{$ctrl.searchPlaceholder}}"class="header-searchbox md-text" autofocus></md-select-header></md-subheader><md-option ng-repeat="prefix in $ctrl.prefixes | filter:searchTerm.value" ng-value="prefix" ng-selected="prefix.dial_code == $ctrl.$$phone.prefix.dial_code"><span class="flag-icon flag-icon-{{::prefix.code}}"></span><strong>&nbsp;{{::prefix.name}}</strong><span>&nbsp;({{::prefix.dial_code}})</span></md-option></md-select><div ng-if="$ctrl.prefixErrorMessages" ng-messages="chPhoneInputForm.prefix.$error"><div ng-repeat="errMsg in $ctrl.prefixErrorMessages track by $index" ng-message="{{errMsg.error}}">{{errMsg.message}}</div></div></md-input-container></div><div flex><md-input-container class="md-block no-padding-important"><label ng-if="$ctrl.label">{{$ctrl.label}}</label><input type="text" name="{{$ctrl.inputName}}" placeholder="{{$ctrl.placeholder}}" ng-model="$ctrl.$$phone.number" ng-pattern="$ctrl.ngPattern" \tng-required="$ctrl.ngRequired" ng-disabled="$ctrl.ngDisabled" aria-label="{{$ctrl.label || $ctrl.placeholder}}"><div ng-if="$ctrl.errorMessages" ng-messages="chPhoneInputForm[$ctrl.inputName].$error"><div ng-repeat="errMsg in $ctrl.errorMessages track by $index" ng-message="{{errMsg.error}}">{{errMsg.message}}</div></div></md-input-container></div></ng-form>'})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.type=_.includes(["nightly","normal"],_.toLower(i.type))?_.toLower(i.type):"normal",i.hasBackdrop=!_.isNil(i.hasBackdrop)&&i.hasBackdrop;var t=e[0].querySelector(".ch-price-range-button"),l=n.newPanelPosition().relativeTo(angular.element(t)).addPanelPosition(n.xPosition.CENTER,n.yPosition.BELOW);i.$$config={attachTo:angular.element(document.body),controller:"priceSliderCtrl",controllerAs:"ctrl",templateUrl:"/reservation-price-slider.part",position:l,clickOutsideToClose:!0,disableParentScroll:i.disableParentScroll,hasBackdrop:!a("gt-sm")||i.hasBackdrop,fullscreen:!a("gt-sm"),panelClass:"panel-medium bg-white md-whiteframe-15dp",trapFocus:!0,onCloseSuccess:function(t,e){(!(!_.isBoolean(i.hasConfirm)||i.hasConfirm)||_.isBoolean(e)&&e)&&i.$updateOriginal(),(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!1)},onOpenComplete:function(){(i.hasBackdrop||i.disableBodyScroll)&&i.$toggleBodyScroll(!0)}}},this.$toggleBodyScroll=function(t){angular.element(document.body).css({overflow:t?"hidden":"auto"})},this.$openPanel=function(t){i.$$data={min:i.min,max:i.max};var e={hasConfirm:!_.isBoolean(i.hasConfirm)||i.hasConfirm,title:i.title,subtitle:i.subtitle,data:i.$$data};i.$$config.openFrom=t,i.$$config.hasBackdrop=!a("gt-sm")||i.hasBackdrop,i.$$config.fullscreen=!a("gt-sm"),i.$$config.locals=e,n.open(i.$$config)},this.$updateOriginal=function(){i.$$data&&(i.min=i.$$data.min,i.max=i.$$data.max)}}t.$inject=["$scope","$element","$mdPanel","$mdMedia"],angular.module("itaca.components").component("chPriceRangePicker",{bindings:{min:"=?",max:"=?",title:"@",subtitle:"@",wrapperClass:"@",buttonClass:"@",type:"@",disableParentScroll:"<?",disableBodyScroll:"<?",hasBackdrop:"<?",hasConfirm:"<?",hasClose:"<?",ngDisabled:"<?"},controller:t,template:'<ng-form name="chPriceRangeForm" class="flex no-padding layout-column"><md-button class="ch-price-range-button flex minimal-button text-initial {{$ctrl.buttonClass}}" ng-click="$ctrl.$openPanel($event)" aria-label="Change price range" ng-disabled="$ctrl.ngDisabled"><div class="{{$ctrl.wrapperClass}}"><div ng-show="$ctrl.max" class="text-wrap row-mini"><strong ng-show="$ctrl.min">{{$ctrl.min|chCurrency}}&nbsp;-&nbsp;</strong><span ng-show="!$ctrl.min"><span translate="common.up.to"></span>&nbsp;</span><strong>{{$ctrl.max|chCurrency}}</strong>&nbsp;<span ng-if="$ctrl.type == "nightly"" class="text-lowercase" translate="service.type.payment.NIGHTLY"></span></div><div ng-show="!$ctrl.max"><span translate="filter.by"></span>&nbsp;<span class="text-lowercase" translate="common.price"></span></div></div></md-button></ng-form>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewActionsContent",{transclude:!0,require:{chReviewActionsCtrl:"^chReviewActions"},controller:function(){var t=this;this.$onInit=function(){t.chReviewActionsCtrl.noDefault=!0},this.$onDestroy=function(){t.chReviewActionsCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.hideUser=_.isBoolean(n.hideUser)?n.hideUser:n.chReviewCtrl.hideUser,n.hideLikes=_.isBoolean(n.hideLikes)?n.hideLikes:n.chReviewCtrl.hideLikes,n.$initReview()},this.$initReview=function(){n.chReviewCtrl.review&&(n.review=n.chReviewCtrl.review)},this.$userClick=function(t){n.userState?e.goToState(n.userState,n.userStateParams):n.userClick&&n.userClick({$event:t,review:n.review})},this.$likeClick=function(t){n.likeClick&&n.likeClick({$event:t,review:n.review})}}t.$inject=["$scope","Navigator"],angular.module("itaca.components").component("chReviewActions",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{hideUser:"<?",userState:"@?",userStateParams:"<?",userClick:"&?",hideLikes:"<?",likeLabel:"@?",unlikeLabel:"@?",likeClick:"&?"},controller:t,template:'<div flex><div ng-if="!$ctrl.noDefault && (!$ctrl.hideUser || !$ctrl.hideLikes)" class="bg-gray-lighter flex layout-row layout-wrap layout-padding"><div class="layout-row layout-padding-sm no-padding no-outline" ng-class="{\'clickable\': $ctrl.userState || $ctrl.userClick}" ng-click="$ctrl.$userClick($event)" aria-label="Toggle user action"><div><span ng-if="$ctrl.userAvatar && $ctrl.review.reviewSettings.showAvatar && !$ctrl.review.reviewSettings.anonymous"class="relative menu-user-avatar-small display-block overflow-hidden"><img alt="User profile image" class="full-width" ng-src="{{$ctrl.userAvatar}}" lazy-image /></span><span ng-if="(!$ctrl.review.reviewSettings.showAvatar || !$ctrl.userAvatar) && !$ctrl.review.reviewSettings.anonymous"class="bg-blue-sea menu-user-avatar-small layout-row layout-align-center-center"><span class="md-headline text-uppercase">{{!$ctrl.review.reviewSettings.showRealName && ($ctrl.review.createdBy || $ctrl.review.reservation.guest).nickname ? ($ctrl.review.createdBy || $ctrl.review.reservation.guest).nickname.charAt(0) : ($ctrl.review.createdBy || $ctrl.review.reservation.guest).name.charAt(0)}}</span></span><md-icon ng-if="$ctrl.review.reviewSettings.anonymous" class="mdi mdi-account-circle md-38"></md-icon></div><div class="layout-align-center-start layout-column no-padding-bottom no-padding-top row-1"><small class="font-10 text-gray-light row-1"><span translate="common.written.by.female"></span>:</small><strong class="md-subhead"><span ng-if="!$ctrl.review.reviewSettings.anonymous && ($ctrl.review.createdBy || $ctrl.review.reservation.guest)"><span ng-if="!$ctrl.review.reviewSettings || $ctrl.review.reviewSettings.showRealName || !$ctrl.review.createdBy.nickname"><span ng-if="$ctrl.review.createdBy">{{::$ctrl.review.createdBy.name}}&nbsp;{{::$ctrl.review.createdBy.surname}}</span><span ng-if="!$ctrl.review.createdBy && $ctrl.review.reservation.guest">{{::$ctrl.review.reservation.guest.name}}&nbsp;{{::$ctrl.review.reservation.guest.surname}}</span></span><span ng-if="$ctrl.review.reviewSettings && !$ctrl.review.reviewSettings.showRealName && $ctrl.review.createdBy.nickname"><span ng-if="$ctrl.review.createdBy">{{::$ctrl.review.createdBy.nickname}}</span><span ng-if="!$ctrl.review.createdBy && $ctrl.review.reservation.guest">{{::$ctrl.review.reservation.guest.nickname}}</span></span></span><span ng-if="$ctrl.review.reviewSettings.anonymous || (!$ctrl.review.createdBy && !$ctrl.review.reservation.guest)" translate="common.anonymous"></span></strong><small class="font-10 text-gray-light row-1 text-lowercase" ng-if="!$ctrl.review.reviewSettings.anonymous && $ctrl.review.guest.reviewsCount"><span>{{::$ctrl.review.guest.reviewsCount}}&nbsp;</span><span ng-if="$ctrl.review.guest.reviewsCount == 1" translate="reviews.review"></span><span ng-if="$ctrl.review.guest.reviewsCount != 1" translate="reviews.reviews"></span></small></div></div><div ng-if="!$ctrl.hideLikes" class="no-padding flex-gt-sm flex-xs-100 flex-sm-100 layout-row layout-align-center-center layout-align-gt-sm-end-center"><md-button class="auto-height md-primary md-raised no-margin" ng-click="$ctrl.$likeClick($event)" aria-label="Toggle like"><md-icon ng-show="!$ctrl.review.helpful" class="mdi md-18 mdi-thumb-up"></md-icon>&nbsp;<small ng-if="!$ctrl.review.helpful"><span ng-if="!$ctrl.likeLabel" translate="review.likes.button"></span><span ng-if="$ctrl.likeLabel" ng-bind="$ctrl.likeLabel"></span></small><small ng-if="$ctrl.review.helpful"><span ng-if="!$ctrl.unlikeLabel" translate="review.likes.button.undo"></span><span ng-if="$ctrl.unlikeLabel" ng-bind="$ctrl.unlikeLabel"></span></small></md-button></div></div><div flex ng-transclude></div><md-divider></<md-divider></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.dateFormat=e.dateFormat||e.chReviewCtrl.dateFormat,e.hideLikes=_.isBoolean(e.hideLikes)?e.hideLikes:e.chReviewCtrl.hideLikes,e.$initReview()},this.$initReview=function(){e.chReviewCtrl.review&&(e.review=e.chReviewCtrl.review,e.review.showDetails=!0)}}t.$inject=["$scope"],angular.module("itaca.components").component("chReviewContent",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{dateFormat:"@?",hideLikes:"<?"},controller:t,template:'<div><div class="layout-row layout-wrap layout-align-center-center layout-padding"><div class="layout-column flex-xs-100 flex-sm-100 flex-gt-sm"><div ng-show="!$ctrl.review.showDetails"><div class="md-margin ng-scope no-margin-top no-margin-x-sides"><small><span translate="review.score.total"></span>:</small><md-progress-linear md-mode="determinate" value="{{($ctrl.review.score * 10)}}"></md-progress-linear></div></div><div ng-show="$ctrl.review.showDetails"><div ng-repeat="feedback in $ctrl.review.feedbacks track by $index" class="md-margin ng-scope no-margin-top no-margin-x-sides"title="{{::feedback.value}}" ng-switch="feedback.type"><small class="layout-row flex-100"><span class="flex" translate="{{::feedback.titleKey}}" translate-values="{{feedback.titleParams}}"></span><span ng-if="feedback.type == \'RANK\'">{{::feedback.value}}</span></small><md-progress-linear ng-switch-when="RANK" md-mode="determinate" value="{{(feedback.value * 10)}}"></md-progress-linear><div ng-switch-default><small ng-if="feedback.value">{{feedback.value}}</small><small ng-if="!feedback.value" class="text-gray-light text-lowercase"><em>({{::(\'review.comment.none\'|translate)}})</em></small></div></div></div><div class="text-right"><md-button class="auto-height no-margin row-1 text-capitalize text-gray-light text-small" ng-click="$ctrl.review.showDetails = !$ctrl.review.showDetails" aria-label="show details"><span ng-if="!$ctrl.review.showDetails" translate="common.show"></span><span ng-if="$ctrl.review.showDetails" translate="common.hide"></span>&nbsp;<span class="text-lowercase" translate="common.details"></span><md-icon ng-class="$ctrl.review.showDetails ? \'mdi-chevron-up\' : \'mdi-chevron-down\'" class="mdi md-18"></md-icon></md-button></div></div><div class="flex-100 flex-gt-sm-20 layout-column" ng-class="$ctrl.review.showDetails ? \'layout-align-center-center\' : \'layout-align-start-center\'"><small ng-if="$ctrl.review.showDetails" class="font-12 text-gray-light text-center" translate="review.score.total"></small><span class="md-headline">{{::$ctrl.review.score.toFixed(1)}}</span><span class="text-center" translate="{{$ctrl.review.label}}"></span></div></div><div ng-transclude></div><div ng-if="$ctrl.review.createdDate" class="layout-padding"><small class="text-gray-light">{{$ctrl.review.createdDate|utcDate:$ctrl.dateFormat}}</small></div><md-divider></<md-divider><div ng-if="!$ctrl.hideLikes && $ctrl.review.likes.length" class="bg-gray-lighter"><div class="layout-padding"><small class="text-primary"><md-icon class="mdi md-14 mdi-thumb-up text-primary"></md-icon>&nbsp;<span ng-if="!$ctrl.review.helpful" class="text-lowercase"><span>{{$ctrl.review.likes.length}}&nbsp;</span><span ng-if="$ctrl.review.likes.length == 1" translate="review.likes.count"></span><span ng-if="$ctrl.review.likes.length != 1" translate="review.likes.count.plur"></span></span><span ng-if="$ctrl.review.helpful"><span ng-if="$ctrl.review.likes.length == 1" translate="review.likes.you"></span><span ng-if="$ctrl.review.likes.length != 1" translate="review.likes.you.other" translate-values="{num: $ctrl.review.likes.length}"></span></span></small></div><md-divider></<md-divider></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.imgBaseUrl=a.imgBaseUrl||a.chReviewCtrl.imgBaseUrl,_.isBoolean(a.imgBaseUrl)&&(a.imgBaseUrl=a.imgBaseUrl&&t.config&&t.config.amz?t.config.amz.baseUrl+"/"+t.config.amz.bucketName+"/":""),a.defaultImgUrl=a.defaultImgUrl||"/resources/public/img/no-gallery-image.png",a.$initReview()},this.$initReview=function(){a.chReviewCtrl.review&&(a.review=a.chReviewCtrl.review)},this.$openGallery=function(t,i){e(a.review.label).then(function(e){var l=a.review.score+":&nbsp;";l+=a.review.title?a.review.title:e,n.showGallery(t,l,a.review.gallery,{storageUrl:a.imgBaseUrl,initialSlide:i||0})})}}t.$inject=["AppOptions","$translate","Dialog"],angular.module("itaca.components").component("chReviewGallery",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{imgBaseUrl:"@?",defaultImgUrl:"@?",title:"@"},controller:t,template:'<div ng-if="$ctrl.review.gallery.length" flex layout-padding><div class="layout-row layout-wrap layout-padding-sm layout-align-center-center layout-align-gt-sm-start-center"><span class="flex-100 font-12 ng-scope no-padding-bottom text-gray-light"><span ng-if="!$ctrl.title"><span translate="common.gallery"></span>:</span><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></span></span><div ng-repeat="photo in $ctrl.review.gallery" class="clickable" ng-click="$ctrl.$openGallery($event, $index)" aria-label="Open review gallery"><img ng-src="{{$ctrl.imgBaseUrl + photo.path}}" alt="{{photo.tags[0]}}" lazy-imagedefault-img-url="{{$ctrl.defaultImgUrl}}" class="width-100"></div></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.hideImage=!!_.isBoolean(n.hideImage)&&n.hideImage,n.imgBaseUrl=n.imgBaseUrl||n.chReviewCtrl.imgBaseUrl,_.isBoolean(n.imgBaseUrl)&&(n.imgBaseUrl=n.imgBaseUrl&&e.config&&e.config.amz?e.config.amz.baseUrl+"/"+e.config.amz.bucketName+"/":""),n.$initReview(),n.$getHotelImage()},this.$initReview=function(){n.chReviewCtrl.review&&(n.review=n.chReviewCtrl.review)},this.$getHotelImage=function(){var t=null;_.forEach(n.review.hotel.gallery,function(e,a,i){if(0==a&&(t=n.imgBaseUrl+e.path),e.cover)return t=n.imgBaseUrl+e.path,!1}),n.$$hotelImage=t}}t.$inject=["$scope","AppOptions"],angular.module("itaca.components").component("chReviewHotelInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{hideImage:"<?",imgBaseUrl:"@?"},controller:t,template:'<div flex layout-padding class="md-subhead row-mini text-bold"><a ng-href="{{\'/hotel/\'+ $ctrl.review.hotel.id}}" target="_blank" class="display-block clickable"><span class="layout-row layout-align-start-center"><img ng-if="!$ctrl.hideImage && $ctrl.$$hotelImage" class="md-margin menu-user-avatar-small no-margin-left no-margin-y-sides" ng-src="{{$ctrl.$$hotelImage}}"><span class="no-padding layout-column"><span><span class="text-primary">{{::$ctrl.review.hotel.name}}&nbsp;</span><span class="label label-xs" translate="hotel.type.{{::$ctrl.review.hotel.type}}"></span></span><small class="text-gray-light"><span>{{::$ctrl.review.hotel.addressInfo.city}}</span>,&nbsp;<span>{{::$ctrl.review.hotel.addressInfo.address}}</span></small></span></span></a></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewProCon",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{textLimit:"<?"},controller:function(){var t=this;this.$onInit=function(){t.textLimit=isFinite(parseInt(t.textLimit))?parseInt(t.textLimit):200,t.$initReview()},this.$initReview=function(){t.chReviewCtrl.review&&(t.review=t.chReviewCtrl.review)}},template:'<div ng-if="$ctrl.review.pro || $ctrl.review.con" flex layout-padding><div ng-if="$ctrl.review.pro" class="md-padding no-padding-top"><md-icon class="mdi mdi-thumb-up-outline text-success md-24"></md-icon>&nbsp;<strong><span translate="review.pro"></span>:</strong><div class="layout-margin no-margin-x-sides text-ellipsis"><span hm-read-more hm-text="{{$ctrl.review.pro}}" hm-limit="$ctrl.textLimit"hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}"hm-link-class="clickable text-primary"></span></div></div><div ng-if="$ctrl.review.con" class="md-padding no-padding-top"><md-icon class="mdi mdi-thumb-down-outline text-warn md-24"></md-icon>&nbsp;<strong><span translate="review.con"></span>:</strong><div class="layout-margin no-margin-x-sides text-ellipsis"><span hm-read-more hm-text="{{$ctrl.review.con}}" hm-limit="$ctrl.textLimit"hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}"hm-link-class="clickable text-primary"></span></div></div></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewReplyContent",{transclude:!0,require:{chReviewReplyCtrl:"^chReviewReply"},controller:function(){var t=this;this.$onInit=function(){t.chReviewReplyCtrl.noDefault=!0},this.$onDestroy=function(){t.chReviewReplyCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.ngReadonly=!_.isBoolean(e.ngReadonly)||e.ngReadonly,e.ngReadonly&&(e.$$currentMode="view"),e.ngEdit=!!_.isBoolean(e.ngEdit)&&e.ngEdit,e.responseClass=e.responseClass||"bg-info-light",e.arrowClass=e.arrowClass||"border-info-light",e.$initReview()},this.$initReview=function(){e.chReviewCtrl.review&&(e.review=e.chReviewCtrl.review,e.ngReadonly||e.review.reply&&e.review.reply.response||(e.$$currentMode="edit"))},this.$editReply=function(t){e.ngReadonly?e.$cancelReplyEdit(t):(e.$$reply=angular.copy(e.review.reply.response),e.$$currentMode="edit")},this.$cancelReplyEdit=function(t){e.$$reply=null,e.$$currentMode="view"},this.$sendReply=function(t){e.review.reply.response=angular.copy(e.$$reply),e.onReply&&e.onReply({$event:t,reply:e.review.reply.response}),e.$cancelReplyEdit(t)}}t.$inject=["$scope"],angular.module("itaca.components").component("chReviewReply",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{ngReadonly:"<?",ngEdit:"<?",title:"@",onReply:"&?",responseClass:"@?",arrowClass:"@?"},controller:t,template:'<div ng-show="!$ctrl.ngReadonly || $ctrl.review.reply.response || $ctrl.noDefault" class="ch-review-reply"><div class="ch-review-reply-arrow {{$ctrl.arrowClass}}"></div><div class="layout-padding no-padding ch-review-reply-inner {{$ctrl.responseClass}}"><div ng-if="!$ctrl.noDefault" class="layout-padding-sm"><div><strong><span ng-if="!$ctrl.title"><span translate="common.answer"></span>:</span><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></strong></div><div ng-if="$ctrl.$$currentMode == \'view\'"><div class="text-ellipsis text-wrap"><span hm-read-more hm-text="{{$ctrl.review.reply.response}}" hm-limit="200" hm-more-text="{{\'common.read.more\'|translate}}"hm-less-text="{{\'common.read.less\'|translate}}" hm-link-class="clickable text-primary"></span></div><div ng-if="!$ctrl.ngReadonly"><md-button ng-if="$ctrl.ngEdit" class="minimal-button no-margin-x-sides auto-height row-1 text-initial" ng-click="$ctrl.$editReply($event)" aria-label="Edit reply"><small translate="common.edit"></small></md-button></div></div><div ng-if="$ctrl.$$currentMode == \'edit\'" layout layout-padding-sm><div flex><md-input-container md-no-float class="md-block bg-white minimal-input no-margin"><textarea placeholder="{{\'review.reply.label\'|translate}}..." ng-model="$ctrl.$$reply" max-rows="5" md-no-resize></textarea></md-input-container></div><div layout layout-align="center end" class="no-padding"><md-button class="md-icon-button md-raised" ng-disabled="!$ctrl.$$reply" ng-click="$ctrl.$sendReply($event)" aria-label="Send reply"><md-icon class="mdi mdi-send md-24"></md-icon></md-button></div></div></div><div ng-transclude class="no-padding"></div></div></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewReportInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},controller:function(){var t=this;this.$onInit=function(){t.$initReview()},this.$initReview=function(){t.chReviewCtrl.review&&(t.review=t.chReviewCtrl.review)}},template:'<div class="no-padding flex" ng-if="$ctrl.review.reportType"><div><md-icon class="mdi md-18 mdi-flag-variant text-danger"></md-icon><small translate="review.reporting.label"></small></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.appOptions=t,this.portalIcons=e.portalIcons(),this.$onInit=function(){a.textLimit=isFinite(parseInt(a.textLimit))?parseInt(a.textLimit):200,a.$initReview()},this.$initReview=function(){a.chReviewCtrl.review&&(a.review=a.chReviewCtrl.review,a.$getPeriod())},this.$getPeriod=function(){var t=n.absoluteMoment(a.review.reservation.checkin),e=n.absoluteMoment(a.review.reservation.checkout);t.get("month")==e.get("month")?a.$$period=t.format("MMMM YYYY"):a.$$period=t.format("MMMM YYYY")+"/"+e.format("MMMM YYYY")}}t.$inject=["AppOptions","IconUtils","DateUtils"],angular.module("itaca.components").component("chReviewReservationInfo",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{title:"@"},controller:t,template:'<div layout-padding><div class="no-padding-bottom no-padding-right"><div><small><span ng-if="!$ctrl.title"><span translate="review.source"></span>&nbsp;</span><span ng-if="$ctrl.title"><span ng-bind="$ctrl.title"></span>&nbsp;</span><strong ng-switch="$ctrl.review.reservation.source"><span ng-switch-when="PORTAL">{{$ctrl.appOptions.about.uiName}}</span><span ng-switch-default translate="channel.source.{{$ctrl.review.reservation.source.toLowerCase()}}"></span></strong></small><span><md-icon class="{{$ctrl.portalIcons[$ctrl.review.reservation.source]}} channel-icon-mini"></md-icon></span></div><div ng-if="$ctrl.$$period"><small ng-bind="$ctrl.$$period"></small></div></div></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewTitleContent",{transclude:!0,require:{chReviewTitleCtrl:"^chReviewTitle"},controller:function(){var t=this;this.$onInit=function(){t.chReviewTitleCtrl.noDefault=!0},this.$onDestroy=function(){t.chReviewTitleCtrl.noDefault=!1}},template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t,e,n){t.$mdMedia=n;var a=this;this.$onInit=function(){a.titleQuote=!_.isBoolean(a.titleQuote)||a.titleQuote,a.hideNewIcon=!!_.isBoolean(a.hideNewIcon)&&a.hideNewIcon,a.$initReview()},this.$initReview=function(){a.chReviewCtrl.review&&(a.review=a.chReviewCtrl.review)}}t.$inject=["$scope","ReviewsUtils","$mdMedia"],angular.module("itaca.components").component("chReviewTitle",{transclude:!0,require:{chReviewCtrl:"^chReview"},bindings:{titleQuote:"@?",hideNewIcon:"<?"},controller:t,template:'<div flex><div ng-if="!$ctrl.noDefault" class="flex layout-padding"><div class="md-subhead flex ellipsis text-wrap"><span ng-if="!$ctrl.hideNewIcon && $ctrl.review.isNew"><md-icon class="material-icons mdi mdi-new-box text-info"></md-icon>&nbsp;</span><strong><em ng-if="$ctrl.review.title"><span ng-if="$ctrl.titleQuote">&ldquo;</span><span ng-bind="$ctrl.review.title"></span><span ng-if="$ctrl.titleQuote">&bdquo;</span></em><span ng-if="!$ctrl.review.title"><span translate="{{$ctrl.review.label}}"></span></span></strong></div></div><div ng-transclude></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.newLimit=_.isFinite(parseInt(a.newLimit))?parseInt(a.newLimit):7,a.hideUser=!!_.isBoolean(a.hideUser)&&a.hideUser,a.hideLikes=!!_.isBoolean(a.hideLikes)&&a.hideLikes,a.imgBaseUrl=a.imgBaseUrl||!0,_.isBoolean(a.imgBaseUrl)&&(a.imgBaseUrl=a.imgBaseUrl&&n.config&&n.config.amz?n.config.amz.baseUrl+"/"+n.config.amz.bucketName+"/":""),a.$initReview()},this.$initReview=function(){a.review&&(a.review.isNew=moment().isBefore(moment(a.review.createdDate).add(a.newLimit,"days")),a.review.label=e.generateScoreLabel(Math.floor(a.review.score)),a.$getUserAvatar(),a.$initLikes(),a.$initWatches())},this.$initLikes=function(){a.review.helpful=n.guest&&n.guest.id&&_.some(a.review.likes,function(t){return _.isEqual(t,n.guest.id)})},this.$getUserAvatar=function(){var t=n.config.amz.baseUrl+"/"+n.config.amz.bucketName+"/";if(a.review.createdBy&&a.review.createdBy.avatarType)switch(a.review.createdBy.avatarType){case"PORTAL":a.userAvatar=a.review.createdBy.avatar?t+a.review.createdBy.avatar:null;break;case"FACEBOOK":a.userAvatar=a.review.createdBy.facebookImage;break;case"GOOGLE":a.userAvatar=a.review.createdBy.googleImage;break;default:a.userAvatar=a.review.createdBy.avatar?t+a.review.createdBy.avatar:null}a.review.reviewSettings=_.isObjectLike(a.review.reviewSettings)?a.review.reviewSettings:{},a.review.reviewSettings.showRealName=!_.isBoolean(a.review.reviewSettings.showRealName)||a.review.reviewSettings.showRealName},this.$initWatches=function(){t.$watchCollection(function(){return a.review.likes},function(t,e){a.$initLikes(),a.review.thanksNow=!_.isEqual(t,e)&&Boolean(a.review.helpful)})}}t.$inject=["$scope","ReviewsUtils","AppOptions"],angular.module("itaca.components").component("chReview",{transclude:!0,bindings:{review:"<",newLimit:"@?",dateFormat:"@?",hideUser:"<?",hideLikes:"<?",imgBaseUrl:"@?"},controller:t,template:"<div ng-transclude></div>"})}(),function(){"use strict";angular.module("itaca.components").component("chReviewsSummaryDetails",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{progressClass:"@?",size:"@?"},controller:function(){var t=this;this.$onInit=function(){t.progressClass=t.progressClass||"md-primary",t.size=_.includes(["small","big"],_.toLower(t.size))?_.toLower(t.size):"small",t.$initSummary()},this.$initSummary=function(){t.chReviewsSummaryCtrl.summary&&(t.summary=t.chReviewsSummaryCtrl.summary)},this.$onDestroy=function(){}},template:'<div class="flex layout-column layout-padding-sm"><ch-reviews-summary-progress ng-repeat="entry in $ctrl.summary.reviewsScoreMap track by $index" value="entry.key" count="entry.value" size="{{$ctrl.size}}" progress-class="{{$ctrl.progressClass}}"></ch-review-summary-progress></div>'})}(),function(){"use strict";angular.module("itaca.components").component("chReviewsSummaryGar",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{title:"@?",subtitle:"@?",bgClass:"@?"},controller:function(){var t=this;this.$onInit=function(){t.bgClass=t.bgClass||"bg-primary",t.$$hideTitle=_.isBoolean(t.title)&&!t.title,t.$$hideSubtitle=_.isBoolean(t.subtitle)&&!t.subtitle,t.$initSummary()},this.$initSummary=function(){t.chReviewsSummaryCtrl.summary&&(t.summary=t.chReviewsSummaryCtrl.summary)},this.$onDestroy=function(){}},template:'<div ng-if="$ctrl.summary.gar" class="layout-column layout-padding layout-align-center-center no-padding"><div class="border-radius layout-column layout-align-center-center layout-padding {{$ctrl.bgClass}}"><strong class="md-subhead" translate="{{$ctrl.summary.garLabel}}"></strong><span class="md-display-3 no-padding-top">{{$ctrl.summary.gar.toFixed(1)}}</span><small ng-if="!$ctrl.$$hideTitle" class="no-padding-bottom"><span ng-if="$ctrl.title" ng-bind="$ctrl.title"></span><span ng-if="!$ctrl.subtitle" translate="review.score.total"><span></small></div><div ng-if="!$ctrl.$$hideSubtitle"><small><span ng-if="$ctrl.subtitle" ng-bind="$ctrl.subtitle"></span><span ng-if="!$ctrl.subtitle" translate="review.reviews.real" translate-values="{num: $ctrl.summary.totalReviews}"></span></small></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$mdMedia=e,this.$onInit=function(){n.progressClass=n.progressClass||"md-primary",n.size=_.includes(["small","big"],_.toLower(n.size))?_.toLower(n.size):"small","big"==n.size&&(n.$$sizeClass="md-progress-linear-big"),n.$initSummary(),n.$initWatches()},this.$initSummary=function(){n.chReviewsSummaryCtrl.summary&&(n.summary=n.chReviewsSummaryCtrl.summary)},this.$initWatches=function(){t.$watch(function(){return n.count},n.$calculatePercentage)},this.$calculatePercentage=function(){n.$$percentage=Math.round(100*(n.count||0)/(n.summary.totalReviews||1))},this.$onDestroy=function(){}}t.$inject=["$scope","$mdMedia"],angular.module("itaca.components").component("chReviewsSummaryProgress",{require:{chReviewsSummaryCtrl:"^chReviewsSummary"},bindings:{value:"<",count:"<",progressClass:"@?",size:"@?"},controller:t,template:'<div title="{{$ctrl.$$percentage + \'%\'}}" ng-class="$ctrl.$mdMedia(\'gt-sm\')? \'no-padding-bottom\' : \'no-padding-left no-padding-right\'"><small><span ng-switch="$ctrl.value"><span ng-switch-when="4"><span translate="review.score.bad"></span>&nbsp;<em>(4)</em>:</span><span ng-switch-when="5"><span translate="review.score.poor"></span>&nbsp;<em>(5)</em>:</span><span ng-switch-when="6"><span translate="review.score.sufficient"></span>&nbsp;<em>(6)</em>:</span><span ng-switch-when="7"><span translate="review.score.good"></span>&nbsp;<em>(7)</em>:</span><span ng-switch-when="8"><span translate="review.score.very.good"></span>&nbsp;<em>(8)</em>:</span><span ng-switch-when="9"><span translate="review.score.excellent"></span>&nbsp;<em>(9)</em>:</span><span ng-switch-when="10"><span translate="review.score.fabulous"></span>&nbsp;<em>(10)</em>:</span></span></small><div class="layout-row layout-align-start-center"><div flex><md-progress-linear md-mode="determinate" value="{{$ctrl.$$percentage}}" class="{{$ctrl.$$sizeClass}}" ng-class="$ctrl.count > 0 ? $ctrl.progressClass : \'md-accent\'"></md-progress-linear></div><div class="text-right" style="width: 55px"><small>&nbsp;{{$ctrl.$$percentage + \'%\'}}&nbsp;({{$ctrl.count}})</small></div></div></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.$initSummary()},this.$initSummary=function(){if(!e.summary){var n=[];_.forEach(_.rangeRight(4,11),function(t){n.push({key:t,value:0})}),e.summary={totalReviews:0,gar:null,reviewsScoreMap:n}}e.summary.reviewsScoreMap=_.orderBy(e.summary.reviewsScoreMap,["key"],["desc"]),e.summary.garLabel=t.generateScoreLabel(Math.floor(e.summary.gar))},this.$onDestroy=function(){}}t.$inject=["ReviewsUtils"],angular.module("itaca.components").component("chReviewsSummary",{transclude:!0,bindings:{summary:"<"},controller:t,template:"<div ng-transclude></div>"})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.services=_.isArray(e.services)?e.services:e.chRoomCtrl.popularServices}}t.$inject=["$scope"],angular.module("itaca.components").component("chRoomBestServices",{require:{chRoomCtrl:"^chRoom"},bindings:{services:"<?"},controller:t,template:'<div layout layout-wrap layout-align="end start" ng-if="$ctrl.services.length"><span ng-repeat="service in $ctrl.services track by $index"><span><md-icon class="{{service.icon}} layout-padding no-padding-top" ng-class="{\'text-white\': $ctrl.chRoomCtrl.room.gallery.length}"></md-icon><md-tooltip ng-if="service.label || service.labelKey"><span ng-if="service.label" ng-bind="service.label"></span><span ng-if="!service.label" translate="{{service.labelKey}}"></span></md-tooltip></span></span></div>'})}(),function(){"use strict";function t(t){this.$onInit=function(){}}t.$inject=["$scope"],angular.module("itaca.components").component("chRoomContent",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:"<ng-transclude></ng-transclude>",transclude:!0})}(),function(){"use strict";function t(t,e,n,a,i){var l=this;this.$onInit=function(){l.chRoomCtrl.storageUrl||e.get().then(function(t){l.chRoomCtrl.storageUrl=t.url}),n([l.chRoomCtrl.room.roomType.nameKey,"room.category."+l.chRoomCtrl.room.category]).then(function(t){l.title=t[l.chRoomCtrl.room.roomType.nameKey]+" <small>("+t["room.category."+l.chRoomCtrl.room.category].toUpperCase()+")</small>"})},this.openGallery=function(t){n([l.chRoomCtrl.room.roomType.nameKey,"room.category."+l.chRoomCtrl.room.category]).then(function(e){var n=e[l.chRoomCtrl.room.roomType.nameKey]+" <small>("+e["room.category."+l.chRoomCtrl.room.category].toUpperCase()+")</small>";a.showGallery(t,n,_.sortBy(l.chRoomCtrl.room.gallery,[function(t){return Boolean(t.cover)}]),{storageUrl:l.chRoomCtrl.storageUrl})})}}t.$inject=["$scope","AboutStorage","$translate","Dialog","NumberUtils"],angular.module("itaca.components").component("chRoomGallery",{require:{chRoomCtrl:"^chRoom",chRoomHeaderCtrl:"^chRoomHeader"},bindings:{cols:"@",rowspan:"@?",ratio:"@?",maxItems:"<?"},controller:t,template:'<ch-gallery gallery="$ctrl.chRoomCtrl.room.gallery" gallery-title="{{$ctrl.title}}" storage-url="$ctrl.chRoomCtrl.storageUrl" cols="{{$ctrl.cols}}" rowspan="{{$ctrl.rowspan}}" ratio="{{$ctrl.ratio}}" max-items="$ctrl.maxItems"></ch-gallery>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$mdMedia=e,this.$onInit=function(){a.chRoomCtrl.showRoomRates=!1,a.chRoomCtrl.showRoomInfo=!1},this.toggleInfo=function(){a.chRoomCtrl.showRoomInfo=!a.chRoomCtrl.showRoomInfo,a.chRoomCtrl.showRoomRates=!1,a.chRoomCtrl.showRoomInfo||n.scrollToAnchor("av-"+a.chRoomCtrl.$$index)},this.toggleRates=function(){a.chRoomCtrl.showRoomRates=!a.chRoomCtrl.showRoomRates,a.chRoomCtrl.showRoomInfo=!1,a.chRoomCtrl.showRoomRates?n.scrollToAnchor("av-"+a.chRoomCtrl.$$index+"-rates"):n.scrollToAnchor("av-"+a.chRoomCtrl.$$index)}}t.$inject=["$scope","$mdMedia","Navigator"],angular.module("itaca.components").component("chRoomHeader",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:'<div class="ch-room-header-content layout-column"><ng-transclude></ng-transclude><div ng-if="$ctrl.chRoomCtrl.showInfoBtn" class="img-bottom-left-bar layout-row layout-wrap layout-align-center-center"><md-button ng-class="{\'md-icon-button\' : $ctrl.$mdMedia(\'xs\')}" ng-click="$ctrl.toggleInfo()" aria-label="Open room information"><div class="row-mini"><md-icon class="mdi mdi-information-outline md-18 text-white"></md-icon><small class="hide-xs hide-sm" translate="common.information"></small></div></md-button></div><div ng-if="$ctrl.chRoomCtrl.showRateBtn" ng-class="::{\'img-right-bar\': $ctrl.$mdMedia(\'gt-xs\'), \'img-bottom-right-bar\': $ctrl.$mdMedia(\'xs\')}" class="layout-row layout-align-center-center"><md-button ng-click="$ctrl.toggleRates()" aria-label="Open room prices"><div layout class="row-mini text-left layout-padding no-padding"><div layout="column"><small><span class="text-initial" translate="common.from"></span><i ng-if="$ctrl.chRoomCtrl.bestRate.amount.initialAmount > 0 && $ctrl.chRoomCtrl.bestRate.amount.initialAmount > $ctrl.chRoomCtrl.bestRate.amount.finalAmount">&nbsp;<del>{{$ctrl.chRoomCtrl.bestRate.amount.initialAmount|chCurrency}}</del></i></small><span class="md-title"><strong>{{$ctrl.chRoomCtrl.bestRate.amount.finalAmount|chCurrency}}</strong></span><small ng-if="$ctrl.chRoomCtrl.nights > 0" class="text-lowercase"><span translate="common.for"></span>&nbsp;{{$ctrl.chRoomCtrl.nights}}<span ng-show="$ctrl.chRoomCtrl.nights == 1" translate="common.night"></span><span ng-show="$ctrl.chRoomCtrl.nights > 1" translate="common.nights"></span></small></div><div layout="column"><md-icon class="mdi md-48 text-white" ng-class="$ctrl.chRoomCtrl.showRoomRates ? \'mdi-chevron-up\' : \'mdi-chevron-down animated infinite bounce\'"></md-icon></div><md-tooltip hide-xs><span ng-if="!$ctrl.chRoomCtrl.showRoomRates" translate="ratesheet.rates.all.view"></span><span ng-if="$ctrl.chRoomCtrl.showRoomRates" translate="ratesheet.rates.hide"></span></md-tooltip></div></md-button></div></div>',transclude:!0})}(),function(){"use strict";function t(t,e,n,a){var i=this;this.$onInit=function(){i.chRoomCtrl.config=i.chRoomCtrl.config||{},i.chRoomCtrl.storageUrl?i.getRoomCover():e.get().then(function(t){i.chRoomCtrl.storageUrl=t.url,i.getRoomCover()})},this.getRoomCover=function(){i.$findRoomCover()},this.openGallery=function(t){n([i.chRoomCtrl.room.roomType.nameKey,"room.category."+i.chRoomCtrl.room.category]).then(function(e){var n=e[i.chRoomCtrl.room.roomType.nameKey]+" <small>("+e["room.category."+i.chRoomCtrl.room.category].toUpperCase()+")</small>";a.showGallery(t,n,_.sortBy(i.chRoomCtrl.room.gallery,[function(t){return Boolean(t.cover)}]),{storageUrl:i.chRoomCtrl.storageUrl})})},this.$findRoomCover=function(){var t="/resources/public/img/no-gallery-image.png";_.forEach(i.chRoomCtrl.room.gallery,function(e,n,a){0==n&&(t=i.chRoomCtrl.storageUrl+e.path),e.cover&&(t=i.chRoomCtrl.storageUrl+e.path)}),i.roomImage=t}}t.$inject=["$scope","AboutStorage","$translate","Dialog"],angular.module("itaca.components").component("chRoomImage",{require:{chRoomCtrl:"^chRoom",chRoomHeaderCtrl:"^chRoomHeader"},bindings:{},controller:t,template:'<div class="flex layout-column layout-align-center-center"><img ng-src="{{$ctrl.roomImage}}" class="full-width display-block img-size" ng-class="{\'clickable\': $ctrl.chRoomCtrl.room.gallery.length}" ng-click="$ctrl.openGallery($event)" alt="Room cover image" lazy-image default-img-url="\'/resources/public/img/no-gallery-image.png\'"><md-tooltip ng-if="$ctrl.chRoomCtrl.room.gallery.length"><span translate="photo.photos.view.all"></span></md-tooltip></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.chRoomCtrl.showInfoBtn=!0,n.getIncludedServices(),n.getBookableServices(),n.getPopularServices()},this.getPopularServices=function(){var t=!1;n.chRoomCtrl.popularServices=[],_.forEach(n.includedServices,function(e){var a={};"service.type.popular.wifi.room"==e.type.nameKey?(a.type="WIFI",a.icon="mdi mdi-wifi md-24"):"service.type.popular.pet.small"==e.type.nameKey||"service.type.popular.pet.medium"==e.type.nameKey||"service.type.popular.pet.large"==e.type.nameKey||"service.type.popular.pet.disabled"==e.type.nameKey?(a.type="PET",a.icon="mdi mdi-paw md-24"):"service.type.popular.breakfast"==e.type.nameKey||"service.type.popular.breakfast.room"==e.type.nameKey||"service.type.popular.breakfast.continental"==e.type.nameKey?(a.type="BREAKFAST",a.icon="mdi mdi-food-variant md-24"):"service.type.popular.smoking.room"==e.type.nameKey&&(a.type="SMOKING",a.icon="mdi mdi-smoking md-24",t=!0),a.labelKey="service.type.inroom."+a.type,n.chRoomCtrl.popularServices.push(a)}),t||n.chRoomCtrl.popularServices.push({type:"NO-SMOKING",icon:"mdi mdi-smoking-off md-24",labelKey:"service.type.inroom.NO-SMOKING"})},this.getIncludedServices=function(){n.includedServices=_.filter(n.chRoomCtrl.room.services,["bookability","INCLUDED"])},this.getBookableServices=function(){n.bookableServices=_.filter(n.chRoomCtrl.room.services,["bookability","BOOKABLE"])},this.toggleInfo=function(){n.chRoomCtrl.showRoomInfo=!n.chRoomCtrl.showRoomInfo,n.chRoomCtrl.showRoomRates=!1,n.chRoomCtrl.showRoomInfo||e.scrollToAnchor("av-"+n.chRoomCtrl.$$index)}}t.$inject=["$scope","Navigator"],angular.module("itaca.components").component("chRoomInfo",{require:{chRoomCtrl:"^chRoom"},bindings:{availability:"<"},controller:t,transclude:!0,templateUrl:"/tpls/room/room-info.tpl"})}(),function(){"use strict";function t(t){this.$onInit=function(){}}t.$inject=["$scope"],angular.module("itaca.components").component("chRoomPromo",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:'<div class="layout-column layout-margin-sm no-margin-left"><div ng-if="$ctrl.chRoomCtrl.onArrival" class="no-margin-left"><div class="layout-column layout-padding no-padding row-mini bg-success md-subhead"><strong><md-icon class="mdi mdi-thumb-up md-18 text-white"></md-icon><span translate="reservation.pay.at.hotel"></span></strong></div></div><div ng-if="$ctrl.chRoomCtrl.bestPromo" class="no-margin-left"><div class="layout-column layout-padding no-padding row-mini md-subhead" ng-class="{\'bg-success\': $ctrl.chRoomCtrl.bestPromo.onArrival || $ctrl.chRoomCtrl.bestPromo.promotionType == \'EARLY_BOOKING\', \'bg-info\' : !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'STANDARD\',  \'bg-primary-light\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'MINIMUM_STAY\', \'bg-primary\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'BOOK_TODAY\', \'bg-blue-sea\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'LAST_MINUTE\', \'bg-warn\': !$ctrl.chRoomCtrl.bestPromo.onArrival && $ctrl.chRoomCtrl.bestPromo.promotionType == \'LAST_SECOND\'}"> <strong ng-if="!$ctrl.chRoomCtrl.bestPromo.onArrival" ng-switch="$ctrl.chRoomCtrl.bestPromo.promotionType"> <md-icon class="mdi mdi-sale md-10 text-white"></md-icon> <span ng-switch-when="STANDARD"><span translate="common.offer.special"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="MINIMUM_STAY"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{$ctrl.chRoomCtrl.bestPromo.minStay}}"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="BOOK_TODAY"><span translate="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="EARLY_BOOKING"><span translate="promotions.early"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_MINUTE"><span translate="promotions.last.minute"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span><span ng-switch-when="LAST_SECOND"><span translate="promotions.last.second"></span>&nbsp;<span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PERCENTAGE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount}}%</span><span ng-if="$ctrl.chRoomCtrl.bestPromo.discount.type==\'PRICE\'">-{{$ctrl.chRoomCtrl.bestPromo.discount.finalAmount|chCurrency}}</span></span></strong></div></div></div>',transclude:!0})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.chRoomCtrl.showRateBtn=!0,a.getLowestRate(),a.isOnArrival(),a.bestPromotion(),a.hasFreeBeds()},this.hasFreeBeds=function(){_.isEmpty(a.availability.roomType.otherBeds)||(a.availability.hasFreeBeds=_.some(a.availability.roomType.otherBeds,function(t){return t.people.adults?t.adultsPrice<=0:t.people.boys?t.boysPrice<=0:t.people.children?t.childrenPrice<=0:!!t.people.kids&&t.kidsPrice<=0}))},this.bestPromotion=function(){var t=[];_.forEach(a.availability.totalRates,function(e){_.isEmpty(e.promotions)||(t=_.concat(t,e.promotions))}),a.chRoomCtrl.bestPromo=e.bestPromotion(t)},this.getLowestRate=function(){a.chRoomCtrl.bestRate=_.minBy(a.availability.totalRates,function(t){return t.amount.finalAmount})},this.isOnArrival=function(){a.chRoomCtrl.onArrival=a.availability.onArrival}}t.$inject=["$scope","ReservationUtils","DateUtils"],angular.module("itaca.components").component("chRoomRates",{require:{chRoomCtrl:"^chRoom"},bindings:{availability:"="},controller:t,template:'<div id="{{$ctrl.chRoomCtrl.$$index + \'-rates\'}}" ng-show="$ctrl.chRoomCtrl.showRoomRates"  ng-class="{\'animated fadeIn\': $ctrl.chRoomCtrl.showRoomRates}" ng-transclude></div>',transclude:!0})}(),function(){"use strict";function t(t,e){var n=this;this.toggleRates=function(){n.chRoomCtrl.showRoomRates=!n.chRoomCtrl.showRoomRates,n.chRoomCtrl.showRoomInfo=!1,n.chRoomCtrl.showRoomRates?e.scrollToAnchor("av-"+n.chRoomCtrl.$$index+"-rates"):e.scrollToAnchor("av-"+n.chRoomCtrl.$$index)},this.$onInit=function(){}}t.$inject=["$scope","Navigator"],angular.module("itaca.components").component("chRoomTitle",{require:{chRoomCtrl:"^chRoom"},bindings:{},controller:t,template:'<div class="img-title-bar layout-column layout-padding no-padding"><div class="layout-row layout-align-start-center"><div class="flex layout-column clickable" ng-click="$ctrl.toggleRates()" aria-label="show rate"><div class="md-title"><span translate="{{$ctrl.chRoomCtrl.room.roomType.nameKey}}"></span></div><div><small class="text-uppercase" translate="room.category.{{$ctrl.chRoomCtrl.room.category}}"></small></div></div><div class="layout-column no-padding"><div class="layout-row layout-wrap layout-align-end-center"><ch-people-icons people="$ctrl.chRoomCtrl.room.people" max="$ctrl.chRoomCtrl.room.guestsCount.standard" extra-people="$ctrl.chRoomCtrl.room.extraPeople" extra-max="$ctrl.chRoomCtrl.room.guestsCount.extra"></ch-people-icons></div></div></div></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){n.$$index=e.uniqueNumber()}}t.$inject=["$scope","NumberUtils"],angular.module("itaca.components").component("chRoom",{transclude:!0,bindings:{room:"<",storageUrl:"<?",availability:"<?",nights:"<?"},controller:t,template:'<div id="{{\'av-\'+ $ctrl.$$index}}" class="bg-gray-lighter md-margin no-margin-left no-margin-right relative" ng-transclude></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$onInit=function(){a.element=a.element||null,a.offset=isFinite(parseInt(a.offset))?parseInt(a.offset):500,a.ngDisabled=!!_.isBoolean(a.ngDisabled)&&a.ngDisabled,a.showClass=a.showClass||"zoomIn",_.isBoolean(a.showClass)&&(a.showClass=a.showClass?"zoomIn":""),a.hideClass=a.hideClass||"zoomOut",_.isBoolean(a.hideClass)&&(a.hideClass=a.hideClass?"zoomOut":""),a.$initWatches()},this.$postLink=function(){a.ngDisabled?a.$disableShow():a.$enableShow()},this.$enableShow=function(){angular.element(n).on("scroll",a.$toggle)},this.$disableShow=function(){angular.element(n).off("scroll",a.$toggle)},this.$checkVisible=function(){var t=document.querySelector(a.element);if(!t)return!1;var e=t.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(e.bottom<0||e.top-n>=0)},this.$toggle=function(){if(a.ngDisabled)a.$disableShow();else{var i=e.children(),l=angular.element(i.children());l&&l.addClass("animated"),n.pageYOffset>=a.offset&&!a.$checkVisible()?l&&(l.addClass("visible "+a.showClass),l.removeClass(a.hideClass)):l&&(l.removeClass("visible "+a.showClass),l.addClass(a.hideClass)),t.$apply()}},this.$initWatches=function(){t.$watch(function(){return a.ngDisabled},function(t){(t=!!_.isBoolean(t)&&t)?a.$disableShow():a.$enableShow()})},this.$onDestroy=function(){a.$disableShow()}}t.$inject=["$scope","$element","$window"],angular.module("itaca.components").component("chShowOnScroll",{transclude:!0,bindings:{offset:"@?",element:"@?",ngDisabled:"<?",showClass:"@?",hideClass:"@?"},controller:t,template:'<div class="ch-show-on-scroll" ng-transclude></div>'})}(),function(){"use strict";function t(t,e){var n=this;this.$onInit=function(){AppOptions.about&&(n.iconSize=n.iconSize||"md-38",n.mediaUrl=n.mediaUrl||"/resources/img/favicon-96x96.png",n.$$mediaUrl=e.parseUrl(n.mediaUrl).href,n.$$url=e.parseUrl(n.url).href)}}t.$inject=["$scope","UrlUtils"],angular.module("itaca.components").component("chSocialShare",{bindings:{iconSize:"<?",title:"@",text:"@",url:"@",tags:"@",mediaUrl:"@",fbAppId:"@"},controller:t,template:'<div class="layout-padding no-padding-top" ng-cloak><div hide-gt-sm class="layout-align-center-center layout-row layout-wrap"><a class="auto-height button-mini md-button" aria-label="whatsapp"socialsharesocialshare-provider="whatsapp"socialshare-url="{{$ctrl.$$url}}"socialshare-text="{{$ctrl.text}}"><md-icon class="mdi mdi-whatsapp {{$ctrl.iconSize}} material-icons text-whatsapp"></md-icon><div class="font-12 row-mini text-initial text-wrap">Whatsapp</div></a><a class="auto-height button-mini md-button" aria-label="sms"socialsharesocialshare-provider="sms"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"><md-icon class="mdi mdi-message-text {{$ctrl.iconSize}} material-icons text-primary"></md-icon><div class="font-12 row-mini text-initial text-wrap">SMS</div></a><a class="auto-height button-mini md-button" aria-label="facebook messenger"socialsharesocialshare-provider="facebook-messenger"socialshare-url="{{$ctrl.$$url}}"><md-icon class="mdi mdi-facebook-messenger {{$ctrl.iconSize}} material-icons text-messenger"></md-icon><div class="font-12 row-mini text-initial text-wrap">Messenger</div></a></div><md-divider hide-gt-sm></md-divider><div class="layout-align-center-center layout-row layout-wrap"><md-button class="auto-height button-mini" aria-label="email"socialsharesocialshare-provider="email"socialshare-media="{{$ctrl.$$mediaUrl}}"socialshare-subject="{{$ctrl.title}}"socialshare-body="{{$ctrl.text}} - {{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"><md-icon class="mdi mdi-email {{$ctrl.iconSize}} material-icons text-primary"></md-icon><div class="font-12 row-mini text-initial text-wrap">E-mail</div></md-button><md-button class="auto-height button-mini" aria-label="facebook"socialsharesocialshare-provider="facebook"socialshare-via="{{$ctrl.fbAppId}}"socialshare-type="feed"socialshare-media="{{$ctrl.$$mediaUrl}}"socialshare-text="{{$ctrl.title}}"socialshare-url="{{$ctrl.$$url}}"socialshare-redirect-uri="{{$ctrl.$$url}}"socialshare-quote="{{$ctrl.title}}"socialshare-hashtags="{{$ctrl.tags}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-facebook {{$ctrl.iconSize}} material-icons text-fb"></md-icon><div class="font-12 row-mini text-initial text-wrap">Facebook</div></md-button><md-button class="auto-height button-mini" aria-label="twitter"socialsharesocialshare-provider="twitter"socialshare-hashtags="{{$ctrl.tags}}"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-twitter text-twitter {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Twitter</div></md-button><md-button class="auto-height button-mini" aria-label="google plus"socialsharesocialshare-provider="google"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-google-plus text-gplus {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Google +</div></md-button><md-button class="auto-height button-mini" aria-label="telegram"socialsharesocialshare-provider="telegram"socialshare-url="{{$ctrl.$$url}}"socialshare-text="{{$ctrl.text}}"socialshare-trigger="click"><md-icon class="mdi mdi-telegram text-telegram {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Telegram</div></md-button><md-button class="auto-height button-mini" aria-label="skype"socialsharesocialshare-provider="skype"socialshare-url="{{$ctrl.$$url}}"socialshare-text="{{$ctrl.text}}"socialshare-popup-height="800"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-skype text-skype {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Skype</div></md-button><md-button class="auto-height button-mini" aria-label="reddit"socialsharesocialshare-provider="reddit"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-reddit text-reddit {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Reddit</div></md-button><md-button class="auto-height button-mini" aria-label="linkedin"socialsharesocialshare-provider="linkedin"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-description="{{$ctrl.text}}"socialshare-source="{{$ctrl.title}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-linkedin text-linkedin {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Linkedin</div></md-button><md-button class="auto-height button-mini" aria-label="pinterest"socialsharesocialshare-media="{{$ctrl.$$mediaUrl}}"socialshare-provider="pinterest"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-pinterest text-pinterest {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Pinterest</div></md-button><md-button class="auto-height button-mini" aria-label="tumblr"socialsharesocialshare-provider="tumblr"socialshare-type="link"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="540"socialshare-trigger="click"><md-icon class="mdi mdi-tumblr text-tumblr {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Tumblr</div></md-button><md-button class="auto-height button-mini" aria-label="vk"socialsharesocialshare-provider="vk"socialshare-text="{{$ctrl.text}}"socialshare-url="{{$ctrl.$$url}}"socialshare-popup-height="300"socialshare-popup-width="400"socialshare-trigger="click"><md-icon class="mdi mdi-vk text-vk {{$ctrl.iconSize}} material-icons"></md-icon><div class="font-12 row-mini text-initial text-wrap">Vk</div></md-button></div></div>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){t.$watchGroup([function(){return e.start},function(){return e.end}],e.$calculateDiff)},this.$calculateDiff=function(){var t=e.start?moment(e.start):moment(),n=e.start?moment(e.end):moment();e.$$timeLeft=t.to(n)}}t.$inject=["$scope"],angular.module("itaca.components").component("chTimeLeft",{bindings:{start:"<?",end:"<?"},controller:t,template:'<span ng-bind="$ctrl.$$timeLeft"></span>'})}(),function(){"use strict";function t(t,e,n){t.$mdMedia=n;var a=this;this.$onInit=function(){a.event={date:a.date,title:a.eventTitle,iconBg:a.iconBg,iconClass:a.iconClass,dateFormat:a.dateFormat,animatedClass:a.chTimelineCtrl.animatedClass},a.chTimelineCtrl.addEvent(a.event),a.titleQuote=!_.isBoolean(a.titleQuote)||a.titleQuote,e.addClass("ch-timeline-event flex-xs-100 relative layout-column"),e.addClass("CENTER"==a.event.align?"flex-50":"flex-100"),a.registerWatches()},this.registerWatches=function(){t.$watch(function(){return a.eventTitle},function(t,e){a.event.title=t}),t.$watch(function(){return a.date},function(t,e){a.event.date=t})},this.$onDestroy=function(){a.chTimelineCtrl.removeEvent(a.event)}}t.$inject=["$scope","$element","$mdMedia"],angular.module("itaca.components").component("chTimelineEvent",{require:{chTimelineCtrl:"^chTimeline"},transclude:!0,bindings:{date:"<",eventTitle:"@",titleQuote:"<?",iconBg:"@",iconClass:"@",dateFormat:"@",isNew:"=?",ngDisabled:"=?"},controller:t,template:'<div class="md-padding relative" ch-animated="{{$ctrl.event.animatedClass}}" ch-animated-delay="{{$ctrl.event.animatedDelay}}"><div class="ch-timeline-event-icon {{$ctrl.event.iconBg}}"><md-icon ng-if="$ctrl.event.iconClass" class="material-icons {{$ctrl.event.iconClass}}"></md-icon><div ng-if="!$ctrl.event.iconClass" class="md-subhead ng-scope row-mini"><div class="text-bold">{{$ctrl.event.date|utcDate:\'d\'}}</div><div class="text-small">{{$ctrl.event.date|utcDate:\'MMM\'}}</div></div></div><div class="ch-timeline-event-content layout-padding no-padding bg-white text-left md-whiteframe-1dp"  ng-class="{\'locked\': $ctrl.ngDisabled}"><div ng-if="$ctrl.event.title || $ctrl.event.dateFormat" class="layout-row layout-wrap layout-padding layout-align-start-center"><div class="md-subhead text-left" ng-class="!$mdMedia(\'gt-sm\') ? \'flex-100\': \'flex\'"><span ng-if="$ctrl.isNew"><md-icon class="mdi mdi-new-box text-info material-icons"></md-icon></span><strong ng-if="$ctrl.event.title"><em><span ng-if="$ctrl.titleQuote">&ldquo;</span><span>{{$ctrl.event.title}}</span><span ng-if="$ctrl.titleQuote">&bdquo;</span></em></strong></div><div class="text-gray-light text-small">{{$ctrl.event.date|utcDate:$ctrl.event.dateFormat}}</div></div><div class="no-padding" ng-transclude></div></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.events=[],this.bgArray=["bg-success text-white","bg-info text-white","bg-warn text-white","bg-danger text-white","bg-primary text-white","bg-primary-light text-white","bg-blue-sea text-white","bg-gray-light text-white","bg-gray-lighter only-border text-gray-light"],this.$onInit=function(){a.hideIcon=!!_.isBoolean(a.hideIcon)&&a.hideIcon,a.randomBg=!_.isBoolean(a.randomBg)||a.randomBg,a.manageAlign(),a.registerWatches()},this.manageAlign=function(){a.align=_.includes(["LEFT","CENTER","RIGHT"],a.align)?a.align:"CENTER",a.align=e("gt-xs")?a.align:"RIGHT",a.alignClass="ch-timeline-"+a.align.toLowerCase(),a.animatedClass="RIGHT"==a.align?"slideInRight":"LEFT"==a.align?"slideInLeft":"slideInUp"},this.manageIconBgColor=function(t){_.isNil(t.iconBg)&&a.randomBg&&(a.bgArrayLeft=_.isEmpty(a.bgArrayLeft)?angular.copy(a.bgArray):a.bgArrayLeft,t.iconBg=_.sample(a.bgArrayLeft),_.pull(a.bgArrayLeft,t.iconBg),a.lastIconBg||a.lastIconBg==t.iconBg?a.manageIconBgColor(t):a.lastIconBg=t.iconBg)},this.addEvent=function(t){t.align=a.align,a.manageIconBgColor(t),t.index=a.events.push(t)-1,t.animatedDelay=t.index>=0&&t.index<=10?100*t.index:1e3,a.barClass=n.isOdd(a.events.length)?"ch-timeline-odd":"ch-timeline-even"},this.removeEvent=function(t){_.pull(a.events,t),a.barClass=n.isOdd(a.events.length)?"ch-timeline-odd":"ch-timeline-even"},this.registerWatches=function(){t.$watch(function(){return a.hideIcon},function(t,e){a.hideIcon=!!_.isBoolean(t)&&t}),t.$watch(function(){return a.align},function(t,e){a.manageAlign(),_.forEach(a.events,function(e){e.align=t})})}}t.$inject=["$scope","$mdMedia","NumberUtils"],angular.module("itaca.components").component("chTimeline",{transclude:!0,bindings:{align:"@",randomBg:"<?",hideIcon:"<?"},controller:t,template:'<div class="ch-timeline {{$ctrl.alignClass}} {{$ctrl.barClass}} {{$ctrl.hideIcon ? \'no-icon\' : null}}"><div class="layout-row layout-wrap" ng-transclude></div><bar></bar></div>'})}(),function(){"use strict";function t(t,e){var n=this;n.$onInit=function(){t.$watchGroup([function(){return n.text},function(){return n.maxLength}],n.$truncate)},n.$truncate=function(){n.$$showTooltip=!n.hideTooltip&&n.text.length>n.maxLength,n.$$truncated=e(n.text,n.maxLength,n.suffix)}}t.$inject=["$scope","truncateFilter"],angular.module("itaca.components").component("chTruncate",{bindings:{text:"@",maxLength:"<?",suffix:"@",hideTooltip:"<?"},controller:t,template:'<span><span>{{$ctrl.$$truncated}}</span><md-tooltip ng-if="$ctrl.$$showTooltip">{{$ctrl.text}}</md-tooltip></span>'})}(),function(){"use strict";function t(t){var e=this;this.$onInit=function(){e.$initWatches()},this.$prepareText=function(){e.$$textArr=_.split(e.text,"")},this.$initWatches=function(){t.$watch(function(){return e.text},ctr.$prepareText)}}t.$inject=["$scope"],angular.module("itaca.components").component("chVerticalText",{bindings:{text:"<"},controller:t,template:'<div><p ng-repeat="char in $ctrl.$$textArr">{{char}}</p></div>'})}(),function(){"use strict";angular.module("itaca.components").factory("WeatherUtils",function(){var t={};return t.getInfo=function(t){if(!t)return null;var e,n="mdi-minus",a="n"==t.slice(-1);switch(t){case"01d":e="sunny",n="sunny";break;case"01n":e="starry",n="starry";break;case"02d":case"02n":e="partly.cloudy",n="cloudy";break;case"03d":case"03n":case"04d":case"04n":e="cloudy",n="cloudy";break;case"09d":case"09n":e="drizzle",n="rainy";break;case"010d":case"010n":e="rain",n="rainy";break;case"011d":case"011n":e="thunderstorm",n="stormy";break;case"013d":case"013n":e="snowy",n="snowy";break;case"050d":case"050n":default:e="variable",n="material-icons md-160 mdi mdi-$$weather-windy text-white"}return{icon:n,label:e,isNight:a}},t.getLabel=function(t){if(!t)return null;var e="";switch(t){case"01d":e="sunny";break;case"01n":e="starry";break;case"02d":case"02n":e="partly.cloudy";break;case"03d":case"03n":case"04d":case"04n":e="cloudy";break;case"09d":case"09n":e="drizzle";break;case"010d":case"010n":e="rain";break;case"011d":case"011n":e="thunderstorm";break;case"013d":case"013n":e="snowy";break;case"050d":case"050n":default:e="variable"}return e},t.getIconClass=function(t){if(!t)return null;var e="mdi-minus";switch(t){case"01d":e="sunny";break;case"01n":e="starry";break;case"02d":case"02n":e="cloudy";break;case"03d":case"03n":case"04d":case"04n":e="cloudy";break;case"09d":case"09n":e="rainy";break;case"010d":case"010n":e="rainy";break;case"011d":case"011n":e="stormy";break;case"013d":case"013n":e="snowy";break;case"050d":case"050n":default:e="material-icons md-160 mdi mdi-$$weather-windy text-white"}return e},t.isNight=function(t){return t?"n"==t.slice(-1):null},t})}(),function(){"use strict";function t(t,e,n,a,i,l){var s=this;this.$onInit=function(){s.$reset(),s.$getWeather()},this.$reset=function(){s.$$weather={icon:"mdi mdi-minus material-icons md-164",temp:"-"}},this.$getWeather=function(){a.get(s.city,s.country).then(function(t){_.isNil(t.data)?e.error("Error getting weather"):(s.$$weather.temp=l.fixedDecimals(t.data.main.temp,1),s.$getIcon(t.data.weather[0].icon))},function(t){e.error(t),s.$reset()})},this.$getInfo=function(t){_.assign(s.$$weather,i.getInfo(t))}}t.$inject=["$scope","$log","$http","Weather","WeatherUtils","NumberUtils"],angular.module("itaca.components").component("chWeather",{bindings:{city:"@",country:"@"},controller:t,template:'<div><div class="relative overflow-hidden weather-container"><i ng-if="$ctrl.$$weather.label == "partly.cloudy"" ng-class="$ctrl.$$weather.isNight ? "starry" : "sunny"" class="cloud"></i><i class="{{$ctrl.$$weather.icon}}"></i></div><div class="text-white"><span ng-if="$$weather.label" translate="weather.{{$ctrl.$$weather.label}}"></span></div><div class="md-headline text-bold text-white"><span>{{::$ctrl.city}}</span></div><div class="md-body-2 text-white text-uppercase"><span>{{::$ctrl.country}}</span></div><div><span class="md-headline text-bold text-white">{{$$weather.temp}}</span><mdi-icon class="mdi mdi-temperature-celsius material-icons text-white"></md-icon></div></div>'})}(),function(){"use strict";function t(t,e,n){var a=this;this.$$appId=n,this.API=t("https://api.openweathermap.org/data/2.5/$$weather"),this.get=function(t,n){var i=e.defer();if(!t)return i.reject("City cannot be null"),i.promise;var l={appId:a.appId,q:t+","+n,mode:"json",units:"metric"};return a.API.get(l,function(t){i.resolve(t.data)},function(e){i.reject(e.data&&e.data.message?e.data.message:"Error getting weather for "+t+", "+n)}),i.promise}}angular.module("itaca.components").provider("Weather",function(){var e="";this.setAppId=function(t){e=t},this.$get=["$resource","$q",function(e,n){return new t(e,n,appId)}]})}(),angular.module("itaca.components").run(["$templateCache",function(t){"use strict";t.put("/tpls/room/rate.tpl",'<div ng-switch="$ctrl.rate.type"><md-list-item class="no-padding secondary-button-padding"><div class="md-list-item-text no-padding" layout-xs="column" layout-sm="column" layout-gt-sm="row" layout-padding flex><div flex layout layout-wrap layout-align="center center" ng-class="{\'no-padding-bottom\': !$mdMedia(\'gt-sm\')}"><md-button class="md-fab md-micro hide show-gt-sm" ng-click="$ctrl.rate.showInfo = !$ctrl.rate.showInfo" aria-label="Show rate info"><md-icon class="mdi md-18 text-white" ng-class="{\'mdi-chevron-down\': !$ctrl.rate..showInfo, \'mdi-chevron-up\': $ctrl.rate.showInfo}"></md-icon></md-button><div class="clickable flex layout" layout-xs="column" ng-class="::{\'layout-padding\': $mdMedia(\'gt-xs\')}" ng-click="$ctrl.rate.showInfo = !$ctrl.rate.showInfo" aria-label="Rate info"><div layout="column" layout-align="center center"><div ng-class="{\'text-warn\': $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \'text-success\': $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \n\t\t\t\t\t\t\t\'text-blue-sea\': $ctrl.rate.type == \'NOT_REFUNDABLE\'}" class="layout-align-start-center layout-column row-mini layout-padding"><small class="no-padding" ng-if="nights != 1"><span translate="reservation.price.for.nights" translate-values="::{count: nights}"></span></small> <small class="no-padding" ng-if="nights == 1"><span translate="reservation.price.for.one.night"></span></small> <small class="no-padding" ng-if="$ctrl.rate.amount.initialAmount > 0 && $ctrl.rate.amount.initialAmount > $ctrl.rate.amount.finalAmount"><span class="text-initial" translate="common.from"></span> <i><del>{{$ctrl.rate.amount.initialAmount|chCurrency}}</del></i> </small><span class="no-padding md-title" ng-switch-when="STANDARD"><strong>{{$ctrl.rate.amount.finalAmount|chCurrency}}</strong></span> <span class="no-padding md-title" ng-switch-when="NOT_REFUNDABLE"><strong>{{$ctrl.rate.amount.finalAmount|chCurrency}}</strong></span></div></div><div layout="column" layout-align="center" class="row-mini g"><div layout layout-align="center center" layout-align-gt-sm="start end"><span ng-switch-when="STANDARD" layout><span ng-if="$ctrl.rate.cancellationPolicy.flexible" class="row-mini text-warn" translate="reservation.rate.flexible"></span> <span ng-if="!$ctrl.rate.cancellationPolicy.flexible" class="row-mini text-success" translate="reservation.cancellation.free"></span> </span><span ng-switch-when="NOT_REFUNDABLE" class="row-mini text-blue-sea" translate="ratesheet.rate.type.notRefundable.abbr"></span> <span><md-icon class="mdi mdi-information-outline md-14 material-icons" ng-class="{\'text-warn\': $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \n\t\t\t\t\t\t\t\t\'text-success\': $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \'text-blue-sea\': $ctrl.rate.type == \'NOT_REFUNDABLE\'}" aria-hidden="true"></md-icon></span></div><div layout layout-align="center center" layout-align-gt-sm="start end" class="text-gray-light"><small ng-switch-when="STANDARD" layout><span ng-if="$ctrl.rate.cancellationPolicy.flexible"><span translate="reservation.rate.flexible.info.label"></span> </span><span ng-if="!$ctrl.rate.cancellationPolicy.flexible"><span translate="reservation.rate.free.info.label"></span> </span></small><small ng-switch-when="NOT_REFUNDABLE"><span translate="reservation.rate.not.refundable.info.label"></span></small></div><div ng-if="$ctrl.$$promotion" ng-switch="$ctrl.$$promotion.promotionType" class="layout-gt-sm-row layout-wrap" ng-class="{\'text-center\': !$mdMedia(\'gt-sm\')}"><span ng-switch-when="STANDARD" class="label flex-xs flex-sm label-inline-block text-wrap bg-info"><ch-truncate text="{{$ctrl.$$promotion.name[Lang.current.iso]}}" max-length="20" suffix="..."></ch-truncate>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="MINIMUM_STAY" class="label flex-xs flex-sm label-inline-block text-wrap bg-primary-light"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{$ctrl.$$promotion.minStay}}"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="BOOK_TODAY" class="label flex-xs flex-sm label-inline-block text-wrap bg-primary"><span translate="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="EARLY_BOOKING" class="label flex-xs flex-sm label-inline-block text-wrap bg-success"><span translate="promotions.early"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_MINUTE" class="label flex-xs flex-sm label-inline-block text-wrap bg-blue-sea"><span translate="promotions.last.minute"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_SECOND" class="label flex-xs flex-sm label-inline-block text-wrap bg-warn"><span translate="promotions.last.second"></span>&nbsp;<span ng-if="$ctrl.$$promotion.discount.type==\'PERCENTAGE\'">-{{$ctrl.$$promotion.discount.finalAmount}}%</span><span ng-if="$ctrl.$$promotion.discount.type==\'PRICE\'">-{{$ctrl.$$promotion.discount.finalAmount|chCurrency}}</span></span></div><div ng-if="hotel.paymentSettings.onArrival || ($ctrl.rate.type == \'STANDARD\' && ($ctrl.$$promotion.onArrival || !$ctrl.rate.cancellationPolicy.flexible))" class="md-margin no-margin-left no-margin-top" ng-class="{\'text-center\': !$mdMedia(\'gt-sm\')}"><span class="label label-sm bg-success"><span translate="reservation.no.advance.payment"></span></span></div></div></div></div><div layout layout-align="end center" ng-class="{\'no-padding-top\': !$mdMedia(\'gt-sm\')}"><div ng-if="!$ctrl.rate.selected || $ctrl.rate.selected <= 0" class="layout-column flex"><md-button class="border-radius only-border" ng-class="{\'border-warn text-warn\': reservation.roomsCounter.actual > 0 && $ctrl.availability.counter.actual > 0 && $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \'border-success text-success\': reservation.roomsCounter.actual > 0 && $ctrl.availability.counter.actual > 0 && $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \n\t\t\t\t\t\t\t\'border-blue-sea text-blue-sea\': reservation.roomsCounter.actual > 0 && $ctrl.availability.counter.actual > 0 && $ctrl.rate.type == \'NOT_REFUNDABLE\', \'text-gray-medium\': reservation.roomsCounter.actual <= 0 || $ctrl.availability.counter.actual <= 0}" aria-label="Add room" ng-disabled="reservation.roomsCounter.actual <= 0 || $ctrl.availability.counter.actual <= 0" ng-click="addRoom()"><span translate="common.select"></span></md-button></div><div ng-if="$ctrl.rate.selected && $ctrl.rate.selected > 0" flex><div class="layout-align-center-center layout-align-gt-sm-end-center layout-row"><small class="text-bold text-gray-light" ng-if="reservation.roomsCounter.actual > 0 && $ctrl.availability.counter.actual > 0" translate="room.add.other.one"></small> <small class="text-bold text-success text-center" ng-class="{\'text-warn\': $ctrl.rate.type == \'STANDARD\' && $ctrl.rate.cancellationPolicy.flexible, \'text-success\': $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible, \n\t\t\t  \t\t\t\t\'text-blue-sea\': $ctrl.rate.type == \'NOT_REFUNDABLE\'}" ng-if="reservation.roomsCounter.actual <= 0 || $ctrl.availability.counter.actual <= 0" translate="room.last.rate.selected"></small></div><div class="layout-align-center-center layout-align-gt-sm-end-center layout-row"><ch-counter ng-model="$ctrl.rate.selected" min="0" btn-class="md-icon-button only-border" btn-active-class="{{$ctrl.rate.type == \'STANDARD\' ? $ctrl.rate.cancellationPolicy.flexible ? \'border-warn\' : \'border-success\' : \'border-blue-sea\'}}" icon-active-class="{{$ctrl.rate.type == \'STANDARD\' ? $ctrl.rate.cancellationPolicy.flexible ? \'text-warn\' : \'text-success\' : \'text-blue-sea\'}}" plus-disabled="reservation.roomsCounter.actual <= 0 || $ctrl.availability.counter.actual <= 0" on-plus="addRoom()" on-minus="removeRoomRate()"></ch-counter></div></div></div></div></md-list-item><div class="layout-row layout-wrap md-padding no-padding-top text-center" ng-class="{\'no-padding-bottom\': !$first}"><span ng-if="$ctrl.rate.bestHotelRate" class="text-success md-subhead"><md-icon class="mdi mdi-check-all text-success animated infinite tada"></md-icon><strong translate="reservation.bestHotelRate.description"></strong> </span><span ng-if="!$ctrl.rate.bestHotelRate && $ctrl.$$promotion" ng-switch="$ctrl.$$promotion.promotionType" class="layout-row layout-wrap"><span ng-switch-when="STANDARD|EARLY_BOOKING|MINIMUM_STAY" class="text-wrap bg-info" ng-class="{\'bg-info\': $ctrl.$$promotion.promotionType == \'STANDARD\', \'bg-primary-light\': $ctrl.$$promotion.promotionType == \'EARLY_BOOKING\',  \'bg-success\': $ctrl.$$promotion.promotionType == \'MINIMUM_STAY\'}"><md-icon class="mdi mdi-alarm-check animated infinite tada" ng-class="{\'bg-info\': $ctrl.$$promotion.promotionType == \'STANDARD\', \'bg-primary-light\': $ctrl.$$promotion.promotionType == \'EARLY_BOOKING\',  \'bg-success\': $ctrl.$$promotion.promotionType == \'MINIMUM_STAY\'}"></md-icon><span translate="reservation.promotion.STANDARD.description"></span> </span><span ng-switch-when="BOOK_TODAY" class="text-wrap text-primary"><md-icon class="mdi mdi-alarm-check text-primary animated infinite tada"></md-icon><span translate="reservation.promotion.BOOK_TODAY.description"></span> </span><span ng-switch-when="LAST_MINUTE" class="text-wrap text-blue-sea"><md-icon class="mdi mdi-alarm-check text-blue-sea animated infinite tada"></md-icon><span translate="reservation.promotion.LAST_MINUTE.description"></span> </span><span ng-switch-when="LAST_SECOND" class="text-wrap text-warn"><md-icon class="mdi mdi-alarm-check text-warn animated infinite tada"></md-icon><span translate="reservation.promotion.LAST_SECOND.description"></span> </span></span><span ng-if="!$ctrl.rate.bestHotelRate && !$ctrl.$$promotion && $ctrl.rate.type == \'STANDARD\' && !$ctrl.rate.cancellationPolicy.flexible" class="text-success"><md-icon class="mdi mdi-heart-pulse text-success animated infinite tada"></md-icon><span translate="reservation.rate.free.text.description"></span> </span><span ng-if="!$ctrl.rate.bestHotelRate && !$ctrl.$$promotion && $ctrl.rate.type == \'NOT_REFUNDABLE\' && $ctrl.availability.totalRates[1].amount.initialAmount > $ctrl.availability.totalRates[0].amount.initialAmount" class="text-blue-sea"><md-icon class="mdi mdi-auto-fix text-blue-sea animated infinite tada"></md-icon><span translate="reservation.rate.not.refundable.text.description" translate-values="{price: \'{{$ctrl.availability.totalRates[1].amount.initialAmount - $ctrl.availability.totalRates[0].amount.initialAmount|chCurrency}}\' }"></span></span></div><div ng-show="$ctrl.rate.showInfo" layout="column" layout-padding ng-class="{\'animated fadeIn\': $ctrl.rate.showInfo}" class="text-gray-light"><div><h4 class="md-subhead no-margin-bottom"><strong translate="common.payment"></strong></h4><div th:replace="public/partials/hotel/common/policy/rate-payment-policy"></div><div layout="column" class="md-padding no-padding-left no-padding-top"><span><span ng-if="nights == 1" translate="reservation.rates.info.night"></span> <span ng-if="nights > 1" translate="reservation.rates.info.nights" translate-value-count="{{nights}}"></span> </span><span ng-if="hotel.vatTax"><strong><span translate="common.included"></span>:</strong>&nbsp;{{::hotel.vatTax.finalAmount}}%&nbsp;<span translate="billing.vat.tax"></span> </span><span ng-if="hotel.cityTax && hotel.cityTax.finalAmount"><strong><span translate="common.included.not"></span>:</strong>&nbsp;{{hotel.cityTax.finalAmount|chCurrency:hotel.currency}}&nbsp;<span translate="reservation.cityTax.description"></span></span></div><div ng-if="$ctrl.rate.type == \'STANDARD\' && $ctrl.$$promotion.paymentMethod[0].onArrival" class="bg-success text-white layout-margin"><md-icon class="mdi mdi-hospital-building md-18 text-white"></md-icon><span translate="reservation.policy.payment.onArrival"></span></div><div ng-if="hotel.paymentSettings" layout="column" class="md-padding no-padding-left"><strong><span translate="payment.methods.accepted"></span>:</strong> <span ng-if="$ctrl.$$promotion.paymentMethod.length" ng-repeat="paymentMethod in $ctrl.$$promotion.paymentMethod track by $index" ng-switch="paymentMethod.type" class="layout-margin ng-scope layout-wrap layout-row layout-align-start-center"><span ng-switch-when="PAYPAL" ng-if="hotel.paymentSettings.paypal" class="no-margin-left"><md-icon class="pf pf-paypal md-18"></md-icon><md-tooltip><span translate="payment.type.PAYPAL"></span></md-tooltip></span><span ng-switch-when="CREDIT_CARD" ng-if="hotel.paymentSettings.creditCards.length"><span ng-repeat="type in hotel.paymentSettings.creditCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA"></span></md-tooltip></span><span ng-switch-when="MASTERCARD" class="layout-margin no-margin-left"><md-icon class="pf pf-mastercard md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MASTERCARD"></span></md-tooltip></span><span ng-switch-when="AMEX" class="layout-margin no-margin-left"><md-icon class="pf pf-american-express md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.AMEX"></span></md-tooltip></span><span ng-switch-when="BIT_COIN" class="layout-margin no-margin-left"><md-icon class="pf pf-bitcoin md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BIT_COIN"></span></md-tooltip></span><span ng-switch-when="CARTA_SI" class="layout-margin no-margin-left"><md-icon class="pf pf-carta-si md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CARTA_SI"></span></md-tooltip></span><span ng-switch-when="DINERS_CLUB" class="layout-margin no-margin-left"><md-icon class="pf pf-diners md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DINERS_CLUB"></span></md-tooltip></span><span ng-switch-when="DISCOVER" class="layout-margin no-margin-left"><md-icon class="pf pf-discover md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DISCOVER"></span></md-tooltip></span><span ng-switch-when="JCB" class="layout-margin no-margin-left"><md-icon class="pf pf-jcb md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.JCB"></span></md-tooltip></span><span ng-switch-when="UNION_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-unionpay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.UNION_PAY"></span></md-tooltip></span></span></span><span ng-switch-when="OTHER_CARD" ng-if="hotel.paymentSettings.otherCards.length"><span ng-repeat="type in hotel.paymentSettings.otherCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA_ELECTRON" class="layout-margin no-margin-left"><md-icon class="pf pf-visa-electron md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA_ELECTRON"></span></md-tooltip></span><span ng-switch-when="V_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.V_PAY"></span></md-tooltip></span><span ng-switch-when="MAESTRO" class="layout-margin no-margin-left"><md-icon class="pf pf-maestro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MAESTRO"></span></md-tooltip></span><span ng-switch-when="CIRRUS" class="layout-margin no-margin-left"><md-icon class="pf pf-cirrus md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CIRRUS"></span></md-tooltip></span><span ng-switch-when="POSTEPAY" class="layout-margin no-margin-left"><md-icon class="pf pf-postepay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.POSTEPAY"></span></md-tooltip></span><span ng-switch-when="APPLE_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-apple-pay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.APPLE_PAY"></span></md-tooltip></span><span ng-switch-when="PAGSEGURO" class="layout-margin no-margin-left"><md-icon class="pf pf-pagseguro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.PAGSEGURO"></span></md-tooltip></span><span ng-switch-when="BANCONTACT" class="layout-margin no-margin-left"><md-icon class="pf pf-bancontact-mister-cash md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCONTACT"></span></md-tooltip></span><span ng-switch-when="BANCOMAT" class="layout-margin no-margin-left"><md-icon class="pf pf-card md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCOMAT"></span></md-tooltip></span></span></span></span><span ng-if="!$ctrl.$$promotion.paymentMethod" class="layout-margin ng-scope layout-wrap layout-row layout-align-start-center"><span ng-if="hotel.paymentSettings.paypal" class="layout-margin no-margin-left"><md-icon class="pf pf-paypal md-18"></md-icon><md-tooltip><span translate="payment.type.PAYPAL"></span></md-tooltip></span><span ng-if="hotel.paymentSettings.creditCards.length" class="no-margin"><span ng-repeat="type in hotel.paymentSettings.creditCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA"></span></md-tooltip></span><span ng-switch-when="MASTERCARD" class="layout-margin no-margin-left"><md-icon class="pf pf-mastercard md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MASTERCARD"></span></md-tooltip></span><span ng-switch-when="AMEX" class="layout-margin no-margin-left"><md-icon class="pf pf-american-express md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.AMEX"></span></md-tooltip></span><span ng-switch-when="BIT_COIN" class="layout-margin no-margin-left"><md-icon class="pf pf-bitcoin md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BIT_COIN"></span></md-tooltip></span><span ng-switch-when="CARTA_SI" class="layout-margin no-margin-left"><md-icon class="pf pf-carta-si md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CARTA_SI"></span></md-tooltip></span><span ng-switch-when="DINERS_CLUB" class="layout-margin no-margin-left"><md-icon class="pf pf-diners md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DINERS_CLUB"></span></md-tooltip></span><span ng-switch-when="DISCOVER" class="layout-margin no-margin-left"><md-icon class="pf pf-discover md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.DISCOVER"></span></md-tooltip></span><span ng-switch-when="JCB" class="layout-margin no-margin-left"><md-icon class="pf pf-jcb md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.JCB"></span></md-tooltip></span><span ng-switch-when="UNION_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-unionpay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.UNION_PAY"></span></md-tooltip></span></span></span><span ng-if="hotel.paymentSettings.otherCards.length" class="no-margin"><span ng-repeat="type in hotel.paymentSettings.otherCards track by $index" ng-switch="type.circuit"><span ng-switch-when="VISA_ELECTRON" class="layout-margin no-margin-left"><md-icon class="pf pf-visa-electron md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.VISA_ELECTRON"></span></md-tooltip></span><span ng-switch-when="V_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-visa md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.V_PAY"></span></md-tooltip></span><span ng-switch-when="MAESTRO" class="layout-margin no-margin-left"><md-icon class="pf pf-maestro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.MAESTRO"></span></md-tooltip></span><span ng-switch-when="CIRRUS" class="layout-margin no-margin-left"><md-icon class="pf pf-cirrus md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.CIRRUS"></span></md-tooltip></span><span ng-switch-when="POSTEPAY" class="layout-margin no-margin-left"><md-icon class="pf pf-postepay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.POSTEPAY"></span></md-tooltip></span><span ng-switch-when="APPLE_PAY" class="layout-margin no-margin-left"><md-icon class="pf pf-apple-pay md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.APPLE_PAY"></span></md-tooltip></span><span ng-switch-when="PAGSEGURO" class="layout-margin no-margin-left"><md-icon class="pf pf-pagseguro md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.PAGSEGURO"></span></md-tooltip></span><span ng-switch-when="BANCONTACT" class="layout-margin no-margin-left"><md-icon class="pf pf-bancontact-mister-cash md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCONTACT"></span></md-tooltip></span><span ng-switch-when="BANCOMAT" class="layout-margin no-margin-left"><md-icon class="pf pf-card md-18"></md-icon><md-tooltip><span translate="payment.type.carrier.BANCOMAT"></span></md-tooltip></span></span></span></span></div></div><div><h4 class="md-subhead no-margin-bottom no-margin-top"><strong translate="reservation.rates.daily.details"></strong></h4><div layout layout-wrap><div ng-repeat="dailyRate in $ctrl.rate.dailyRates track by $index" layout="column" layout-padding layout-align="start center"><strong class="no-padding-bottom">{{dailyRate.date|date:"shortDate"}}</strong><div class="no-padding-bottom row-mini" layout="column" layout-align="center center"><div ng-if="dailyRate.promotion" ng-switch="dailyRate.promotion.promotionType"><span ng-switch-when="STANDARD" class="label label-xs bg-info"><ch-truncate text="{{dailyRate.promotion.name[Lang.current.iso]}}" max-length="20" suffix="..."></ch-truncate>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="MINIMUM_STAY" class="label label-xs bg-primary-light"><span translate="promotions.promotion.label.minstay.nigths" translate-value-count="{{promotion.minStay}}"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="BOOK_TODAY" class="label label-xs bg-primary"><span translate="promotions.promotion.label.only.today"></span>!&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="EARLY_BOOKING" class="label label-xs bg-success"><span translate="promotions.early"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_MINUTE" class="label label-xs bg-blue-sea"><span translate="promotions.last.minute"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span> <span ng-switch-when="LAST_SECOND" class="label label-xs bg-warn"><span translate="promotions.last.second"></span>&nbsp;<span ng-if="dailyRate.promotion.discount.type==\'PERCENTAGE\'">-{{dailyRate.promotion.discount.finalAmount}}%</span><span ng-if="dailyRate.promotion.discount.type==\'PRICE\'">-{{dailyRate.promotion.discount.finalAmount|chCurrency}}</span></span></div><small class="text-gray-light" ng-if="dailyRate.amount.initialAmount > 0 && dailyRate.amount.initialAmount > dailyRate.amount.finalAmount"><i><del>{{dailyRate.amount.initialAmount|chCurrency}}</del></i></small></div><div>{{dailyRate.amount.finalAmount|chCurrency}}</div></div></div></div><div class="no-padding"><h4 class="layout-padding md-subhead no-margin no-padding-bottom no-padding-left"><strong translate="common.cancellation"></strong></h4><div th:replace="public/partials/hotel/common/policy/rate-policy"></div></div><md-button class="hide-gt-sm text-gray-light button-mini" ng-click="toggleInfo()" aria-label="hide info"><md-icon class="mdi mdi-chevron-up text-gray-light md-18"></md-icon><small translate="common.hide"></small></md-button></div><md-divider ng-if="!$last"></md-divider></div>'),t.put("/tpls/room/rates.tpl",'<div id="{{\'ch-room-\' + $ctrl.chRoomCtrl.$$index + \'-rates\'}}" ng-show="$ctrl.chRoomCtrl.showRates" ng-class="{\'animated fadeIn\': $ctrl.chRoomCtrl.showRates}"><div class="no-margin" layout="column"><md-list><ch-room-rate ng-repeat="rate in $ctrl.availability.totalRates track by $index" rate="rate"></ch-room-rate></md-list></div></div>'),t.put("/tpls/room/room-info.tpl",'<div id="{{\'ch-room-\' + $ctrl.chRoomCtrl.$$index + \'-info\'}}" ng-show="$ctrl.chRoomCtrl.$$showInfo" ng-class="{\'animated fadeIn\': $ctrl.chRoomCtrl.$$showInfo}"><div class="md-padding no-padding-bottom text-gray-light"><div ng-show="$ctrl.chRoomCtrl.room.maxOtherBeds > 0" class="md-padding no-padding-bottom text-blue-sea text-center"><md-icon class="mdi mdi-hotel animated tada infinite text-blue-sea md-24"></md-icon>&nbsp; <span translate="reservation.room.extra.beds.bookable"></span> <span ng-if="$ctrl.chRoomCtrl.availability.$$hasFreeBeds" class="text-uppercase" translate="common.for.free"></span> <span ng-if="!$ctrl.chRoomCtrl.availability.$$hasFreeBeds" class="text-lowercase" translate="common.for.fee"></span></div><div class="layout layout-wrap"><div class="layout-column flex"><div layout layout-wrap class="bg-white layout-padding layout-row layout-wrap layout-align-space-around md-whiteframe-1dp"><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><ch-people-icons people="$ctrl.chRoomCtrl.room.people" max="$ctrl.chRoomCtrl.room.guestsCount.standard" extra-people="$ctrl.chRoomCtrl.room.extraPeople" extra-max="$ctrl.chRoomCtrl.room.guestsCount.extra" hidetooltip="!$ctrl.$mdMedia(\'gt-sm\')" size="big" theme="dark" hide-extra-people="true"></ch-people-icons></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div><md-icon class="mdi mdi-hotel md-48"></md-icon></div><div class="text-small"><span>{{::$ctrl.chRoomCtrl.room.beds.length}}</span> <span ng-if="$ctrl.chRoomCtrl.room.beds.length == 1"><span translate="bed.{{::$ctrl.chRoomCtrl.room.beds[0].type}}"></span> </span><span ng-if="$ctrl.chRoomCtrl.room.beds.length != 1" translate="bed.beds.principal"></span></div></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div style="height: 48px; line-height: 58px"><span class="md-title">{{::$ctrl.chRoomCtrl.room.metres}} m</span></div><div class="text-small"><span translate="room.size"></span></div></div></div><div ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra > 0" layout layout-wrap class="bg-white layout-padding layout-row layout-wrap layout-align-space-around md-whiteframe-1dp" style="margin-top: 10px"><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><ch-people-icons people="$ctrl.chRoomCtrl.room.people" max="$ctrl.chRoomCtrl.room.guestsCount.standard" extra-people="$ctrl.chRoomCtrl.room.extraPeople" extra-max="$ctrl.chRoomCtrl.room.guestsCount.extra" hidetooltip="!$ctrl.$mdMedia(\'gt-sm\')" size="big" theme="dark" hide-people="true"></ch-people-icons></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div><md-icon class="mdi mdi-hotel md-48"></md-icon></div><div class="text-small"><span>{{::$ctrl.chRoomCtrl.room.maxOtherBeds}}</span> <span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds == 1" translate="bed.otherbed"></span> <span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds != 1" translate="bed.otherbeds"></span></div></div><md-divider hide-xs></md-divider><div class="flex-gt-xs flex-xs-100 no-padding no-margin text-center"><div style="height: 48px;line-height: 58px"><span class="md-title">{{::$ctrl.chRoomCtrl.room.bathMetres}} m</span></div><div class="text-small"><span translate="room.bath.size"></span></div></div></div></div></div><h4 class="md-subhead no-margin-bottom"><strong translate="room.description"></strong></h4><div class="layout layout-wrap"><div flex><span ng-if="$ctrl.chRoomCtrl.room.description[$ctrl.chRoomCtrl.currentLang]"><span hm-read-more hm-text="{{$ctrl.chRoomCtrl.room.description[$ctrl.chRoomCtrl.currentLang]}}" hm-limit="50" hm-more-text="{{\'common.read.more\'|translate}}" hm-less-text="{{\'common.read.less\'|translate}}" hm-link-class="clickable text-primary"></span> </span><span ng-if="!$ctrl.chRoomCtrl.room.description[$ctrl.chRoomCtrl.currentLang]"><span translate="{{::$ctrl.chRoomCtrl.room.roomType.descriptionKey}}"></span></span></div></div><div layout="column" ng-if="$ctrl.chRoomCtrl.room.metres"><h4 class="md-subhead no-margin-bottom"><strong translate="room.size"></strong></h4><div layout><strong translate="room.room"></strong>:&nbsp; <span>{{::$ctrl.chRoomCtrl.room.metres}} mq</span>&nbsp; <span>({{::($ctrl.chRoomCtrl.room.metres * 10.764 | number:2)}} sq ft.)</span></div><div layout><strong translate="service.type.BATHROOM"></strong>:&nbsp; <span>{{::$ctrl.chRoomCtrl.room.bathMetres}} mq</span>&nbsp; <span>({{::($ctrl.chRoomCtrl.room.bathMetres * 10.764 | number:2)}} sq ft.)</span></div></div><div layout="column"><strong ng-if="$ctrl.chRoomCtrl.room.bathIncluded" class="md-subhead no-margin-bottom"><span translate="room.bath.included"></span></strong> <strong ng-if="!$ctrl.chRoomCtrl.room.bathIncluded" class="md-subhead no-margin-bottom"><span translate="room.bath.not.included"></span></strong></div><div layout="column" ng-if="$ctrl.chRoomCtrl.room.beds && $ctrl.chRoomCtrl.room.beds.length > 0"><h4 class="md-subhead no-margin-bottom"><strong ng-if="$ctrl.chRoomCtrl.room.beds.length == 1" translate="bed.bed.principal"></strong> <strong ng-if="$ctrl.chRoomCtrl.room.beds.length != 1" translate="bed.beds.principal"></strong></h4><span ng-repeat="bed in $ctrl.chRoomCtrl.room.beds track by $index"><span>{{::bed.count}}&nbsp;x&nbsp;</span><span ng-if="bed.type" translate="bed.{{::bed.type}}"></span><span ng-if="!$last">,&nbsp;</span></span></div><div layout="column" ng-if="$ctrl.chRoomCtrl.room.otherBeds && $ctrl.chRoomCtrl.room.otherBeds.length > 0"><h4 class="md-subhead no-margin-bottom"><strong translate="bed.otherbeds"></strong></h4><div class="text-small"><span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds > 1"><span class="layout-padding no-padding-left" translate="reservation.info.max.otherBeds" translate-value-count="{{::$ctrl.chRoomCtrl.room.maxOtherBeds}}"></span> </span><span ng-if="$ctrl.chRoomCtrl.room.maxOtherBeds == 1"><span class="layout-padding no-padding-left" translate="reservation.info.max.otherBed"></span> </span><span class="text-lowercase" translate="common.choice.between"></span>:</div><md-list class="no-padding-bottom"><md-list-item ng-repeat="otherBed in $ctrl.chRoomCtrl.room.otherBeds track by $index"><div class="layout flex layout-padding no-padding"><div class="layout-column flex layout-padding-sm no-padding layout-align-center-start"><div class="no-padding-left"><span>{{otherBed.count}}&nbsp;x&nbsp;</span> <strong translate="bed.{{otherBed.type}}"></strong>&nbsp; <span class="text-lowercase"><span translate="bed.max.person"></span>&nbsp; <span>{{otherBed.maxPerson}}</span>&nbsp; <span ng-if="otherBed.maxPerson > 1" translate="people.people"></span> <span ng-if="otherBed.maxPerson <= 1" translate="people.person"></span> <span translate="bed.per.bed"></span></span></div><div class="no-padding text-gray-light text-lowercase"><small ng-if="otherBed.people.adults"><span><span translate="people.adults"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.adults}}):</span> <span ng-if="otherBed.adultsPrice">{{otherBed.adultsPrice|currency:\'\'}}</span> <span ng-if="!otherBed.adultsPrice" translate="common.free"></span> </small><small ng-if="otherBed.people.boys"><span ng-if="otherBed.people.adults">&nbsp;-</span> <span><span translate="people.boys"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.boys}}):</span> <span ng-if="otherBed.boysPrice">{{otherBed.boysPrice|currency:\'\'}}</span> <span ng-if="!otherBed.boysPrice" translate="common.free"></span> </small><small ng-if="otherBed.people.children"><span ng-if="otherBed.people.adults || otherBed.people.boys">&nbsp;-</span> <span><span translate="people.children"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.children}}):</span> <span ng-if="otherBed.childrenPrice">{{otherBed.childrenPrice|currency:\'\'}}</span> <span ng-if="!otherBed.childrenPrice" translate="common.free"></span> </small><small ng-if="otherBed.people.kids"><span ng-if="otherBed.people.adults || otherBed.people.boys || otherBed.people.children">&nbsp;-</span> <span><span translate="people.kids"></span>&nbsp;(<span class="text-lowercase" translate="common.max"></span>&nbsp;{{otherBed.people.kids}}):</span> <span ng-if="otherBed.kidsPrice">{{otherBed.kidsPrice|currency:\'\'}}</span> <span ng-if="!otherBed.kidsPrice" translate="common.free"></span></small></div><div class="no-padding-top no-padding-left text-gray-light text-italic" ng-switch="otherBed.frequency"><small translate="common.price.is.intend"></small> <small class="text-lowercase" ng-switch-when="DAILY|NIGHTLY" ng-switch-when-separator="|">&nbsp;<span translate="service.type.payment.NIGHTLY"></span></small> <small class="text-lowercase" ng-switch-when="LUMP_SUM">&nbsp;<span translate="service.type.payment.LUMP_SUM"></span></small></div></div></div></md-list-item></md-list></div><div layout="column"><h4 class="md-subhead no-margin-bottom"><strong translate="reservation.guest.info"></strong></h4><div class="md-padding no-padding-left"><div class="md-padding no-padding-left no-padding-top"><span translate="room.people.host"></span></div><ul><li><strong>{{$ctrl.chRoomCtrl.room.guestsCount.standard}}&nbsp;</strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.standard == 1" translate="people.person.beds"></strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.standard != 1" translate="people.people.beds"></strong> <span class="text-lowercase">&nbsp;(<span ng-if="$ctrl.chRoomCtrl.room.people.boys || $ctrl.chRoomCtrl.room.people.children || $ctrl.chRoomCtrl.room.people.kids"><span translate="common.choice.between"></span>&nbsp;</span><ch-people-summary class="text-lowercase" people="$ctrl.chRoomCtrl.room.people"></ch-people-summary>)</span></li></ul><ul ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra"><li><strong>{{$ctrl.chRoomCtrl.room.guestsCount.extra}}&nbsp;</strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra == 1" translate="people.person.extra.beds"></strong> <strong class="text-lowercase" ng-if="$ctrl.chRoomCtrl.room.guestsCount.extra != 1" translate="people.people.extra.beds"></strong> <span class="text-lowercase">&nbsp;(<span ng-if="$ctrl.chRoomCtrl.room.extraPeople.boys || $ctrl.chRoomCtrl.room.extraPeople.children || $ctrl.chRoomCtrl.room.extraPeople.kids"><span translate="common.choice.between"></span>&nbsp;</span><ch-people-summary class="text-lowercase" people="$ctrl.chRoomCtrl.room.extraPeople"></ch-people-summary>)</span></li></ul><div ng-if="$ctrl.chRoomCtrl.room.people.boys || $ctrl.chRoomCtrl.room.people.children || $ctrl.chRoomCtrl.room.people.kids || $ctrl.chRoomCtrl.room.extraPeople.boys || $ctrl.chRoomCtrl.room.extraPeople.children || $ctrl.chRoomCtrl.room.extraPeople.kids" class="md-padding no-padding-left no-padding-bottom"><em translate="error.room.guest.not.selected"></em></div></div><div><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left no-margin-top text-gray-light"><strong translate="people.adults"></strong></h5><div><i translate="people.adults.policy" translate-value-age="{{::(18)}}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <span>{{::$ctrl.chRoomCtrl.room.people.adults}}</span></div></div><div ng-switch="$ctrl.chRoomCtrl.room.people.boys"><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left text-gray-light"><strong translate="people.boys"></strong></h5><div><i translate="people.boys.policy" translate-values="{min: 13, max: 17}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <i ng-switch-when="0" translate="common.none.male"></i> <span ng-switch-default>{{::$ctrl.chRoomCtrl.room.people.boys}}</span></div></div><div ng-switch="$ctrl.chRoomCtrl.room.people.children"><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left text-gray-light"><strong translate="people.children"></strong></h5><div><i translate="people.children.policy" translate-values="{min: 3, max: 12}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <i ng-switch-when="0" translate="common.none.male"></i> <span ng-switch-default>{{::$ctrl.chRoomCtrl.room.people.children}}</span></div></div><div ng-switch="$ctrl.chRoomCtrl.room.people.kids"><h5 class="md-body-2 md-margin no-margin-bottom no-margin-left text-gray-light"><strong translate="people.kids"></strong></h5><div><i translate="people.kids.policy" translate-values="{min: 0, max: 2}"></i></div><div><span translate="common.capacity.max"></span>:&nbsp; <i ng-switch-when="0" translate="common.none.male"></i> <span ng-switch-default>{{::$ctrl.chRoomCtrl.room.people.kids}}</span></div></div></div><div layout="column" ng-if="::($ctrl.chRoomCtrl.$$includedServices && $ctrl.chRoomCtrl.$$includedServices.length > 0)"><h4 class="md-subhead no-margin-bottom"><strong translate="room.facilities"></strong></h4><div layout layout-wrap><div class="flex-gt-sm-50 flex-100" ng-repeat="service in ::$ctrl.chRoomCtrl.$$includedServices track by service.id" ng-switch="service.type.nameKey"><md-icon class="mdi mdi-check md-18 text-success"></md-icon><span translate="{{::service.type.nameKey}}"></span></div></div></div><div layout="column" ng-if="::($ctrl.chRoomCtrl.$$bookableServices && $ctrl.chRoomCtrl.$$bookableServices.length > 0)"><h4 class="md-subhead no-margin-bottom"><strong translate="common.service.on.demand"></strong></h4><div layout layout-wrap><div class="flex-gt-sm-50 flex-100" ng-repeat="service in ::$ctrl.chRoomCtrl.$$bookableServices track by service.id" ng-switch="service.paymentType"><md-icon class="mdi mdi-check md-18 text-success"></md-icon><span translate="{{::service.type.nameKey}}"></span> <span ng-switch-when="FREE">(<span translate="payment.free"></span>)</span> <span ng-switch-default class="text-lowercase"><small ng-repeat="paymentOpt in ::service.paymentOptions track by $index"><span ng-if="paymentOpt.size == \'PER_ADULT\' || paymentOpt.size == \'SINGLE\'">(<span>{{paymentOpt.amount.finalAmount|chCurrency}}</span> <span ng-if="service.frequency == \'DAILY\'">/<span translate="date.day"></span></span> <span ng-if="service.frequency == \'MONTHLY\'">/<span translate="date.month"></span></span> <span ng-if="service.frequency == \'YEARLY\'">/<span translate="date.year"></span></span> <span ng-if="paymentOpt.size == \'PER_ADULT\'">/<span translate="people.person"></span></span>)</span></small></span></div></div></div><div layout layout-xs="column" layout-padding layout-align="center center" class="no-padding-bottom"><md-button class="row-mini button-mini auto-height text-initial" ng-click="$ctrl.$toggleRates(true)" aria-label="Open room rates"><strong class="text-center text-success" ng-clas="{\'no-padding\': !$ctrl.$mdMedia(\'gt-sm\')}"><span><span translate="reservation.dont.miss.room"></span>.&nbsp;</span> <span translate="reservation.book.now.holiday"></span></strong></md-button></div></div><div class="text-center"><md-button class="row-mini button-mini auto-height text-gray-light text-initial" ng-click="$ctrl.$toggleInfo(false)" aria-label="Close room info"><md-icon class="mdi mdi-chevron-up text-gray-light md-18 material-icon"></md-icon><span translate="common.hide"></span></md-button></div></div>')}]);
>>>>>>> branch 'master' of https://github.com/chromaitaly/itaca-ng-components.git
