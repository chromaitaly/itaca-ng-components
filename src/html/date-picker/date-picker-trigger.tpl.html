<ng-form name="chDatePickerTriggerForm">
	<md-button class="ch-date-picker-button flex text-lowercase text-center {{$ctrl.buttonClass}}" ng-class="{'minimal-button': !$ctrl.hideLabel || !$ctrl.hideValue}" 
		ng-click="$ctrl.$openPanel($event)" aria-label="Change date" ng-disabled="$ctrl.ngDisabled" ng-readonly="$ctrl.ngReadonly">
		<div class="{{$ctrl.wrapperClass}} layout-align-center-center" ng-class="$ctrl.labelPosition == 'top' ? 'layout-column' : 'layout-row'">
 			<div ng-if="!$ctrl.hideLabel" class="row-mini" ng-class="$ctrl.labelPosition == 'top' ? 'no-padding' : 'layout-padding-sm'">
 				<small class="row-mini text-initial" ng-bind-html="$ctrl.label"></small>
 			</div>
			<div class="layout-row layout-padding-sm layout-align-center-center">
				<span class="no-padding"><md-icon class="{{$ctrl.iconClass || 'mdi mdi-calendar'}}" ng-class="{'md-32': $ctrl.size == 'big', 'md-24': $ctrl.size == 'medium', 'md-18': $ctrl.size == 'small'}"></md-icon></span>
				<span ng-if="!$ctrl.hideValue" ng-class="{'md-display-1': $ctrl.size == 'big', 'md-title': $ctrl.size == 'medium', 'md-subhead': $ctrl.size == 'small'}"
					ng-bind="$ctrl.ngModel|date:'dd'"></span>
				<span ng-if="!$ctrl.hideValue" class="layout-column" ng-class="$ctrl.size == 'small' ? 'text-small row-1' : 'row-mini'">
					<span class="text-lowercase" ng-bind="$ctrl.ngModel|date:'MMM'"></span>
					<span ng-bind="$ctrl.ngModel|date:'yyyy'"></span>
				</span>
			</div>
		</div>
		
		<md-input-container class="md-block no-margin no-padding minimal-input">
			<md-datepicker style="visibility: hidden; display: block; height: 0px;" name="date" ng-model="$ctrl.ngModel" utc-date md-hide-icons="calendar" 
            	md-min-date="$ctrl.minDate" md-max-date="$ctrl.maxDate" ng-required="$ctrl.ngRequired" aria-label="Date"></md-datepicker>
			
			<div ng-messages="chDatePickerTriggerForm.date.$error" ng-show="chDatePickerTriggerForm.$submitted || chDatePickerTriggerForm.date.$touched || chDatePickerTriggerForm.date.$dirty">
				<div ng-repeat="errorObj in $ctrl.errorMessages" ng-message="{{errorObj.error}}" class="no-padding">
					<span ng-if="errorObj.message" ng-bind="{{errorObj.message}}"></span>
	       			<span ng-if="!errorObj.message && errorObj.messageKey" translate="{{errorObj.messageKey}}" 
	       				translate-values="errorObj.messageKeyParams"></span>
	       		</div>
			</div>
		</md-input-container>
		
		<md-tooltip ng-if="$ctrl.tooltip">
			<span ng-bind="$ctrl.tooltip"></span>
		</md-tooltip>
	</md-button>
</ng-form>